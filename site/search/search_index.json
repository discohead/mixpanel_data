{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"mixpanel_data","text":"<p>A Python library and CLI for working with Mixpanel analytics data, designed for AI coding agents.</p>"},{"location":"#the-problem","title":"The Problem","text":"<p>AI coding agents consume context window tokens when receiving Mixpanel API responses. A single query can return 30KB of JSON\u2014tokens that could otherwise be used for reasoning and iteration.</p>"},{"location":"#the-solution","title":"The Solution","text":"<p>Fetch data once, store it locally in DuckDB, query repeatedly with SQL. Data lives outside the context window; only precise answers flow back in.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Local Data Store \u2014 Fetch events and profiles from Mixpanel, store in DuckDB, query with SQL</li> <li>Live Queries \u2014 Run Mixpanel reports (segmentation, funnels, retention) directly when fresh data is needed</li> <li>Data Discovery \u2014 Introspect events, properties, values, saved funnels, and cohorts before writing queries</li> <li>Event Analytics \u2014 Query multi-event time series and property breakdowns across date ranges</li> <li>Advanced Analytics \u2014 User activity feeds, saved Insights reports, frequency analysis, numeric aggregations</li> <li>Python Library \u2014 Import and use programmatically in scripts and notebooks</li> <li>CLI \u2014 Compose into Unix pipelines, invoke from agents without writing Python</li> </ul>"},{"location":"#quick-example","title":"Quick Example","text":"<pre><code>import mixpanel_data as mp\n\n# Create workspace with stored credentials\nws = mp.Workspace()\n\n# Fetch events into local DuckDB\nws.fetch_events(\"jan_events\", from_date=\"2024-01-01\", to_date=\"2024-01-31\")\n\n# Query with SQL\ndf = ws.sql(\"\"\"\n    SELECT\n        DATE_TRUNC('day', event_time) as day,\n        event_name,\n        COUNT(*) as count\n    FROM jan_events\n    GROUP BY 1, 2\n    ORDER BY 1, 3 DESC\n\"\"\")\n\n# Or run live queries against Mixpanel API\nresult = ws.segmentation(\n    event=\"Purchase\",\n    from_date=\"2024-01-01\",\n    to_date=\"2024-01-31\",\n    on=\"properties.country\"\n)\n</code></pre>"},{"location":"#next-steps","title":"Next Steps","text":"<ul> <li>Installation \u2014 Get started with pip or uv</li> <li>Quick Start \u2014 Your first queries in 5 minutes</li> <li>API Reference \u2014 Complete Python API documentation</li> <li>CLI Reference \u2014 Command-line interface documentation</li> </ul>"},{"location":"api/","title":"API Overview","text":"<p>The <code>mixpanel_data</code> Python API provides programmatic access to all library functionality.</p>"},{"location":"api/#import-patterns","title":"Import Patterns","text":"<pre><code># Recommended: import with alias\nimport mixpanel_data as mp\n\nws = mp.Workspace()\nresult = ws.segmentation(...)\n\n# Direct imports\nfrom mixpanel_data import Workspace, FetchResult, MixpanelDataError\n\n# Auth utilities\nfrom mixpanel_data.auth import ConfigManager, Credentials\n</code></pre>"},{"location":"api/#core-components","title":"Core Components","text":""},{"location":"api/#workspace","title":"Workspace","text":"<p>The main entry point for all operations:</p> <ul> <li>Discovery \u2014 Explore events, properties, funnels, cohorts</li> <li>Fetching \u2014 Download events and profiles to local storage</li> <li>Local Queries \u2014 SQL queries against DuckDB</li> <li>Live Queries \u2014 Real-time analytics from Mixpanel API</li> <li>Introspection \u2014 Examine local tables and schemas</li> </ul> <p>View Workspace API</p>"},{"location":"api/#auth-module","title":"Auth Module","text":"<p>Credential and account management:</p> <ul> <li>ConfigManager \u2014 Manage accounts in config file</li> <li>Credentials \u2014 Credential container with secrets</li> <li>AccountInfo \u2014 Account metadata (without secrets)</li> </ul> <p>View Auth API</p>"},{"location":"api/#exceptions","title":"Exceptions","text":"<p>Structured error handling:</p> <ul> <li>MixpanelDataError \u2014 Base exception</li> <li>APIError \u2014 HTTP/API errors</li> <li>ConfigError \u2014 Configuration errors</li> <li>TableExistsError / TableNotFoundError \u2014 Storage errors</li> </ul> <p>View Exceptions</p>"},{"location":"api/#result-types","title":"Result Types","text":"<p>Typed results for all operations:</p> <ul> <li>FetchResult \u2014 Fetch operation results</li> <li>SegmentationResult \u2014 Time-series data</li> <li>FunnelResult \u2014 Funnel conversion data</li> <li>RetentionResult \u2014 Retention cohort data</li> <li>And many more...</li> </ul> <p>View Result Types</p>"},{"location":"api/#type-aliases","title":"Type Aliases","text":"<p>The library exports these type aliases:</p> <pre><code>from mixpanel_data import CountType, HourDayUnit, TimeUnit\n\n# CountType: Literal[\"general\", \"unique\", \"average\", \"median\", \"min\", \"max\"]\n# HourDayUnit: Literal[\"hour\", \"day\"]\n# TimeUnit: Literal[\"day\", \"week\", \"month\", \"quarter\", \"year\"]\n</code></pre>"},{"location":"api/#complete-api-reference","title":"Complete API Reference","text":"<ul> <li>Workspace \u2014 Main facade class</li> <li>Auth \u2014 Authentication and configuration</li> <li>Exceptions \u2014 Error handling</li> <li>Result Types \u2014 All result dataclasses</li> </ul>"},{"location":"api/auth/","title":"Auth Module","text":"<p>The auth module provides credential management and configuration.</p>"},{"location":"api/auth/#overview","title":"Overview","text":"<pre><code>from mixpanel_data.auth import ConfigManager, Credentials, AccountInfo\n\n# Manage accounts\nconfig = ConfigManager()\nconfig.add_account(\"production\", username=\"...\", secret=\"...\", project_id=\"...\", region=\"us\")\naccounts = config.list_accounts()\n\n# Resolve credentials\ncreds = config.resolve_credentials(account=\"production\")\n</code></pre>"},{"location":"api/auth/#configmanager","title":"ConfigManager","text":"<p>Manages accounts stored in the TOML config file (<code>~/.mp/config.toml</code>).</p>"},{"location":"api/auth/#mixpanel_data.auth.ConfigManager","title":"mixpanel_data.auth.ConfigManager","text":"<pre><code>ConfigManager(config_path: Path | None = None)\n</code></pre> <p>Manages Mixpanel project credentials and configuration.</p> <p>Handles: - Adding, removing, and listing project accounts - Setting the default account - Resolving credentials from environment variables or config file</p> <p>Config file location (in priority order): 1. Explicit config_path parameter 2. MP_CONFIG_PATH environment variable 3. Default: ~/.mp/config.toml</p> <p>Initialize ConfigManager.</p> PARAMETER DESCRIPTION <code>config_path</code> <p>Override config file location.          Default: ~/.mp/config.toml</p> <p> TYPE: <code>Path | None</code> DEFAULT: <code>None</code> </p> Source code in <code>src/mixpanel_data/_internal/config.py</code> <pre><code>def __init__(self, config_path: Path | None = None) -&gt; None:\n    \"\"\"Initialize ConfigManager.\n\n    Args:\n        config_path: Override config file location.\n                     Default: ~/.mp/config.toml\n    \"\"\"\n    if config_path is not None:\n        self._config_path = config_path\n    elif \"MP_CONFIG_PATH\" in os.environ:\n        self._config_path = Path(os.environ[\"MP_CONFIG_PATH\"])\n    else:\n        self._config_path = self.DEFAULT_CONFIG_PATH\n</code></pre>"},{"location":"api/auth/#mixpanel_data.auth.ConfigManager.config_path","title":"config_path  <code>property</code>","text":"<pre><code>config_path: Path\n</code></pre> <p>Return the config file path.</p>"},{"location":"api/auth/#mixpanel_data.auth.ConfigManager.resolve_credentials","title":"resolve_credentials","text":"<pre><code>resolve_credentials(account: str | None = None) -&gt; Credentials\n</code></pre> <p>Resolve credentials using priority order.</p> <p>Resolution order: 1. Environment variables (MP_USERNAME, MP_SECRET, MP_PROJECT_ID, MP_REGION) 2. Named account from config file (if account parameter provided) 3. Default account from config file</p> PARAMETER DESCRIPTION <code>account</code> <p>Optional account name to use instead of default.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>Credentials</code> <p>Immutable Credentials object.</p> RAISES DESCRIPTION <code>ConfigError</code> <p>If no credentials can be resolved.</p> <code>AccountNotFoundError</code> <p>If named account doesn't exist.</p> Source code in <code>src/mixpanel_data/_internal/config.py</code> <pre><code>def resolve_credentials(self, account: str | None = None) -&gt; Credentials:\n    \"\"\"Resolve credentials using priority order.\n\n    Resolution order:\n    1. Environment variables (MP_USERNAME, MP_SECRET, MP_PROJECT_ID, MP_REGION)\n    2. Named account from config file (if account parameter provided)\n    3. Default account from config file\n\n    Args:\n        account: Optional account name to use instead of default.\n\n    Returns:\n        Immutable Credentials object.\n\n    Raises:\n        ConfigError: If no credentials can be resolved.\n        AccountNotFoundError: If named account doesn't exist.\n    \"\"\"\n    # Priority 1: Environment variables\n    env_creds = self._resolve_from_env()\n    if env_creds is not None:\n        return env_creds\n\n    # Priority 2 &amp; 3: Config file (named account or default)\n    config = self._read_config()\n    accounts = config.get(\"accounts\", {})\n\n    if not accounts:\n        raise ConfigError(\n            \"No credentials configured. \"\n            \"Set MP_USERNAME, MP_SECRET, MP_PROJECT_ID, MP_REGION environment variables, \"\n            \"or add an account with add_account().\"\n        )\n\n    # Determine which account to use\n    account_name: str\n    if account is not None:\n        account_name = account\n    else:\n        default_account = config.get(\"default\")\n        if default_account is not None and isinstance(default_account, str):\n            account_name = default_account\n        else:\n            # Use the first account if no default set\n            account_name = next(iter(accounts.keys()))\n\n    if account_name not in accounts:\n        raise AccountNotFoundError(\n            account_name,\n            available_accounts=list(accounts.keys()),\n        )\n\n    account_data = accounts[account_name]\n    return Credentials(\n        username=account_data[\"username\"],\n        secret=SecretStr(account_data[\"secret\"]),\n        project_id=account_data[\"project_id\"],\n        region=account_data[\"region\"],\n    )\n</code></pre>"},{"location":"api/auth/#mixpanel_data.auth.ConfigManager.list_accounts","title":"list_accounts","text":"<pre><code>list_accounts() -&gt; list[AccountInfo]\n</code></pre> <p>List all configured accounts.</p> RETURNS DESCRIPTION <code>list[AccountInfo]</code> <p>List of AccountInfo objects (secrets not included).</p> Source code in <code>src/mixpanel_data/_internal/config.py</code> <pre><code>def list_accounts(self) -&gt; list[AccountInfo]:\n    \"\"\"List all configured accounts.\n\n    Returns:\n        List of AccountInfo objects (secrets not included).\n    \"\"\"\n    config = self._read_config()\n    accounts = config.get(\"accounts\", {})\n    default_name = config.get(\"default\")\n\n    result: list[AccountInfo] = []\n    for name, data in accounts.items():\n        result.append(\n            AccountInfo(\n                name=name,\n                username=data.get(\"username\", \"\"),\n                project_id=data.get(\"project_id\", \"\"),\n                region=data.get(\"region\", \"\"),\n                is_default=(name == default_name),\n            )\n        )\n\n    return result\n</code></pre>"},{"location":"api/auth/#mixpanel_data.auth.ConfigManager.add_account","title":"add_account","text":"<pre><code>add_account(name: str, username: str, secret: str, project_id: str, region: str) -&gt; None\n</code></pre> <p>Add a new account configuration.</p> PARAMETER DESCRIPTION <code>name</code> <p>Display name for the account.</p> <p> TYPE: <code>str</code> </p> <code>username</code> <p>Service account username.</p> <p> TYPE: <code>str</code> </p> <code>secret</code> <p>Service account secret.</p> <p> TYPE: <code>str</code> </p> <code>project_id</code> <p>Mixpanel project ID.</p> <p> TYPE: <code>str</code> </p> <code>region</code> <p>Data residency region (us, eu, in).</p> <p> TYPE: <code>str</code> </p> RAISES DESCRIPTION <code>AccountExistsError</code> <p>If account name already exists.</p> <code>ValueError</code> <p>If region is invalid.</p> Source code in <code>src/mixpanel_data/_internal/config.py</code> <pre><code>def add_account(\n    self,\n    name: str,\n    username: str,\n    secret: str,\n    project_id: str,\n    region: str,\n) -&gt; None:\n    \"\"\"Add a new account configuration.\n\n    Args:\n        name: Display name for the account.\n        username: Service account username.\n        secret: Service account secret.\n        project_id: Mixpanel project ID.\n        region: Data residency region (us, eu, in).\n\n    Raises:\n        AccountExistsError: If account name already exists.\n        ValueError: If region is invalid.\n    \"\"\"\n    # Validate region\n    region_lower = region.lower()\n    if region_lower not in VALID_REGIONS:\n        valid = \", \".join(VALID_REGIONS)\n        raise ValueError(f\"Region must be one of: {valid}. Got: {region}\")\n\n    config = self._read_config()\n    accounts = config.setdefault(\"accounts\", {})\n\n    if name in accounts:\n        raise AccountExistsError(name)\n\n    accounts[name] = {\n        \"username\": username,\n        \"secret\": secret,\n        \"project_id\": project_id,\n        \"region\": region_lower,\n    }\n\n    # If this is the first account, make it the default\n    if \"default\" not in config:\n        config[\"default\"] = name\n\n    self._write_config(config)\n</code></pre>"},{"location":"api/auth/#mixpanel_data.auth.ConfigManager.remove_account","title":"remove_account","text":"<pre><code>remove_account(name: str) -&gt; None\n</code></pre> <p>Remove an account configuration.</p> PARAMETER DESCRIPTION <code>name</code> <p>Account name to remove.</p> <p> TYPE: <code>str</code> </p> RAISES DESCRIPTION <code>AccountNotFoundError</code> <p>If account doesn't exist.</p> Source code in <code>src/mixpanel_data/_internal/config.py</code> <pre><code>def remove_account(self, name: str) -&gt; None:\n    \"\"\"Remove an account configuration.\n\n    Args:\n        name: Account name to remove.\n\n    Raises:\n        AccountNotFoundError: If account doesn't exist.\n    \"\"\"\n    config = self._read_config()\n    accounts = config.get(\"accounts\", {})\n\n    if name not in accounts:\n        raise AccountNotFoundError(name, available_accounts=list(accounts.keys()))\n\n    del accounts[name]\n\n    # If we removed the default, clear it or set to another account\n    if config.get(\"default\") == name:\n        if accounts:\n            config[\"default\"] = next(iter(accounts.keys()))\n        else:\n            config.pop(\"default\", None)\n\n    self._write_config(config)\n</code></pre>"},{"location":"api/auth/#mixpanel_data.auth.ConfigManager.set_default","title":"set_default","text":"<pre><code>set_default(name: str) -&gt; None\n</code></pre> <p>Set the default account.</p> PARAMETER DESCRIPTION <code>name</code> <p>Account name to set as default.</p> <p> TYPE: <code>str</code> </p> RAISES DESCRIPTION <code>AccountNotFoundError</code> <p>If account doesn't exist.</p> Source code in <code>src/mixpanel_data/_internal/config.py</code> <pre><code>def set_default(self, name: str) -&gt; None:\n    \"\"\"Set the default account.\n\n    Args:\n        name: Account name to set as default.\n\n    Raises:\n        AccountNotFoundError: If account doesn't exist.\n    \"\"\"\n    config = self._read_config()\n    accounts = config.get(\"accounts\", {})\n\n    if name not in accounts:\n        raise AccountNotFoundError(name, available_accounts=list(accounts.keys()))\n\n    config[\"default\"] = name\n    self._write_config(config)\n</code></pre>"},{"location":"api/auth/#mixpanel_data.auth.ConfigManager.get_account","title":"get_account","text":"<pre><code>get_account(name: str) -&gt; AccountInfo\n</code></pre> <p>Get information about a specific account.</p> PARAMETER DESCRIPTION <code>name</code> <p>Account name.</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>AccountInfo</code> <p>AccountInfo object (secret not included).</p> RAISES DESCRIPTION <code>AccountNotFoundError</code> <p>If account doesn't exist.</p> Source code in <code>src/mixpanel_data/_internal/config.py</code> <pre><code>def get_account(self, name: str) -&gt; AccountInfo:\n    \"\"\"Get information about a specific account.\n\n    Args:\n        name: Account name.\n\n    Returns:\n        AccountInfo object (secret not included).\n\n    Raises:\n        AccountNotFoundError: If account doesn't exist.\n    \"\"\"\n    config = self._read_config()\n    accounts = config.get(\"accounts\", {})\n\n    if name not in accounts:\n        raise AccountNotFoundError(name, available_accounts=list(accounts.keys()))\n\n    data = accounts[name]\n    default_name = config.get(\"default\")\n\n    return AccountInfo(\n        name=name,\n        username=data.get(\"username\", \"\"),\n        project_id=data.get(\"project_id\", \"\"),\n        region=data.get(\"region\", \"\"),\n        is_default=(name == default_name),\n    )\n</code></pre>"},{"location":"api/auth/#credentials","title":"Credentials","text":"<p>Immutable container for authentication credentials.</p>"},{"location":"api/auth/#mixpanel_data.auth.Credentials","title":"mixpanel_data.auth.Credentials","text":"<p>               Bases: <code>BaseModel</code></p> <p>Immutable credentials for Mixpanel API authentication.</p> <p>This is a frozen Pydantic model that ensures: - All fields are validated on construction - The secret is never exposed in repr/str output - The object cannot be modified after creation</p>"},{"location":"api/auth/#mixpanel_data.auth.Credentials.username","title":"username  <code>instance-attribute</code>","text":"<pre><code>username: str\n</code></pre> <p>Service account username.</p>"},{"location":"api/auth/#mixpanel_data.auth.Credentials.secret","title":"secret  <code>instance-attribute</code>","text":"<pre><code>secret: SecretStr\n</code></pre> <p>Service account secret (redacted in output).</p>"},{"location":"api/auth/#mixpanel_data.auth.Credentials.project_id","title":"project_id  <code>instance-attribute</code>","text":"<pre><code>project_id: str\n</code></pre> <p>Mixpanel project identifier.</p>"},{"location":"api/auth/#mixpanel_data.auth.Credentials.region","title":"region  <code>instance-attribute</code>","text":"<pre><code>region: RegionType\n</code></pre> <p>Data residency region (us, eu, or in).</p>"},{"location":"api/auth/#mixpanel_data.auth.Credentials.validate_region","title":"validate_region  <code>classmethod</code>","text":"<pre><code>validate_region(v: str) -&gt; str\n</code></pre> <p>Validate and normalize region to lowercase.</p> Source code in <code>src/mixpanel_data/_internal/config.py</code> <pre><code>@field_validator(\"region\", mode=\"before\")\n@classmethod\ndef validate_region(cls, v: str) -&gt; str:\n    \"\"\"Validate and normalize region to lowercase.\"\"\"\n    if not isinstance(v, str):\n        raise ValueError(f\"Region must be a string. Got: {type(v).__name__}\")\n    v_lower = v.lower()\n    if v_lower not in VALID_REGIONS:\n        valid = \", \".join(VALID_REGIONS)\n        raise ValueError(f\"Region must be one of: {valid}. Got: {v}\")\n    return v_lower\n</code></pre>"},{"location":"api/auth/#mixpanel_data.auth.Credentials.validate_non_empty","title":"validate_non_empty  <code>classmethod</code>","text":"<pre><code>validate_non_empty(v: str) -&gt; str\n</code></pre> <p>Validate string fields are non-empty.</p> Source code in <code>src/mixpanel_data/_internal/config.py</code> <pre><code>@field_validator(\"username\", \"project_id\")\n@classmethod\ndef validate_non_empty(cls, v: str) -&gt; str:\n    \"\"\"Validate string fields are non-empty.\"\"\"\n    if not v or not v.strip():\n        raise ValueError(\"Field cannot be empty\")\n    return v\n</code></pre>"},{"location":"api/auth/#mixpanel_data.auth.Credentials.__repr__","title":"__repr__","text":"<pre><code>__repr__() -&gt; str\n</code></pre> <p>Return string representation with redacted secret.</p> Source code in <code>src/mixpanel_data/_internal/config.py</code> <pre><code>def __repr__(self) -&gt; str:\n    \"\"\"Return string representation with redacted secret.\"\"\"\n    return (\n        f\"Credentials(username={self.username!r}, secret=***, \"\n        f\"project_id={self.project_id!r}, region={self.region!r})\"\n    )\n</code></pre>"},{"location":"api/auth/#mixpanel_data.auth.Credentials.__str__","title":"__str__","text":"<pre><code>__str__() -&gt; str\n</code></pre> <p>Return string representation with redacted secret.</p> Source code in <code>src/mixpanel_data/_internal/config.py</code> <pre><code>def __str__(self) -&gt; str:\n    \"\"\"Return string representation with redacted secret.\"\"\"\n    return self.__repr__()\n</code></pre>"},{"location":"api/auth/#accountinfo","title":"AccountInfo","text":"<p>Account metadata (without the secret).</p>"},{"location":"api/auth/#mixpanel_data.auth.AccountInfo","title":"mixpanel_data.auth.AccountInfo  <code>dataclass</code>","text":"<pre><code>AccountInfo(name: str, username: str, project_id: str, region: str, is_default: bool)\n</code></pre> <p>Information about a configured account (without secret).</p> <p>Used for listing accounts without exposing sensitive credentials.</p>"},{"location":"api/auth/#mixpanel_data.auth.AccountInfo.name","title":"name  <code>instance-attribute</code>","text":"<pre><code>name: str\n</code></pre> <p>Account display name.</p>"},{"location":"api/auth/#mixpanel_data.auth.AccountInfo.username","title":"username  <code>instance-attribute</code>","text":"<pre><code>username: str\n</code></pre> <p>Service account username.</p>"},{"location":"api/auth/#mixpanel_data.auth.AccountInfo.project_id","title":"project_id  <code>instance-attribute</code>","text":"<pre><code>project_id: str\n</code></pre> <p>Mixpanel project identifier.</p>"},{"location":"api/auth/#mixpanel_data.auth.AccountInfo.region","title":"region  <code>instance-attribute</code>","text":"<pre><code>region: str\n</code></pre> <p>Data residency region.</p>"},{"location":"api/auth/#mixpanel_data.auth.AccountInfo.is_default","title":"is_default  <code>instance-attribute</code>","text":"<pre><code>is_default: bool\n</code></pre> <p>Whether this is the default account.</p>"},{"location":"api/exceptions/","title":"Exceptions","text":"<p>All library exceptions inherit from <code>MixpanelDataError</code>, enabling callers to catch all library errors with a single except clause.</p>"},{"location":"api/exceptions/#exception-hierarchy","title":"Exception Hierarchy","text":"<pre><code>MixpanelDataError\n\u251c\u2500\u2500 ConfigError\n\u2502   \u251c\u2500\u2500 AccountNotFoundError\n\u2502   \u2514\u2500\u2500 AccountExistsError\n\u251c\u2500\u2500 APIError\n\u2502   \u251c\u2500\u2500 AuthenticationError\n\u2502   \u251c\u2500\u2500 RateLimitError\n\u2502   \u251c\u2500\u2500 QueryError\n\u2502   \u251c\u2500\u2500 ServerError\n\u2502   \u2514\u2500\u2500 JQLSyntaxError\n\u251c\u2500\u2500 TableExistsError\n\u2514\u2500\u2500 TableNotFoundError\n</code></pre>"},{"location":"api/exceptions/#catching-errors","title":"Catching Errors","text":"<pre><code>import mixpanel_data as mp\n\ntry:\n    ws = mp.Workspace()\n    result = ws.segmentation(event=\"Purchase\", from_date=\"2024-01-01\", to_date=\"2024-01-31\")\nexcept mp.AuthenticationError as e:\n    print(f\"Auth failed: {e.message}\")\nexcept mp.RateLimitError as e:\n    print(f\"Rate limited, retry after {e.retry_after}s\")\nexcept mp.MixpanelDataError as e:\n    print(f\"Error [{e.code}]: {e.message}\")\n</code></pre>"},{"location":"api/exceptions/#base-exception","title":"Base Exception","text":""},{"location":"api/exceptions/#mixpanel_data.MixpanelDataError","title":"mixpanel_data.MixpanelDataError","text":"<pre><code>MixpanelDataError(message: str, code: str = 'UNKNOWN_ERROR', details: dict[str, Any] | None = None)\n</code></pre> <p>               Bases: <code>Exception</code></p> <p>Base exception for all mixpanel_data errors.</p> <p>All library exceptions inherit from this class, allowing callers to: - Catch all library errors: except MixpanelDataError - Handle specific errors: except AccountNotFoundError - Serialize errors: error.to_dict()</p> <p>Initialize exception.</p> PARAMETER DESCRIPTION <code>message</code> <p>Human-readable error message.</p> <p> TYPE: <code>str</code> </p> <code>code</code> <p>Machine-readable error code for programmatic handling.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'UNKNOWN_ERROR'</code> </p> <code>details</code> <p>Additional structured data about the error.</p> <p> TYPE: <code>dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> Source code in <code>src/mixpanel_data/exceptions.py</code> <pre><code>def __init__(\n    self,\n    message: str,\n    code: str = \"UNKNOWN_ERROR\",\n    details: dict[str, Any] | None = None,\n) -&gt; None:\n    \"\"\"Initialize exception.\n\n    Args:\n        message: Human-readable error message.\n        code: Machine-readable error code for programmatic handling.\n        details: Additional structured data about the error.\n    \"\"\"\n    super().__init__(message)\n    self._message = message\n    self._code = code\n    self._details = details or {}\n</code></pre>"},{"location":"api/exceptions/#mixpanel_data.MixpanelDataError.code","title":"code  <code>property</code>","text":"<pre><code>code: str\n</code></pre> <p>Machine-readable error code.</p>"},{"location":"api/exceptions/#mixpanel_data.MixpanelDataError.message","title":"message  <code>property</code>","text":"<pre><code>message: str\n</code></pre> <p>Human-readable error message.</p>"},{"location":"api/exceptions/#mixpanel_data.MixpanelDataError.details","title":"details  <code>property</code>","text":"<pre><code>details: dict[str, Any]\n</code></pre> <p>Additional structured error data.</p>"},{"location":"api/exceptions/#mixpanel_data.MixpanelDataError.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize exception for logging/JSON output.</p> RETURNS DESCRIPTION <code>dict[str, Any]</code> <p>Dictionary with keys: code, message, details.</p> <code>dict[str, Any]</code> <p>All values are JSON-serializable.</p> Source code in <code>src/mixpanel_data/exceptions.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize exception for logging/JSON output.\n\n    Returns:\n        Dictionary with keys: code, message, details.\n        All values are JSON-serializable.\n    \"\"\"\n    return {\n        \"code\": self._code,\n        \"message\": self._message,\n        \"details\": self._details,\n    }\n</code></pre>"},{"location":"api/exceptions/#mixpanel_data.MixpanelDataError.__str__","title":"__str__","text":"<pre><code>__str__() -&gt; str\n</code></pre> <p>Return human-readable error message.</p> Source code in <code>src/mixpanel_data/exceptions.py</code> <pre><code>def __str__(self) -&gt; str:\n    \"\"\"Return human-readable error message.\"\"\"\n    return self._message\n</code></pre>"},{"location":"api/exceptions/#mixpanel_data.MixpanelDataError.__repr__","title":"__repr__","text":"<pre><code>__repr__() -&gt; str\n</code></pre> <p>Return detailed string representation.</p> Source code in <code>src/mixpanel_data/exceptions.py</code> <pre><code>def __repr__(self) -&gt; str:\n    \"\"\"Return detailed string representation.\"\"\"\n    return (\n        f\"{self.__class__.__name__}(message={self._message!r}, code={self._code!r})\"\n    )\n</code></pre>"},{"location":"api/exceptions/#api-exceptions","title":"API Exceptions","text":""},{"location":"api/exceptions/#mixpanel_data.APIError","title":"mixpanel_data.APIError","text":"<pre><code>APIError(message: str, *, status_code: int, response_body: str | dict[str, Any] | None = None, request_method: str | None = None, request_url: str | None = None, request_params: dict[str, Any] | None = None, request_body: dict[str, Any] | None = None, code: str = 'API_ERROR')\n</code></pre> <p>               Bases: <code>MixpanelDataError</code></p> <p>Base class for Mixpanel API HTTP errors.</p> <p>Provides structured access to HTTP request/response context for debugging and automated recovery by AI agents. All API-related exceptions inherit from this class, enabling agents to:</p> <ul> <li>Understand what went wrong (status code, error message)</li> <li>See exactly what was sent (request method, URL, params, body)</li> <li>See exactly what came back (response body, headers)</li> <li>Modify their approach and retry autonomously</li> </ul> Example <pre><code>try:\n    result = client.segmentation(event=\"signup\", ...)\nexcept APIError as e:\n    print(f\"Status: {e.status_code}\")\n    print(f\"Response: {e.response_body}\")\n    print(f\"Request URL: {e.request_url}\")\n    print(f\"Request params: {e.request_params}\")\n</code></pre> <p>Initialize APIError.</p> PARAMETER DESCRIPTION <code>message</code> <p>Human-readable error message.</p> <p> TYPE: <code>str</code> </p> <code>status_code</code> <p>HTTP status code from response.</p> <p> TYPE: <code>int</code> </p> <code>response_body</code> <p>Raw response body (string or parsed dict).</p> <p> TYPE: <code>str | dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> <code>request_method</code> <p>HTTP method used (GET, POST).</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>request_url</code> <p>Full request URL.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>request_params</code> <p>Query parameters sent.</p> <p> TYPE: <code>dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> <code>request_body</code> <p>Request body sent (for POST requests).</p> <p> TYPE: <code>dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> <code>code</code> <p>Machine-readable error code.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'API_ERROR'</code> </p> Source code in <code>src/mixpanel_data/exceptions.py</code> <pre><code>def __init__(\n    self,\n    message: str,\n    *,\n    status_code: int,\n    response_body: str | dict[str, Any] | None = None,\n    request_method: str | None = None,\n    request_url: str | None = None,\n    request_params: dict[str, Any] | None = None,\n    request_body: dict[str, Any] | None = None,\n    code: str = \"API_ERROR\",\n) -&gt; None:\n    \"\"\"Initialize APIError.\n\n    Args:\n        message: Human-readable error message.\n        status_code: HTTP status code from response.\n        response_body: Raw response body (string or parsed dict).\n        request_method: HTTP method used (GET, POST).\n        request_url: Full request URL.\n        request_params: Query parameters sent.\n        request_body: Request body sent (for POST requests).\n        code: Machine-readable error code.\n    \"\"\"\n    self._status_code = status_code\n    self._response_body = response_body\n    self._request_method = request_method\n    self._request_url = request_url\n    self._request_params = request_params\n    self._request_body = request_body\n\n    details: dict[str, Any] = {\n        \"status_code\": status_code,\n    }\n    if response_body is not None:\n        details[\"response_body\"] = response_body\n    if request_method is not None:\n        details[\"request_method\"] = request_method\n    if request_url is not None:\n        details[\"request_url\"] = request_url\n    if request_params is not None:\n        details[\"request_params\"] = request_params\n    if request_body is not None:\n        details[\"request_body\"] = request_body\n\n    super().__init__(message, code=code, details=details)\n</code></pre>"},{"location":"api/exceptions/#mixpanel_data.APIError.status_code","title":"status_code  <code>property</code>","text":"<pre><code>status_code: int\n</code></pre> <p>HTTP status code from response.</p>"},{"location":"api/exceptions/#mixpanel_data.APIError.response_body","title":"response_body  <code>property</code>","text":"<pre><code>response_body: str | dict[str, Any] | None\n</code></pre> <p>Raw response body (string or parsed dict).</p>"},{"location":"api/exceptions/#mixpanel_data.APIError.request_method","title":"request_method  <code>property</code>","text":"<pre><code>request_method: str | None\n</code></pre> <p>HTTP method used (GET, POST).</p>"},{"location":"api/exceptions/#mixpanel_data.APIError.request_url","title":"request_url  <code>property</code>","text":"<pre><code>request_url: str | None\n</code></pre> <p>Full request URL.</p>"},{"location":"api/exceptions/#mixpanel_data.APIError.request_params","title":"request_params  <code>property</code>","text":"<pre><code>request_params: dict[str, Any] | None\n</code></pre> <p>Query parameters sent.</p>"},{"location":"api/exceptions/#mixpanel_data.APIError.request_body","title":"request_body  <code>property</code>","text":"<pre><code>request_body: dict[str, Any] | None\n</code></pre> <p>Request body sent (for POST requests).</p>"},{"location":"api/exceptions/#mixpanel_data.AuthenticationError","title":"mixpanel_data.AuthenticationError","text":"<pre><code>AuthenticationError(message: str = 'Authentication failed', *, status_code: int = 401, response_body: str | dict[str, Any] | None = None, request_method: str | None = None, request_url: str | None = None, request_params: dict[str, Any] | None = None)\n</code></pre> <p>               Bases: <code>APIError</code></p> <p>Authentication with Mixpanel API failed (HTTP 401).</p> <p>Raised when credentials are invalid, expired, or lack required permissions. Inherits from APIError to provide full request/response context.</p> Example <pre><code>try:\n    client.segmentation(...)\nexcept AuthenticationError as e:\n    print(f\"Auth failed: {e.message}\")\n    print(f\"Request URL: {e.request_url}\")\n    # Check if project_id is correct, credentials are valid, etc.\n</code></pre> <p>Initialize AuthenticationError.</p> PARAMETER DESCRIPTION <code>message</code> <p>Human-readable error message.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'Authentication failed'</code> </p> <code>status_code</code> <p>HTTP status code (default 401).</p> <p> TYPE: <code>int</code> DEFAULT: <code>401</code> </p> <code>response_body</code> <p>Raw response body.</p> <p> TYPE: <code>str | dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> <code>request_method</code> <p>HTTP method used.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>request_url</code> <p>Full request URL.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>request_params</code> <p>Query parameters sent.</p> <p> TYPE: <code>dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> Source code in <code>src/mixpanel_data/exceptions.py</code> <pre><code>def __init__(\n    self,\n    message: str = \"Authentication failed\",\n    *,\n    status_code: int = 401,\n    response_body: str | dict[str, Any] | None = None,\n    request_method: str | None = None,\n    request_url: str | None = None,\n    request_params: dict[str, Any] | None = None,\n) -&gt; None:\n    \"\"\"Initialize AuthenticationError.\n\n    Args:\n        message: Human-readable error message.\n        status_code: HTTP status code (default 401).\n        response_body: Raw response body.\n        request_method: HTTP method used.\n        request_url: Full request URL.\n        request_params: Query parameters sent.\n    \"\"\"\n    super().__init__(\n        message,\n        status_code=status_code,\n        response_body=response_body,\n        request_method=request_method,\n        request_url=request_url,\n        request_params=request_params,\n        code=\"AUTH_FAILED\",\n    )\n</code></pre>"},{"location":"api/exceptions/#mixpanel_data.RateLimitError","title":"mixpanel_data.RateLimitError","text":"<pre><code>RateLimitError(message: str = 'Rate limit exceeded', *, retry_after: int | None = None, status_code: int = 429, response_body: str | dict[str, Any] | None = None, request_method: str | None = None, request_url: str | None = None, request_params: dict[str, Any] | None = None)\n</code></pre> <p>               Bases: <code>APIError</code></p> <p>Mixpanel API rate limit exceeded (HTTP 429).</p> <p>Raised when the API returns a 429 status. The retry_after property indicates when the request can be retried. Inherits from APIError to provide full request context for debugging.</p> Example <pre><code>try:\n    for _ in range(1000):\n        client.segmentation(...)\nexcept RateLimitError as e:\n    print(f\"Rate limited! Retry after {e.retry_after}s\")\n    print(f\"Request: {e.request_method} {e.request_url}\")\n    time.sleep(e.retry_after or 60)\n</code></pre> <p>Initialize RateLimitError.</p> PARAMETER DESCRIPTION <code>message</code> <p>Human-readable error message.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'Rate limit exceeded'</code> </p> <code>retry_after</code> <p>Seconds until retry is allowed (from Retry-After header).</p> <p> TYPE: <code>int | None</code> DEFAULT: <code>None</code> </p> <code>status_code</code> <p>HTTP status code (default 429).</p> <p> TYPE: <code>int</code> DEFAULT: <code>429</code> </p> <code>response_body</code> <p>Raw response body.</p> <p> TYPE: <code>str | dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> <code>request_method</code> <p>HTTP method used.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>request_url</code> <p>Full request URL.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>request_params</code> <p>Query parameters sent.</p> <p> TYPE: <code>dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> Source code in <code>src/mixpanel_data/exceptions.py</code> <pre><code>def __init__(\n    self,\n    message: str = \"Rate limit exceeded\",\n    *,\n    retry_after: int | None = None,\n    status_code: int = 429,\n    response_body: str | dict[str, Any] | None = None,\n    request_method: str | None = None,\n    request_url: str | None = None,\n    request_params: dict[str, Any] | None = None,\n) -&gt; None:\n    \"\"\"Initialize RateLimitError.\n\n    Args:\n        message: Human-readable error message.\n        retry_after: Seconds until retry is allowed (from Retry-After header).\n        status_code: HTTP status code (default 429).\n        response_body: Raw response body.\n        request_method: HTTP method used.\n        request_url: Full request URL.\n        request_params: Query parameters sent.\n    \"\"\"\n    self._retry_after = retry_after\n    if retry_after is not None:\n        message = f\"{message}. Retry after {retry_after} seconds.\"\n\n    super().__init__(\n        message,\n        status_code=status_code,\n        response_body=response_body,\n        request_method=request_method,\n        request_url=request_url,\n        request_params=request_params,\n        code=\"RATE_LIMITED\",\n    )\n    # Add retry_after to details\n    if retry_after is not None:\n        self._details[\"retry_after\"] = retry_after\n</code></pre>"},{"location":"api/exceptions/#mixpanel_data.RateLimitError.retry_after","title":"retry_after  <code>property</code>","text":"<pre><code>retry_after: int | None\n</code></pre> <p>Seconds until retry is allowed, or None if unknown.</p>"},{"location":"api/exceptions/#mixpanel_data.QueryError","title":"mixpanel_data.QueryError","text":"<pre><code>QueryError(message: str = 'Query execution failed', *, status_code: int = 400, response_body: str | dict[str, Any] | None = None, request_method: str | None = None, request_url: str | None = None, request_params: dict[str, Any] | None = None, request_body: dict[str, Any] | None = None)\n</code></pre> <p>               Bases: <code>APIError</code></p> <p>Query execution failed (HTTP 400 or query-specific error).</p> <p>Raised when an API query fails due to invalid parameters, syntax errors, or other query-specific issues. Inherits from APIError to provide full request/response context for debugging.</p> Example <pre><code>try:\n    client.segmentation(event=\"nonexistent\", ...)\nexcept QueryError as e:\n    print(f\"Query failed: {e.message}\")\n    print(f\"Response: {e.response_body}\")\n    print(f\"Request params: {e.request_params}\")\n</code></pre> <p>Initialize QueryError.</p> PARAMETER DESCRIPTION <code>message</code> <p>Human-readable error message.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'Query execution failed'</code> </p> <code>status_code</code> <p>HTTP status code (default 400).</p> <p> TYPE: <code>int</code> DEFAULT: <code>400</code> </p> <code>response_body</code> <p>Raw response body with error details.</p> <p> TYPE: <code>str | dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> <code>request_method</code> <p>HTTP method used.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>request_url</code> <p>Full request URL.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>request_params</code> <p>Query parameters sent.</p> <p> TYPE: <code>dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> <code>request_body</code> <p>Request body sent (for POST).</p> <p> TYPE: <code>dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> Source code in <code>src/mixpanel_data/exceptions.py</code> <pre><code>def __init__(\n    self,\n    message: str = \"Query execution failed\",\n    *,\n    status_code: int = 400,\n    response_body: str | dict[str, Any] | None = None,\n    request_method: str | None = None,\n    request_url: str | None = None,\n    request_params: dict[str, Any] | None = None,\n    request_body: dict[str, Any] | None = None,\n) -&gt; None:\n    \"\"\"Initialize QueryError.\n\n    Args:\n        message: Human-readable error message.\n        status_code: HTTP status code (default 400).\n        response_body: Raw response body with error details.\n        request_method: HTTP method used.\n        request_url: Full request URL.\n        request_params: Query parameters sent.\n        request_body: Request body sent (for POST).\n    \"\"\"\n    super().__init__(\n        message,\n        status_code=status_code,\n        response_body=response_body,\n        request_method=request_method,\n        request_url=request_url,\n        request_params=request_params,\n        request_body=request_body,\n        code=\"QUERY_FAILED\",\n    )\n</code></pre>"},{"location":"api/exceptions/#mixpanel_data.ServerError","title":"mixpanel_data.ServerError","text":"<pre><code>ServerError(message: str = 'Server error', *, status_code: int = 500, response_body: str | dict[str, Any] | None = None, request_method: str | None = None, request_url: str | None = None, request_params: dict[str, Any] | None = None, request_body: dict[str, Any] | None = None)\n</code></pre> <p>               Bases: <code>APIError</code></p> <p>Mixpanel server error (HTTP 5xx).</p> <p>Raised when the Mixpanel API returns a server error. These are typically transient issues that may succeed on retry. The response_body property contains the full error details from Mixpanel, which often include actionable information (e.g., \"unit and interval both specified\").</p> Example <pre><code>try:\n    client.retention(born_event=\"signup\", ...)\nexcept ServerError as e:\n    print(f\"Server error {e.status_code}: {e.message}\")\n    print(f\"Response: {e.response_body}\")\n    print(f\"Request params: {e.request_params}\")\n    # AI agent can analyze response_body to fix the request\n</code></pre> <p>Initialize ServerError.</p> PARAMETER DESCRIPTION <code>message</code> <p>Human-readable error message.</p> <p> TYPE: <code>str</code> DEFAULT: <code>'Server error'</code> </p> <code>status_code</code> <p>HTTP status code (5xx).</p> <p> TYPE: <code>int</code> DEFAULT: <code>500</code> </p> <code>response_body</code> <p>Raw response body with error details.</p> <p> TYPE: <code>str | dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> <code>request_method</code> <p>HTTP method used.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>request_url</code> <p>Full request URL.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>request_params</code> <p>Query parameters sent.</p> <p> TYPE: <code>dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> <code>request_body</code> <p>Request body sent (for POST).</p> <p> TYPE: <code>dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> Source code in <code>src/mixpanel_data/exceptions.py</code> <pre><code>def __init__(\n    self,\n    message: str = \"Server error\",\n    *,\n    status_code: int = 500,\n    response_body: str | dict[str, Any] | None = None,\n    request_method: str | None = None,\n    request_url: str | None = None,\n    request_params: dict[str, Any] | None = None,\n    request_body: dict[str, Any] | None = None,\n) -&gt; None:\n    \"\"\"Initialize ServerError.\n\n    Args:\n        message: Human-readable error message.\n        status_code: HTTP status code (5xx).\n        response_body: Raw response body with error details.\n        request_method: HTTP method used.\n        request_url: Full request URL.\n        request_params: Query parameters sent.\n        request_body: Request body sent (for POST).\n    \"\"\"\n    super().__init__(\n        message,\n        status_code=status_code,\n        response_body=response_body,\n        request_method=request_method,\n        request_url=request_url,\n        request_params=request_params,\n        request_body=request_body,\n        code=\"SERVER_ERROR\",\n    )\n</code></pre>"},{"location":"api/exceptions/#mixpanel_data.JQLSyntaxError","title":"mixpanel_data.JQLSyntaxError","text":"<pre><code>JQLSyntaxError(raw_error: str, script: str | None = None, request_path: str | None = None)\n</code></pre> <p>               Bases: <code>QueryError</code></p> <p>JQL script execution failed with syntax or runtime error (HTTP 412).</p> <p>Raised when a JQL script fails to execute due to syntax errors, type errors, or other JavaScript runtime issues. Provides structured access to error details from Mixpanel's response.</p> <p>Inherits from QueryError (and thus APIError) to provide full HTTP context.</p> Example <pre><code>try:\n    result = live_query.jql(script)\nexcept JQLSyntaxError as e:\n    print(f\"Error: {e.error_type}: {e.error_message}\")\n    print(f\"Script: {e.script}\")\n    print(f\"Line info: {e.line_info}\")\n    # AI agent can use this to fix the script and retry\n</code></pre> <p>Initialize JQLSyntaxError.</p> PARAMETER DESCRIPTION <code>raw_error</code> <p>Raw error string from Mixpanel API response.</p> <p> TYPE: <code>str</code> </p> <code>script</code> <p>The JQL script that caused the error.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>request_path</code> <p>API request path from error response.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> Source code in <code>src/mixpanel_data/exceptions.py</code> <pre><code>def __init__(\n    self,\n    raw_error: str,\n    script: str | None = None,\n    request_path: str | None = None,\n) -&gt; None:\n    \"\"\"Initialize JQLSyntaxError.\n\n    Args:\n        raw_error: Raw error string from Mixpanel API response.\n        script: The JQL script that caused the error.\n        request_path: API request path from error response.\n    \"\"\"\n    # Parse structured error info from raw error string\n    self._error_type = self._extract_error_type(raw_error)\n    self._error_message = self._extract_message(raw_error)\n    self._line_info = self._extract_line_info(raw_error)\n    self._stack_trace = self._extract_stack_trace(raw_error)\n    self._script = script\n    self._raw_error = raw_error\n    self._request_path = request_path\n\n    # Build human-readable message\n    message = f\"JQL {self._error_type}: {self._error_message}\"\n    if self._line_info:\n        message += f\"\\n{self._line_info}\"\n\n    # Build response body dict for APIError\n    response_body: dict[str, Any] = {\n        \"error\": raw_error,\n    }\n    if request_path:\n        response_body[\"request\"] = request_path\n\n    super().__init__(\n        message,\n        status_code=412,\n        response_body=response_body,\n        request_body={\"script\": script} if script else None,\n    )\n    self._code = \"JQL_SYNTAX_ERROR\"\n\n    # Add JQL-specific details\n    self._details[\"error_type\"] = self._error_type\n    self._details[\"error_message\"] = self._error_message\n    self._details[\"line_info\"] = self._line_info\n    self._details[\"stack_trace\"] = self._stack_trace\n    self._details[\"script\"] = script\n    self._details[\"request_path\"] = request_path\n    self._details[\"raw_error\"] = raw_error\n</code></pre>"},{"location":"api/exceptions/#mixpanel_data.JQLSyntaxError.error_type","title":"error_type  <code>property</code>","text":"<pre><code>error_type: str\n</code></pre> <p>JavaScript error type (TypeError, SyntaxError, ReferenceError, etc.).</p>"},{"location":"api/exceptions/#mixpanel_data.JQLSyntaxError.error_message","title":"error_message  <code>property</code>","text":"<pre><code>error_message: str\n</code></pre> <p>Error message describing what went wrong.</p>"},{"location":"api/exceptions/#mixpanel_data.JQLSyntaxError.line_info","title":"line_info  <code>property</code>","text":"<pre><code>line_info: str | None\n</code></pre> <p>Code snippet with caret showing error location, if available.</p>"},{"location":"api/exceptions/#mixpanel_data.JQLSyntaxError.stack_trace","title":"stack_trace  <code>property</code>","text":"<pre><code>stack_trace: str | None\n</code></pre> <p>JavaScript stack trace, if available.</p>"},{"location":"api/exceptions/#mixpanel_data.JQLSyntaxError.script","title":"script  <code>property</code>","text":"<pre><code>script: str | None\n</code></pre> <p>The JQL script that caused the error.</p>"},{"location":"api/exceptions/#mixpanel_data.JQLSyntaxError.raw_error","title":"raw_error  <code>property</code>","text":"<pre><code>raw_error: str\n</code></pre> <p>Complete raw error string from Mixpanel.</p>"},{"location":"api/exceptions/#configuration-exceptions","title":"Configuration Exceptions","text":""},{"location":"api/exceptions/#mixpanel_data.ConfigError","title":"mixpanel_data.ConfigError","text":"<pre><code>ConfigError(message: str, details: dict[str, Any] | None = None)\n</code></pre> <p>               Bases: <code>MixpanelDataError</code></p> <p>Base for configuration-related errors.</p> <p>Raised when there's a problem with configuration files, environment variables, or credential resolution.</p> <p>Initialize ConfigError.</p> PARAMETER DESCRIPTION <code>message</code> <p>Human-readable error message.</p> <p> TYPE: <code>str</code> </p> <code>details</code> <p>Additional structured data.</p> <p> TYPE: <code>dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> Source code in <code>src/mixpanel_data/exceptions.py</code> <pre><code>def __init__(\n    self,\n    message: str,\n    details: dict[str, Any] | None = None,\n) -&gt; None:\n    \"\"\"Initialize ConfigError.\n\n    Args:\n        message: Human-readable error message.\n        details: Additional structured data.\n    \"\"\"\n    super().__init__(message, code=\"CONFIG_ERROR\", details=details)\n</code></pre>"},{"location":"api/exceptions/#mixpanel_data.AccountNotFoundError","title":"mixpanel_data.AccountNotFoundError","text":"<pre><code>AccountNotFoundError(account_name: str, available_accounts: list[str] | None = None)\n</code></pre> <p>               Bases: <code>ConfigError</code></p> <p>Named account does not exist in configuration.</p> <p>Raised when attempting to access an account that hasn't been configured. The available_accounts property lists valid account names to help users.</p> <p>Initialize AccountNotFoundError.</p> PARAMETER DESCRIPTION <code>account_name</code> <p>The requested account name that wasn't found.</p> <p> TYPE: <code>str</code> </p> <code>available_accounts</code> <p>List of valid account names for suggestions.</p> <p> TYPE: <code>list[str] | None</code> DEFAULT: <code>None</code> </p> Source code in <code>src/mixpanel_data/exceptions.py</code> <pre><code>def __init__(\n    self,\n    account_name: str,\n    available_accounts: list[str] | None = None,\n) -&gt; None:\n    \"\"\"Initialize AccountNotFoundError.\n\n    Args:\n        account_name: The requested account name that wasn't found.\n        available_accounts: List of valid account names for suggestions.\n    \"\"\"\n    available = available_accounts or []\n    if available:\n        available_str = \", \".join(f\"'{a}'\" for a in available)\n        message = (\n            f\"Account '{account_name}' not found. \"\n            f\"Available accounts: {available_str}\"\n        )\n    else:\n        message = f\"Account '{account_name}' not found. No accounts configured.\"\n\n    details = {\n        \"account_name\": account_name,\n        \"available_accounts\": available,\n    }\n    super().__init__(message, details=details)\n    self._code = \"ACCOUNT_NOT_FOUND\"\n</code></pre>"},{"location":"api/exceptions/#mixpanel_data.AccountNotFoundError.account_name","title":"account_name  <code>property</code>","text":"<pre><code>account_name: str\n</code></pre> <p>The requested account name that wasn't found.</p>"},{"location":"api/exceptions/#mixpanel_data.AccountNotFoundError.available_accounts","title":"available_accounts  <code>property</code>","text":"<pre><code>available_accounts: list[str]\n</code></pre> <p>List of valid account names.</p>"},{"location":"api/exceptions/#mixpanel_data.AccountExistsError","title":"mixpanel_data.AccountExistsError","text":"<pre><code>AccountExistsError(account_name: str)\n</code></pre> <p>               Bases: <code>ConfigError</code></p> <p>Account name already exists in configuration.</p> <p>Raised when attempting to add an account with a name that's already in use.</p> <p>Initialize AccountExistsError.</p> PARAMETER DESCRIPTION <code>account_name</code> <p>The conflicting account name.</p> <p> TYPE: <code>str</code> </p> Source code in <code>src/mixpanel_data/exceptions.py</code> <pre><code>def __init__(self, account_name: str) -&gt; None:\n    \"\"\"Initialize AccountExistsError.\n\n    Args:\n        account_name: The conflicting account name.\n    \"\"\"\n    message = f\"Account '{account_name}' already exists.\"\n    details = {\"account_name\": account_name}\n    super().__init__(message, details=details)\n    self._code = \"ACCOUNT_EXISTS\"\n</code></pre>"},{"location":"api/exceptions/#mixpanel_data.AccountExistsError.account_name","title":"account_name  <code>property</code>","text":"<pre><code>account_name: str\n</code></pre> <p>The conflicting account name.</p>"},{"location":"api/exceptions/#storage-exceptions","title":"Storage Exceptions","text":""},{"location":"api/exceptions/#mixpanel_data.TableExistsError","title":"mixpanel_data.TableExistsError","text":"<pre><code>TableExistsError(table_name: str)\n</code></pre> <p>               Bases: <code>MixpanelDataError</code></p> <p>Table already exists in local database.</p> <p>Raised when attempting to create a table that already exists. Use drop() first to remove the existing table.</p> <p>Initialize TableExistsError.</p> PARAMETER DESCRIPTION <code>table_name</code> <p>Name of the existing table.</p> <p> TYPE: <code>str</code> </p> Source code in <code>src/mixpanel_data/exceptions.py</code> <pre><code>def __init__(self, table_name: str) -&gt; None:\n    \"\"\"Initialize TableExistsError.\n\n    Args:\n        table_name: Name of the existing table.\n    \"\"\"\n    message = f\"Table '{table_name}' already exists.\"\n    details = {\n        \"table_name\": table_name,\n        \"suggestion\": \"Use drop() first to remove the existing table.\",\n    }\n    super().__init__(message, code=\"TABLE_EXISTS\", details=details)\n</code></pre>"},{"location":"api/exceptions/#mixpanel_data.TableExistsError.table_name","title":"table_name  <code>property</code>","text":"<pre><code>table_name: str\n</code></pre> <p>Name of the existing table.</p>"},{"location":"api/exceptions/#mixpanel_data.TableNotFoundError","title":"mixpanel_data.TableNotFoundError","text":"<pre><code>TableNotFoundError(table_name: str)\n</code></pre> <p>               Bases: <code>MixpanelDataError</code></p> <p>Table does not exist in local database.</p> <p>Raised when attempting to access a table that hasn't been created.</p> <p>Initialize TableNotFoundError.</p> PARAMETER DESCRIPTION <code>table_name</code> <p>Name of the missing table.</p> <p> TYPE: <code>str</code> </p> Source code in <code>src/mixpanel_data/exceptions.py</code> <pre><code>def __init__(self, table_name: str) -&gt; None:\n    \"\"\"Initialize TableNotFoundError.\n\n    Args:\n        table_name: Name of the missing table.\n    \"\"\"\n    message = f\"Table '{table_name}' not found.\"\n    details = {\"table_name\": table_name}\n    super().__init__(message, code=\"TABLE_NOT_FOUND\", details=details)\n</code></pre>"},{"location":"api/exceptions/#mixpanel_data.TableNotFoundError.table_name","title":"table_name  <code>property</code>","text":"<pre><code>table_name: str\n</code></pre> <p>Name of the missing table.</p>"},{"location":"api/types/","title":"Result Types","text":"<p>All result types are immutable frozen dataclasses with:</p> <ul> <li>Lazy DataFrame conversion via the <code>.df</code> property</li> <li>JSON serialization via the <code>.to_dict()</code> method</li> <li>Full type hints for IDE/mypy support</li> </ul>"},{"location":"api/types/#fetch-results","title":"Fetch Results","text":""},{"location":"api/types/#mixpanel_data.FetchResult","title":"mixpanel_data.FetchResult  <code>dataclass</code>","text":"<pre><code>FetchResult(table: str, rows: int, type: Literal['events', 'profiles'], duration_seconds: float, date_range: tuple[str, str] | None, fetched_at: datetime, _data: list[dict[str, Any]] = list(), _df_cache: DataFrame | None = None)\n</code></pre> <p>Result of a data fetch operation.</p> <p>Represents the outcome of fetching events or profiles from Mixpanel and storing them in the local database.</p>"},{"location":"api/types/#mixpanel_data.FetchResult.table","title":"table  <code>instance-attribute</code>","text":"<pre><code>table: str\n</code></pre> <p>Name of the created table.</p>"},{"location":"api/types/#mixpanel_data.FetchResult.rows","title":"rows  <code>instance-attribute</code>","text":"<pre><code>rows: int\n</code></pre> <p>Number of rows fetched.</p>"},{"location":"api/types/#mixpanel_data.FetchResult.type","title":"type  <code>instance-attribute</code>","text":"<pre><code>type: Literal['events', 'profiles']\n</code></pre> <p>Type of data fetched.</p>"},{"location":"api/types/#mixpanel_data.FetchResult.duration_seconds","title":"duration_seconds  <code>instance-attribute</code>","text":"<pre><code>duration_seconds: float\n</code></pre> <p>Time taken to complete the fetch.</p>"},{"location":"api/types/#mixpanel_data.FetchResult.date_range","title":"date_range  <code>instance-attribute</code>","text":"<pre><code>date_range: tuple[str, str] | None\n</code></pre> <p>Date range for events (None for profiles).</p>"},{"location":"api/types/#mixpanel_data.FetchResult.fetched_at","title":"fetched_at  <code>instance-attribute</code>","text":"<pre><code>fetched_at: datetime\n</code></pre> <p>Timestamp when fetch completed.</p>"},{"location":"api/types/#mixpanel_data.FetchResult.df","title":"df  <code>property</code>","text":"<pre><code>df: DataFrame\n</code></pre> <p>Convert result data to pandas DataFrame.</p> <p>Conversion is lazy - computed on first access and cached.</p> RETURNS DESCRIPTION <code>DataFrame</code> <p>DataFrame with fetched data.</p>"},{"location":"api/types/#mixpanel_data.FetchResult.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize result for JSON output.</p> RETURNS DESCRIPTION <code>dict[str, Any]</code> <p>Dictionary representation (excludes raw data).</p> <code>dict[str, Any]</code> <p>datetime values are converted to ISO format strings.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize result for JSON output.\n\n    Returns:\n        Dictionary representation (excludes raw data).\n        datetime values are converted to ISO format strings.\n    \"\"\"\n    return {\n        \"table\": self.table,\n        \"rows\": self.rows,\n        \"type\": self.type,\n        \"duration_seconds\": self.duration_seconds,\n        \"date_range\": self.date_range,\n        \"fetched_at\": self.fetched_at.isoformat(),\n    }\n</code></pre>"},{"location":"api/types/#query-results","title":"Query Results","text":""},{"location":"api/types/#mixpanel_data.SegmentationResult","title":"mixpanel_data.SegmentationResult  <code>dataclass</code>","text":"<pre><code>SegmentationResult(event: str, from_date: str, to_date: str, unit: Literal['day', 'week', 'month'], segment_property: str | None, total: int, series: dict[str, dict[str, int]] = dict(), _df_cache: DataFrame | None = None)\n</code></pre> <p>Result of a segmentation query.</p> <p>Contains time-series data for an event, optionally segmented by a property.</p>"},{"location":"api/types/#mixpanel_data.SegmentationResult.event","title":"event  <code>instance-attribute</code>","text":"<pre><code>event: str\n</code></pre> <p>Queried event name.</p>"},{"location":"api/types/#mixpanel_data.SegmentationResult.from_date","title":"from_date  <code>instance-attribute</code>","text":"<pre><code>from_date: str\n</code></pre> <p>Query start date (YYYY-MM-DD).</p>"},{"location":"api/types/#mixpanel_data.SegmentationResult.to_date","title":"to_date  <code>instance-attribute</code>","text":"<pre><code>to_date: str\n</code></pre> <p>Query end date (YYYY-MM-DD).</p>"},{"location":"api/types/#mixpanel_data.SegmentationResult.unit","title":"unit  <code>instance-attribute</code>","text":"<pre><code>unit: Literal['day', 'week', 'month']\n</code></pre> <p>Time unit for aggregation.</p>"},{"location":"api/types/#mixpanel_data.SegmentationResult.segment_property","title":"segment_property  <code>instance-attribute</code>","text":"<pre><code>segment_property: str | None\n</code></pre> <p>Property used for segmentation (None if total only).</p>"},{"location":"api/types/#mixpanel_data.SegmentationResult.total","title":"total  <code>instance-attribute</code>","text":"<pre><code>total: int\n</code></pre> <p>Total count across all segments and time periods.</p>"},{"location":"api/types/#mixpanel_data.SegmentationResult.series","title":"series  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>series: dict[str, dict[str, int]] = field(default_factory=dict)\n</code></pre> <p>Time series data by segment.</p> <p>Structure: {segment_name: {date_string: count}} Example: {\"US\": {\"2024-01-01\": 150, \"2024-01-02\": 200}, \"EU\": {...}} For unsegmented queries, segment_name is \"total\".</p>"},{"location":"api/types/#mixpanel_data.SegmentationResult.df","title":"df  <code>property</code>","text":"<pre><code>df: DataFrame\n</code></pre> <p>Convert to DataFrame with columns: date, segment, count.</p> <p>For unsegmented queries, segment column is 'total'.</p>"},{"location":"api/types/#mixpanel_data.SegmentationResult.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"event\": self.event,\n        \"from_date\": self.from_date,\n        \"to_date\": self.to_date,\n        \"unit\": self.unit,\n        \"segment_property\": self.segment_property,\n        \"total\": self.total,\n        \"series\": self.series,\n    }\n</code></pre>"},{"location":"api/types/#mixpanel_data.FunnelResult","title":"mixpanel_data.FunnelResult  <code>dataclass</code>","text":"<pre><code>FunnelResult(funnel_id: int, funnel_name: str, from_date: str, to_date: str, conversion_rate: float, steps: list[FunnelStep] = list(), _df_cache: DataFrame | None = None)\n</code></pre> <p>Result of a funnel query.</p> <p>Contains step-by-step conversion data for a funnel.</p>"},{"location":"api/types/#mixpanel_data.FunnelResult.funnel_id","title":"funnel_id  <code>instance-attribute</code>","text":"<pre><code>funnel_id: int\n</code></pre> <p>Funnel identifier.</p>"},{"location":"api/types/#mixpanel_data.FunnelResult.funnel_name","title":"funnel_name  <code>instance-attribute</code>","text":"<pre><code>funnel_name: str\n</code></pre> <p>Funnel display name.</p>"},{"location":"api/types/#mixpanel_data.FunnelResult.from_date","title":"from_date  <code>instance-attribute</code>","text":"<pre><code>from_date: str\n</code></pre> <p>Query start date.</p>"},{"location":"api/types/#mixpanel_data.FunnelResult.to_date","title":"to_date  <code>instance-attribute</code>","text":"<pre><code>to_date: str\n</code></pre> <p>Query end date.</p>"},{"location":"api/types/#mixpanel_data.FunnelResult.conversion_rate","title":"conversion_rate  <code>instance-attribute</code>","text":"<pre><code>conversion_rate: float\n</code></pre> <p>Overall conversion rate (0.0 to 1.0).</p>"},{"location":"api/types/#mixpanel_data.FunnelResult.steps","title":"steps  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>steps: list[FunnelStep] = field(default_factory=list)\n</code></pre> <p>Step-by-step breakdown.</p>"},{"location":"api/types/#mixpanel_data.FunnelResult.df","title":"df  <code>property</code>","text":"<pre><code>df: DataFrame\n</code></pre> <p>Convert to DataFrame with columns: step, event, count, conversion_rate.</p>"},{"location":"api/types/#mixpanel_data.FunnelResult.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"funnel_id\": self.funnel_id,\n        \"funnel_name\": self.funnel_name,\n        \"from_date\": self.from_date,\n        \"to_date\": self.to_date,\n        \"conversion_rate\": self.conversion_rate,\n        \"steps\": [step.to_dict() for step in self.steps],\n    }\n</code></pre>"},{"location":"api/types/#mixpanel_data.FunnelStep","title":"mixpanel_data.FunnelStep  <code>dataclass</code>","text":"<pre><code>FunnelStep(event: str, count: int, conversion_rate: float)\n</code></pre> <p>Single step in a funnel.</p>"},{"location":"api/types/#mixpanel_data.FunnelStep.event","title":"event  <code>instance-attribute</code>","text":"<pre><code>event: str\n</code></pre> <p>Event name for this step.</p>"},{"location":"api/types/#mixpanel_data.FunnelStep.count","title":"count  <code>instance-attribute</code>","text":"<pre><code>count: int\n</code></pre> <p>Number of users at this step.</p>"},{"location":"api/types/#mixpanel_data.FunnelStep.conversion_rate","title":"conversion_rate  <code>instance-attribute</code>","text":"<pre><code>conversion_rate: float\n</code></pre> <p>Conversion rate from previous step (0.0 to 1.0).</p>"},{"location":"api/types/#mixpanel_data.FunnelStep.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"event\": self.event,\n        \"count\": self.count,\n        \"conversion_rate\": self.conversion_rate,\n    }\n</code></pre>"},{"location":"api/types/#mixpanel_data.RetentionResult","title":"mixpanel_data.RetentionResult  <code>dataclass</code>","text":"<pre><code>RetentionResult(born_event: str, return_event: str, from_date: str, to_date: str, unit: Literal['day', 'week', 'month'], cohorts: list[CohortInfo] = list(), _df_cache: DataFrame | None = None)\n</code></pre> <p>Result of a retention query.</p> <p>Contains cohort-based retention data.</p>"},{"location":"api/types/#mixpanel_data.RetentionResult.born_event","title":"born_event  <code>instance-attribute</code>","text":"<pre><code>born_event: str\n</code></pre> <p>Event that defines cohort membership.</p>"},{"location":"api/types/#mixpanel_data.RetentionResult.return_event","title":"return_event  <code>instance-attribute</code>","text":"<pre><code>return_event: str\n</code></pre> <p>Event that defines return.</p>"},{"location":"api/types/#mixpanel_data.RetentionResult.from_date","title":"from_date  <code>instance-attribute</code>","text":"<pre><code>from_date: str\n</code></pre> <p>Query start date.</p>"},{"location":"api/types/#mixpanel_data.RetentionResult.to_date","title":"to_date  <code>instance-attribute</code>","text":"<pre><code>to_date: str\n</code></pre> <p>Query end date.</p>"},{"location":"api/types/#mixpanel_data.RetentionResult.unit","title":"unit  <code>instance-attribute</code>","text":"<pre><code>unit: Literal['day', 'week', 'month']\n</code></pre> <p>Time unit for retention periods.</p>"},{"location":"api/types/#mixpanel_data.RetentionResult.cohorts","title":"cohorts  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>cohorts: list[CohortInfo] = field(default_factory=list)\n</code></pre> <p>Cohort retention data.</p>"},{"location":"api/types/#mixpanel_data.RetentionResult.df","title":"df  <code>property</code>","text":"<pre><code>df: DataFrame\n</code></pre> <p>Convert to DataFrame with columns: cohort_date, cohort_size, period_N.</p>"},{"location":"api/types/#mixpanel_data.RetentionResult.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"born_event\": self.born_event,\n        \"return_event\": self.return_event,\n        \"from_date\": self.from_date,\n        \"to_date\": self.to_date,\n        \"unit\": self.unit,\n        \"cohorts\": [cohort.to_dict() for cohort in self.cohorts],\n    }\n</code></pre>"},{"location":"api/types/#mixpanel_data.CohortInfo","title":"mixpanel_data.CohortInfo  <code>dataclass</code>","text":"<pre><code>CohortInfo(date: str, size: int, retention: list[float] = list())\n</code></pre> <p>Retention data for a single cohort.</p>"},{"location":"api/types/#mixpanel_data.CohortInfo.date","title":"date  <code>instance-attribute</code>","text":"<pre><code>date: str\n</code></pre> <p>Cohort date (when users were 'born').</p>"},{"location":"api/types/#mixpanel_data.CohortInfo.size","title":"size  <code>instance-attribute</code>","text":"<pre><code>size: int\n</code></pre> <p>Number of users in cohort.</p>"},{"location":"api/types/#mixpanel_data.CohortInfo.retention","title":"retention  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>retention: list[float] = field(default_factory=list)\n</code></pre> <p>Retention percentages by period (0.0 to 1.0).</p>"},{"location":"api/types/#mixpanel_data.CohortInfo.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"date\": self.date,\n        \"size\": self.size,\n        \"retention\": self.retention,\n    }\n</code></pre>"},{"location":"api/types/#mixpanel_data.JQLResult","title":"mixpanel_data.JQLResult  <code>dataclass</code>","text":"<pre><code>JQLResult(_raw: list[Any] = list(), _df_cache: DataFrame | None = None)\n</code></pre> <p>Result of a JQL query.</p> <p>JQL (JavaScript Query Language) allows custom queries against Mixpanel data.</p>"},{"location":"api/types/#mixpanel_data.JQLResult.raw","title":"raw  <code>property</code>","text":"<pre><code>raw: list[Any]\n</code></pre> <p>Raw result data from JQL execution.</p>"},{"location":"api/types/#mixpanel_data.JQLResult.df","title":"df  <code>property</code>","text":"<pre><code>df: DataFrame\n</code></pre> <p>Convert result to DataFrame.</p> <p>The structure depends on the JQL query results.</p>"},{"location":"api/types/#mixpanel_data.JQLResult.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"raw\": self._raw,\n        \"row_count\": len(self._raw),\n    }\n</code></pre>"},{"location":"api/types/#discovery-types","title":"Discovery Types","text":""},{"location":"api/types/#mixpanel_data.FunnelInfo","title":"mixpanel_data.FunnelInfo  <code>dataclass</code>","text":"<pre><code>FunnelInfo(funnel_id: int, name: str)\n</code></pre> <p>A saved funnel definition.</p> <p>Represents a funnel saved in Mixpanel that can be queried using the funnel() method.</p>"},{"location":"api/types/#mixpanel_data.FunnelInfo.funnel_id","title":"funnel_id  <code>instance-attribute</code>","text":"<pre><code>funnel_id: int\n</code></pre> <p>Unique identifier for funnel queries.</p>"},{"location":"api/types/#mixpanel_data.FunnelInfo.name","title":"name  <code>instance-attribute</code>","text":"<pre><code>name: str\n</code></pre> <p>Human-readable funnel name.</p>"},{"location":"api/types/#mixpanel_data.FunnelInfo.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"funnel_id\": self.funnel_id,\n        \"name\": self.name,\n    }\n</code></pre>"},{"location":"api/types/#mixpanel_data.SavedCohort","title":"mixpanel_data.SavedCohort  <code>dataclass</code>","text":"<pre><code>SavedCohort(id: int, name: str, count: int, description: str, created: str, is_visible: bool)\n</code></pre> <p>A saved cohort definition.</p> <p>Represents a user cohort saved in Mixpanel for profile filtering.</p>"},{"location":"api/types/#mixpanel_data.SavedCohort.id","title":"id  <code>instance-attribute</code>","text":"<pre><code>id: int\n</code></pre> <p>Unique identifier for profile filtering.</p>"},{"location":"api/types/#mixpanel_data.SavedCohort.name","title":"name  <code>instance-attribute</code>","text":"<pre><code>name: str\n</code></pre> <p>Human-readable cohort name.</p>"},{"location":"api/types/#mixpanel_data.SavedCohort.count","title":"count  <code>instance-attribute</code>","text":"<pre><code>count: int\n</code></pre> <p>Current number of users in cohort.</p>"},{"location":"api/types/#mixpanel_data.SavedCohort.description","title":"description  <code>instance-attribute</code>","text":"<pre><code>description: str\n</code></pre> <p>Optional description (may be empty string).</p>"},{"location":"api/types/#mixpanel_data.SavedCohort.created","title":"created  <code>instance-attribute</code>","text":"<pre><code>created: str\n</code></pre> <p>Creation timestamp (YYYY-MM-DD HH:mm:ss).</p>"},{"location":"api/types/#mixpanel_data.SavedCohort.is_visible","title":"is_visible  <code>instance-attribute</code>","text":"<pre><code>is_visible: bool\n</code></pre> <p>Whether cohort is visible in Mixpanel UI.</p>"},{"location":"api/types/#mixpanel_data.SavedCohort.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"id\": self.id,\n        \"name\": self.name,\n        \"count\": self.count,\n        \"description\": self.description,\n        \"created\": self.created,\n        \"is_visible\": self.is_visible,\n    }\n</code></pre>"},{"location":"api/types/#mixpanel_data.TopEvent","title":"mixpanel_data.TopEvent  <code>dataclass</code>","text":"<pre><code>TopEvent(event: str, count: int, percent_change: float)\n</code></pre> <p>Today's event activity data.</p> <p>Represents an event's current activity including count and trend.</p>"},{"location":"api/types/#mixpanel_data.TopEvent.event","title":"event  <code>instance-attribute</code>","text":"<pre><code>event: str\n</code></pre> <p>Event name.</p>"},{"location":"api/types/#mixpanel_data.TopEvent.count","title":"count  <code>instance-attribute</code>","text":"<pre><code>count: int\n</code></pre> <p>Today's event count.</p>"},{"location":"api/types/#mixpanel_data.TopEvent.percent_change","title":"percent_change  <code>instance-attribute</code>","text":"<pre><code>percent_change: float\n</code></pre> <p>Change vs yesterday (-1.0 to +infinity).</p>"},{"location":"api/types/#mixpanel_data.TopEvent.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"event\": self.event,\n        \"count\": self.count,\n        \"percent_change\": self.percent_change,\n    }\n</code></pre>"},{"location":"api/types/#event-analytics-results","title":"Event Analytics Results","text":""},{"location":"api/types/#mixpanel_data.EventCountsResult","title":"mixpanel_data.EventCountsResult  <code>dataclass</code>","text":"<pre><code>EventCountsResult(events: list[str], from_date: str, to_date: str, unit: Literal['day', 'week', 'month'], type: Literal['general', 'unique', 'average'], series: dict[str, dict[str, int]], _df_cache: DataFrame | None = None)\n</code></pre> <p>Time-series event count data.</p> <p>Contains aggregate counts for multiple events over time with lazy DataFrame conversion support.</p>"},{"location":"api/types/#mixpanel_data.EventCountsResult.events","title":"events  <code>instance-attribute</code>","text":"<pre><code>events: list[str]\n</code></pre> <p>Queried event names.</p>"},{"location":"api/types/#mixpanel_data.EventCountsResult.from_date","title":"from_date  <code>instance-attribute</code>","text":"<pre><code>from_date: str\n</code></pre> <p>Query start date (YYYY-MM-DD).</p>"},{"location":"api/types/#mixpanel_data.EventCountsResult.to_date","title":"to_date  <code>instance-attribute</code>","text":"<pre><code>to_date: str\n</code></pre> <p>Query end date (YYYY-MM-DD).</p>"},{"location":"api/types/#mixpanel_data.EventCountsResult.unit","title":"unit  <code>instance-attribute</code>","text":"<pre><code>unit: Literal['day', 'week', 'month']\n</code></pre> <p>Time unit for aggregation.</p>"},{"location":"api/types/#mixpanel_data.EventCountsResult.type","title":"type  <code>instance-attribute</code>","text":"<pre><code>type: Literal['general', 'unique', 'average']\n</code></pre> <p>Counting method used.</p>"},{"location":"api/types/#mixpanel_data.EventCountsResult.series","title":"series  <code>instance-attribute</code>","text":"<pre><code>series: dict[str, dict[str, int]]\n</code></pre> <p>Time series data: {event_name: {date: count}}.</p>"},{"location":"api/types/#mixpanel_data.EventCountsResult.df","title":"df  <code>property</code>","text":"<pre><code>df: DataFrame\n</code></pre> <p>Convert to DataFrame with columns: date, event, count.</p> <p>Conversion is lazy - computed on first access and cached.</p>"},{"location":"api/types/#mixpanel_data.EventCountsResult.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"events\": self.events,\n        \"from_date\": self.from_date,\n        \"to_date\": self.to_date,\n        \"unit\": self.unit,\n        \"type\": self.type,\n        \"series\": self.series,\n    }\n</code></pre>"},{"location":"api/types/#mixpanel_data.PropertyCountsResult","title":"mixpanel_data.PropertyCountsResult  <code>dataclass</code>","text":"<pre><code>PropertyCountsResult(event: str, property_name: str, from_date: str, to_date: str, unit: Literal['day', 'week', 'month'], type: Literal['general', 'unique', 'average'], series: dict[str, dict[str, int]], _df_cache: DataFrame | None = None)\n</code></pre> <p>Time-series property value distribution data.</p> <p>Contains aggregate counts by property values over time with lazy DataFrame conversion support.</p>"},{"location":"api/types/#mixpanel_data.PropertyCountsResult.event","title":"event  <code>instance-attribute</code>","text":"<pre><code>event: str\n</code></pre> <p>Queried event name.</p>"},{"location":"api/types/#mixpanel_data.PropertyCountsResult.property_name","title":"property_name  <code>instance-attribute</code>","text":"<pre><code>property_name: str\n</code></pre> <p>Property used for segmentation.</p>"},{"location":"api/types/#mixpanel_data.PropertyCountsResult.from_date","title":"from_date  <code>instance-attribute</code>","text":"<pre><code>from_date: str\n</code></pre> <p>Query start date (YYYY-MM-DD).</p>"},{"location":"api/types/#mixpanel_data.PropertyCountsResult.to_date","title":"to_date  <code>instance-attribute</code>","text":"<pre><code>to_date: str\n</code></pre> <p>Query end date (YYYY-MM-DD).</p>"},{"location":"api/types/#mixpanel_data.PropertyCountsResult.unit","title":"unit  <code>instance-attribute</code>","text":"<pre><code>unit: Literal['day', 'week', 'month']\n</code></pre> <p>Time unit for aggregation.</p>"},{"location":"api/types/#mixpanel_data.PropertyCountsResult.type","title":"type  <code>instance-attribute</code>","text":"<pre><code>type: Literal['general', 'unique', 'average']\n</code></pre> <p>Counting method used.</p>"},{"location":"api/types/#mixpanel_data.PropertyCountsResult.series","title":"series  <code>instance-attribute</code>","text":"<pre><code>series: dict[str, dict[str, int]]\n</code></pre> <p>Time series data by property value.</p> <p>Structure: {property_value: {date: count}} Example: {\"US\": {\"2024-01-01\": 150, \"2024-01-02\": 200}, \"EU\": {...}}</p>"},{"location":"api/types/#mixpanel_data.PropertyCountsResult.df","title":"df  <code>property</code>","text":"<pre><code>df: DataFrame\n</code></pre> <p>Convert to DataFrame with columns: date, value, count.</p> <p>Conversion is lazy - computed on first access and cached.</p>"},{"location":"api/types/#mixpanel_data.PropertyCountsResult.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"event\": self.event,\n        \"property_name\": self.property_name,\n        \"from_date\": self.from_date,\n        \"to_date\": self.to_date,\n        \"unit\": self.unit,\n        \"type\": self.type,\n        \"series\": self.series,\n    }\n</code></pre>"},{"location":"api/types/#advanced-query-results","title":"Advanced Query Results","text":""},{"location":"api/types/#mixpanel_data.UserEvent","title":"mixpanel_data.UserEvent  <code>dataclass</code>","text":"<pre><code>UserEvent(event: str, time: datetime, properties: dict[str, Any] = dict())\n</code></pre> <p>Single event in a user's activity feed.</p> <p>Represents one event from a user's event history with timestamp and all associated properties.</p>"},{"location":"api/types/#mixpanel_data.UserEvent.event","title":"event  <code>instance-attribute</code>","text":"<pre><code>event: str\n</code></pre> <p>Event name.</p>"},{"location":"api/types/#mixpanel_data.UserEvent.time","title":"time  <code>instance-attribute</code>","text":"<pre><code>time: datetime\n</code></pre> <p>Event timestamp (UTC).</p>"},{"location":"api/types/#mixpanel_data.UserEvent.properties","title":"properties  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>properties: dict[str, Any] = field(default_factory=dict)\n</code></pre> <p>All event properties including system properties.</p>"},{"location":"api/types/#mixpanel_data.UserEvent.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"event\": self.event,\n        \"time\": self.time.isoformat(),\n        \"properties\": self.properties,\n    }\n</code></pre>"},{"location":"api/types/#mixpanel_data.ActivityFeedResult","title":"mixpanel_data.ActivityFeedResult  <code>dataclass</code>","text":"<pre><code>ActivityFeedResult(distinct_ids: list[str], from_date: str | None, to_date: str | None, events: list[UserEvent] = list(), _df_cache: DataFrame | None = None)\n</code></pre> <p>Collection of user events from activity feed query.</p> <p>Contains chronological event history for one or more users with lazy DataFrame conversion support.</p>"},{"location":"api/types/#mixpanel_data.ActivityFeedResult.distinct_ids","title":"distinct_ids  <code>instance-attribute</code>","text":"<pre><code>distinct_ids: list[str]\n</code></pre> <p>Queried user identifiers.</p>"},{"location":"api/types/#mixpanel_data.ActivityFeedResult.from_date","title":"from_date  <code>instance-attribute</code>","text":"<pre><code>from_date: str | None\n</code></pre> <p>Start date filter (YYYY-MM-DD), None if not specified.</p>"},{"location":"api/types/#mixpanel_data.ActivityFeedResult.to_date","title":"to_date  <code>instance-attribute</code>","text":"<pre><code>to_date: str | None\n</code></pre> <p>End date filter (YYYY-MM-DD), None if not specified.</p>"},{"location":"api/types/#mixpanel_data.ActivityFeedResult.events","title":"events  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>events: list[UserEvent] = field(default_factory=list)\n</code></pre> <p>Event history (chronological order).</p>"},{"location":"api/types/#mixpanel_data.ActivityFeedResult.df","title":"df  <code>property</code>","text":"<pre><code>df: DataFrame\n</code></pre> <p>Convert to DataFrame with columns: event, time, distinct_id, + properties.</p> <p>Flattens event properties into individual columns. Conversion is lazy - computed on first access and cached.</p>"},{"location":"api/types/#mixpanel_data.ActivityFeedResult.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"distinct_ids\": self.distinct_ids,\n        \"from_date\": self.from_date,\n        \"to_date\": self.to_date,\n        \"event_count\": len(self.events),\n        \"events\": [e.to_dict() for e in self.events],\n    }\n</code></pre>"},{"location":"api/types/#mixpanel_data.InsightsResult","title":"mixpanel_data.InsightsResult  <code>dataclass</code>","text":"<pre><code>InsightsResult(bookmark_id: int, computed_at: str, from_date: str, to_date: str, headers: list[str] = list(), series: dict[str, dict[str, int]] = dict(), _df_cache: DataFrame | None = None)\n</code></pre> <p>Data from a saved Insights report.</p> <p>Contains time-series data from a pre-configured Insights report with lazy DataFrame conversion support.</p>"},{"location":"api/types/#mixpanel_data.InsightsResult.bookmark_id","title":"bookmark_id  <code>instance-attribute</code>","text":"<pre><code>bookmark_id: int\n</code></pre> <p>Saved report identifier.</p>"},{"location":"api/types/#mixpanel_data.InsightsResult.computed_at","title":"computed_at  <code>instance-attribute</code>","text":"<pre><code>computed_at: str\n</code></pre> <p>When report was computed (ISO format).</p>"},{"location":"api/types/#mixpanel_data.InsightsResult.from_date","title":"from_date  <code>instance-attribute</code>","text":"<pre><code>from_date: str\n</code></pre> <p>Report start date.</p>"},{"location":"api/types/#mixpanel_data.InsightsResult.to_date","title":"to_date  <code>instance-attribute</code>","text":"<pre><code>to_date: str\n</code></pre> <p>Report end date.</p>"},{"location":"api/types/#mixpanel_data.InsightsResult.headers","title":"headers  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>headers: list[str] = field(default_factory=list)\n</code></pre> <p>Report column headers.</p>"},{"location":"api/types/#mixpanel_data.InsightsResult.series","title":"series  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>series: dict[str, dict[str, int]] = field(default_factory=dict)\n</code></pre> <p>Time-series data: {event_name: {date: count}}.</p>"},{"location":"api/types/#mixpanel_data.InsightsResult.df","title":"df  <code>property</code>","text":"<pre><code>df: DataFrame\n</code></pre> <p>Convert to DataFrame with columns: date, event, count.</p> <p>Conversion is lazy - computed on first access and cached.</p>"},{"location":"api/types/#mixpanel_data.InsightsResult.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"bookmark_id\": self.bookmark_id,\n        \"computed_at\": self.computed_at,\n        \"from_date\": self.from_date,\n        \"to_date\": self.to_date,\n        \"headers\": self.headers,\n        \"series\": self.series,\n    }\n</code></pre>"},{"location":"api/types/#mixpanel_data.FrequencyResult","title":"mixpanel_data.FrequencyResult  <code>dataclass</code>","text":"<pre><code>FrequencyResult(event: str | None, from_date: str, to_date: str, unit: Literal['day', 'week', 'month'], addiction_unit: Literal['hour', 'day'], data: dict[str, list[int]] = dict(), _df_cache: DataFrame | None = None)\n</code></pre> <p>Event frequency distribution (addiction analysis).</p> <p>Contains frequency arrays showing how many users performed events in N time periods, with lazy DataFrame conversion support.</p>"},{"location":"api/types/#mixpanel_data.FrequencyResult.event","title":"event  <code>instance-attribute</code>","text":"<pre><code>event: str | None\n</code></pre> <p>Filtered event name (None = all events).</p>"},{"location":"api/types/#mixpanel_data.FrequencyResult.from_date","title":"from_date  <code>instance-attribute</code>","text":"<pre><code>from_date: str\n</code></pre> <p>Query start date (YYYY-MM-DD).</p>"},{"location":"api/types/#mixpanel_data.FrequencyResult.to_date","title":"to_date  <code>instance-attribute</code>","text":"<pre><code>to_date: str\n</code></pre> <p>Query end date (YYYY-MM-DD).</p>"},{"location":"api/types/#mixpanel_data.FrequencyResult.unit","title":"unit  <code>instance-attribute</code>","text":"<pre><code>unit: Literal['day', 'week', 'month']\n</code></pre> <p>Overall time period.</p>"},{"location":"api/types/#mixpanel_data.FrequencyResult.addiction_unit","title":"addiction_unit  <code>instance-attribute</code>","text":"<pre><code>addiction_unit: Literal['hour', 'day']\n</code></pre> <p>Measurement granularity.</p>"},{"location":"api/types/#mixpanel_data.FrequencyResult.data","title":"data  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>data: dict[str, list[int]] = field(default_factory=dict)\n</code></pre> <p>Frequency arrays by date.</p> <p>Structure: {date: [count_1, count_2, ...]} Example: {\"2024-01-01\": [100, 50, 25, 10]}</p> <p>Each array shows user counts by frequency: - Index 0: users active exactly 1 time - Index 1: users active exactly 2 times - Index N: users active exactly N+1 times</p>"},{"location":"api/types/#mixpanel_data.FrequencyResult.df","title":"df  <code>property</code>","text":"<pre><code>df: DataFrame\n</code></pre> <p>Convert to DataFrame with columns: date, period_1, period_2, ...</p> <p>Each period_N column shows users active in at least N time periods. Conversion is lazy - computed on first access and cached.</p>"},{"location":"api/types/#mixpanel_data.FrequencyResult.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"event\": self.event,\n        \"from_date\": self.from_date,\n        \"to_date\": self.to_date,\n        \"unit\": self.unit,\n        \"addiction_unit\": self.addiction_unit,\n        \"data\": self.data,\n    }\n</code></pre>"},{"location":"api/types/#mixpanel_data.NumericBucketResult","title":"mixpanel_data.NumericBucketResult  <code>dataclass</code>","text":"<pre><code>NumericBucketResult(event: str, from_date: str, to_date: str, property_expr: str, unit: Literal['hour', 'day'], series: dict[str, dict[str, int]] = dict(), _df_cache: DataFrame | None = None)\n</code></pre> <p>Events segmented into numeric property ranges.</p> <p>Contains time-series data bucketed by automatically determined numeric ranges, with lazy DataFrame conversion support.</p>"},{"location":"api/types/#mixpanel_data.NumericBucketResult.event","title":"event  <code>instance-attribute</code>","text":"<pre><code>event: str\n</code></pre> <p>Queried event name.</p>"},{"location":"api/types/#mixpanel_data.NumericBucketResult.from_date","title":"from_date  <code>instance-attribute</code>","text":"<pre><code>from_date: str\n</code></pre> <p>Query start date (YYYY-MM-DD).</p>"},{"location":"api/types/#mixpanel_data.NumericBucketResult.to_date","title":"to_date  <code>instance-attribute</code>","text":"<pre><code>to_date: str\n</code></pre> <p>Query end date (YYYY-MM-DD).</p>"},{"location":"api/types/#mixpanel_data.NumericBucketResult.property_expr","title":"property_expr  <code>instance-attribute</code>","text":"<pre><code>property_expr: str\n</code></pre> <p>The 'on' expression used for bucketing.</p>"},{"location":"api/types/#mixpanel_data.NumericBucketResult.unit","title":"unit  <code>instance-attribute</code>","text":"<pre><code>unit: Literal['hour', 'day']\n</code></pre> <p>Time aggregation unit.</p>"},{"location":"api/types/#mixpanel_data.NumericBucketResult.series","title":"series  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>series: dict[str, dict[str, int]] = field(default_factory=dict)\n</code></pre> <p>Bucket data: {range_string: {date: count}}.</p>"},{"location":"api/types/#mixpanel_data.NumericBucketResult.df","title":"df  <code>property</code>","text":"<pre><code>df: DataFrame\n</code></pre> <p>Convert to DataFrame with columns: date, bucket, count.</p> <p>Conversion is lazy - computed on first access and cached.</p>"},{"location":"api/types/#mixpanel_data.NumericBucketResult.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"event\": self.event,\n        \"from_date\": self.from_date,\n        \"to_date\": self.to_date,\n        \"property_expr\": self.property_expr,\n        \"unit\": self.unit,\n        \"series\": self.series,\n    }\n</code></pre>"},{"location":"api/types/#mixpanel_data.NumericSumResult","title":"mixpanel_data.NumericSumResult  <code>dataclass</code>","text":"<pre><code>NumericSumResult(event: str, from_date: str, to_date: str, property_expr: str, unit: Literal['hour', 'day'], results: dict[str, float] = dict(), computed_at: str | None = None, _df_cache: DataFrame | None = None)\n</code></pre> <p>Sum of numeric property values per time unit.</p> <p>Contains daily or hourly sum totals for a numeric property with lazy DataFrame conversion support.</p>"},{"location":"api/types/#mixpanel_data.NumericSumResult.event","title":"event  <code>instance-attribute</code>","text":"<pre><code>event: str\n</code></pre> <p>Queried event name.</p>"},{"location":"api/types/#mixpanel_data.NumericSumResult.from_date","title":"from_date  <code>instance-attribute</code>","text":"<pre><code>from_date: str\n</code></pre> <p>Query start date (YYYY-MM-DD).</p>"},{"location":"api/types/#mixpanel_data.NumericSumResult.to_date","title":"to_date  <code>instance-attribute</code>","text":"<pre><code>to_date: str\n</code></pre> <p>Query end date (YYYY-MM-DD).</p>"},{"location":"api/types/#mixpanel_data.NumericSumResult.property_expr","title":"property_expr  <code>instance-attribute</code>","text":"<pre><code>property_expr: str\n</code></pre> <p>The 'on' expression summed.</p>"},{"location":"api/types/#mixpanel_data.NumericSumResult.unit","title":"unit  <code>instance-attribute</code>","text":"<pre><code>unit: Literal['hour', 'day']\n</code></pre> <p>Time aggregation unit.</p>"},{"location":"api/types/#mixpanel_data.NumericSumResult.results","title":"results  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>results: dict[str, float] = field(default_factory=dict)\n</code></pre> <p>Sum values: {date: sum}.</p>"},{"location":"api/types/#mixpanel_data.NumericSumResult.computed_at","title":"computed_at  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>computed_at: str | None = None\n</code></pre> <p>Computation timestamp (if provided by API).</p>"},{"location":"api/types/#mixpanel_data.NumericSumResult.df","title":"df  <code>property</code>","text":"<pre><code>df: DataFrame\n</code></pre> <p>Convert to DataFrame with columns: date, sum.</p> <p>Conversion is lazy - computed on first access and cached.</p>"},{"location":"api/types/#mixpanel_data.NumericSumResult.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    result: dict[str, Any] = {\n        \"event\": self.event,\n        \"from_date\": self.from_date,\n        \"to_date\": self.to_date,\n        \"property_expr\": self.property_expr,\n        \"unit\": self.unit,\n        \"results\": self.results,\n    }\n    if self.computed_at is not None:\n        result[\"computed_at\"] = self.computed_at\n    return result\n</code></pre>"},{"location":"api/types/#mixpanel_data.NumericAverageResult","title":"mixpanel_data.NumericAverageResult  <code>dataclass</code>","text":"<pre><code>NumericAverageResult(event: str, from_date: str, to_date: str, property_expr: str, unit: Literal['hour', 'day'], results: dict[str, float] = dict(), _df_cache: DataFrame | None = None)\n</code></pre> <p>Average of numeric property values per time unit.</p> <p>Contains daily or hourly average values for a numeric property with lazy DataFrame conversion support.</p>"},{"location":"api/types/#mixpanel_data.NumericAverageResult.event","title":"event  <code>instance-attribute</code>","text":"<pre><code>event: str\n</code></pre> <p>Queried event name.</p>"},{"location":"api/types/#mixpanel_data.NumericAverageResult.from_date","title":"from_date  <code>instance-attribute</code>","text":"<pre><code>from_date: str\n</code></pre> <p>Query start date (YYYY-MM-DD).</p>"},{"location":"api/types/#mixpanel_data.NumericAverageResult.to_date","title":"to_date  <code>instance-attribute</code>","text":"<pre><code>to_date: str\n</code></pre> <p>Query end date (YYYY-MM-DD).</p>"},{"location":"api/types/#mixpanel_data.NumericAverageResult.property_expr","title":"property_expr  <code>instance-attribute</code>","text":"<pre><code>property_expr: str\n</code></pre> <p>The 'on' expression averaged.</p>"},{"location":"api/types/#mixpanel_data.NumericAverageResult.unit","title":"unit  <code>instance-attribute</code>","text":"<pre><code>unit: Literal['hour', 'day']\n</code></pre> <p>Time aggregation unit.</p>"},{"location":"api/types/#mixpanel_data.NumericAverageResult.results","title":"results  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>results: dict[str, float] = field(default_factory=dict)\n</code></pre> <p>Average values: {date: average}.</p>"},{"location":"api/types/#mixpanel_data.NumericAverageResult.df","title":"df  <code>property</code>","text":"<pre><code>df: DataFrame\n</code></pre> <p>Convert to DataFrame with columns: date, average.</p> <p>Conversion is lazy - computed on first access and cached.</p>"},{"location":"api/types/#mixpanel_data.NumericAverageResult.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"event\": self.event,\n        \"from_date\": self.from_date,\n        \"to_date\": self.to_date,\n        \"property_expr\": self.property_expr,\n        \"unit\": self.unit,\n        \"results\": self.results,\n    }\n</code></pre>"},{"location":"api/types/#storage-types","title":"Storage Types","text":""},{"location":"api/types/#mixpanel_data.TableMetadata","title":"mixpanel_data.TableMetadata  <code>dataclass</code>","text":"<pre><code>TableMetadata(type: Literal['events', 'profiles'], fetched_at: datetime, from_date: str | None = None, to_date: str | None = None, filter_events: list[str] | None = None, filter_where: str | None = None)\n</code></pre> <p>Metadata for a data fetch operation.</p> <p>This metadata is passed to table creation methods and stored in the database's internal _metadata table for tracking fetch operations.</p>"},{"location":"api/types/#mixpanel_data.TableMetadata.type","title":"type  <code>instance-attribute</code>","text":"<pre><code>type: Literal['events', 'profiles']\n</code></pre> <p>Type of data fetched.</p>"},{"location":"api/types/#mixpanel_data.TableMetadata.fetched_at","title":"fetched_at  <code>instance-attribute</code>","text":"<pre><code>fetched_at: datetime\n</code></pre> <p>When the fetch completed (UTC).</p>"},{"location":"api/types/#mixpanel_data.TableMetadata.from_date","title":"from_date  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>from_date: str | None = None\n</code></pre> <p>Start date for events (YYYY-MM-DD), None for profiles.</p>"},{"location":"api/types/#mixpanel_data.TableMetadata.to_date","title":"to_date  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>to_date: str | None = None\n</code></pre> <p>End date for events (YYYY-MM-DD), None for profiles.</p>"},{"location":"api/types/#mixpanel_data.TableMetadata.filter_events","title":"filter_events  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>filter_events: list[str] | None = None\n</code></pre> <p>Event names filtered (if applicable).</p>"},{"location":"api/types/#mixpanel_data.TableMetadata.filter_where","title":"filter_where  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>filter_where: str | None = None\n</code></pre> <p>WHERE clause filter (if applicable).</p>"},{"location":"api/types/#mixpanel_data.TableMetadata.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"type\": self.type,\n        \"fetched_at\": self.fetched_at.isoformat(),\n        \"from_date\": self.from_date,\n        \"to_date\": self.to_date,\n        \"filter_events\": self.filter_events,\n        \"filter_where\": self.filter_where,\n    }\n</code></pre>"},{"location":"api/types/#mixpanel_data.TableInfo","title":"mixpanel_data.TableInfo  <code>dataclass</code>","text":"<pre><code>TableInfo(name: str, type: Literal['events', 'profiles'], row_count: int, fetched_at: datetime)\n</code></pre> <p>Information about a table in the database.</p> <p>Returned by list_tables() to provide summary information about available tables without retrieving full schemas.</p>"},{"location":"api/types/#mixpanel_data.TableInfo.name","title":"name  <code>instance-attribute</code>","text":"<pre><code>name: str\n</code></pre> <p>Table name.</p>"},{"location":"api/types/#mixpanel_data.TableInfo.type","title":"type  <code>instance-attribute</code>","text":"<pre><code>type: Literal['events', 'profiles']\n</code></pre> <p>Table type.</p>"},{"location":"api/types/#mixpanel_data.TableInfo.row_count","title":"row_count  <code>instance-attribute</code>","text":"<pre><code>row_count: int\n</code></pre> <p>Number of rows.</p>"},{"location":"api/types/#mixpanel_data.TableInfo.fetched_at","title":"fetched_at  <code>instance-attribute</code>","text":"<pre><code>fetched_at: datetime\n</code></pre> <p>When data was fetched (UTC).</p>"},{"location":"api/types/#mixpanel_data.TableInfo.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"name\": self.name,\n        \"type\": self.type,\n        \"row_count\": self.row_count,\n        \"fetched_at\": self.fetched_at.isoformat(),\n    }\n</code></pre>"},{"location":"api/types/#mixpanel_data.ColumnInfo","title":"mixpanel_data.ColumnInfo  <code>dataclass</code>","text":"<pre><code>ColumnInfo(name: str, type: str, nullable: bool, primary_key: bool = False)\n</code></pre> <p>Information about a table column.</p> <p>Describes a single column's schema, including name, type, nullability constraints, and primary key status.</p>"},{"location":"api/types/#mixpanel_data.ColumnInfo.name","title":"name  <code>instance-attribute</code>","text":"<pre><code>name: str\n</code></pre> <p>Column name.</p>"},{"location":"api/types/#mixpanel_data.ColumnInfo.type","title":"type  <code>instance-attribute</code>","text":"<pre><code>type: str\n</code></pre> <p>DuckDB type (VARCHAR, TIMESTAMP, JSON, INTEGER, etc.).</p>"},{"location":"api/types/#mixpanel_data.ColumnInfo.nullable","title":"nullable  <code>instance-attribute</code>","text":"<pre><code>nullable: bool\n</code></pre> <p>Whether column allows NULL values.</p>"},{"location":"api/types/#mixpanel_data.ColumnInfo.primary_key","title":"primary_key  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>primary_key: bool = False\n</code></pre> <p>Whether column is a primary key.</p>"},{"location":"api/types/#mixpanel_data.ColumnInfo.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"name\": self.name,\n        \"type\": self.type,\n        \"nullable\": self.nullable,\n        \"primary_key\": self.primary_key,\n    }\n</code></pre>"},{"location":"api/types/#mixpanel_data.TableSchema","title":"mixpanel_data.TableSchema  <code>dataclass</code>","text":"<pre><code>TableSchema(table_name: str, columns: list[ColumnInfo])\n</code></pre> <p>Schema information for a table.</p> <p>Returned by get_schema() to describe the structure of a table, including all column definitions.</p>"},{"location":"api/types/#mixpanel_data.TableSchema.table_name","title":"table_name  <code>instance-attribute</code>","text":"<pre><code>table_name: str\n</code></pre> <p>Table name.</p>"},{"location":"api/types/#mixpanel_data.TableSchema.columns","title":"columns  <code>instance-attribute</code>","text":"<pre><code>columns: list[ColumnInfo]\n</code></pre> <p>Column definitions.</p>"},{"location":"api/types/#mixpanel_data.TableSchema.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"table_name\": self.table_name,\n        \"columns\": [col.to_dict() for col in self.columns],\n    }\n</code></pre>"},{"location":"api/types/#mixpanel_data.WorkspaceInfo","title":"mixpanel_data.WorkspaceInfo  <code>dataclass</code>","text":"<pre><code>WorkspaceInfo(path: Path | None, project_id: str, region: str, account: str | None, tables: list[str], size_mb: float, created_at: datetime | None)\n</code></pre> <p>Information about a Workspace instance.</p> <p>Returned by Workspace.info() to provide metadata about the workspace including database location, connection details, and table summary.</p>"},{"location":"api/types/#mixpanel_data.WorkspaceInfo.path","title":"path  <code>instance-attribute</code>","text":"<pre><code>path: Path | None\n</code></pre> <p>Database file path (None for ephemeral workspaces).</p>"},{"location":"api/types/#mixpanel_data.WorkspaceInfo.project_id","title":"project_id  <code>instance-attribute</code>","text":"<pre><code>project_id: str\n</code></pre> <p>Mixpanel project ID.</p>"},{"location":"api/types/#mixpanel_data.WorkspaceInfo.region","title":"region  <code>instance-attribute</code>","text":"<pre><code>region: str\n</code></pre> <p>Data residency region (us, eu, in).</p>"},{"location":"api/types/#mixpanel_data.WorkspaceInfo.account","title":"account  <code>instance-attribute</code>","text":"<pre><code>account: str | None\n</code></pre> <p>Named account used (None if credentials from environment).</p>"},{"location":"api/types/#mixpanel_data.WorkspaceInfo.tables","title":"tables  <code>instance-attribute</code>","text":"<pre><code>tables: list[str]\n</code></pre> <p>Names of tables in the database.</p>"},{"location":"api/types/#mixpanel_data.WorkspaceInfo.size_mb","title":"size_mb  <code>instance-attribute</code>","text":"<pre><code>size_mb: float\n</code></pre> <p>Database file size in megabytes (0.0 for ephemeral).</p>"},{"location":"api/types/#mixpanel_data.WorkspaceInfo.created_at","title":"created_at  <code>instance-attribute</code>","text":"<pre><code>created_at: datetime | None\n</code></pre> <p>When database was created (None if unknown).</p>"},{"location":"api/types/#mixpanel_data.WorkspaceInfo.to_dict","title":"to_dict","text":"<pre><code>to_dict() -&gt; dict[str, Any]\n</code></pre> <p>Serialize for JSON output.</p> Source code in <code>src/mixpanel_data/types.py</code> <pre><code>def to_dict(self) -&gt; dict[str, Any]:\n    \"\"\"Serialize for JSON output.\"\"\"\n    return {\n        \"path\": str(self.path) if self.path else None,\n        \"project_id\": self.project_id,\n        \"region\": self.region,\n        \"account\": self.account,\n        \"tables\": self.tables,\n        \"size_mb\": self.size_mb,\n        \"created_at\": self.created_at.isoformat() if self.created_at else None,\n    }\n</code></pre>"},{"location":"api/workspace/","title":"Workspace","text":"<p>The <code>Workspace</code> class is the unified entry point for all Mixpanel data operations.</p>"},{"location":"api/workspace/#overview","title":"Overview","text":"<p>Workspace orchestrates four internal services:</p> <ul> <li>DiscoveryService \u2014 Schema exploration (events, properties, funnels, cohorts)</li> <li>FetcherService \u2014 Data ingestion from Mixpanel to DuckDB</li> <li>LiveQueryService \u2014 Real-time analytics queries</li> <li>StorageEngine \u2014 Local SQL query execution</li> </ul>"},{"location":"api/workspace/#class-reference","title":"Class Reference","text":""},{"location":"api/workspace/#mixpanel_data.Workspace","title":"mixpanel_data.Workspace","text":"<pre><code>Workspace(account: str | None = None, project_id: str | None = None, region: str | None = None, path: str | Path | None = None, _config_manager: ConfigManager | None = None, _api_client: MixpanelAPIClient | None = None, _storage: StorageEngine | None = None)\n</code></pre> <p>Unified entry point for Mixpanel data operations.</p> <p>The Workspace class is a facade that orchestrates all services: - DiscoveryService for schema exploration - FetcherService for data ingestion - LiveQueryService for real-time analytics - StorageEngine for local SQL queries</p> <p>Examples:</p> <p>Basic usage with credentials from config::</p> <pre><code>ws = Workspace()\nws.fetch_events(from_date=\"2024-01-01\", to_date=\"2024-01-31\")\ndf = ws.sql(\"SELECT * FROM events LIMIT 10\")\n</code></pre> <p>Ephemeral workspace for temporary analysis::</p> <pre><code>with Workspace.ephemeral() as ws:\n    ws.fetch_events(from_date=\"2024-01-01\", to_date=\"2024-01-31\")\n    total = ws.sql_scalar(\"SELECT COUNT(*) FROM events\")\n# Database automatically deleted\n</code></pre> <p>Query-only access to existing database::</p> <pre><code>ws = Workspace.open(\"path/to/database.db\")\ndf = ws.sql(\"SELECT * FROM events\")\n</code></pre> <p>Create a new Workspace with credentials and optional database path.</p> <p>Credentials are resolved in priority order: 1. Environment variables (MP_USERNAME, MP_SECRET, MP_PROJECT_ID, MP_REGION) 2. Named account from config file (if account parameter specified) 3. Default account from config file</p> PARAMETER DESCRIPTION <code>account</code> <p>Named account from config file to use.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>project_id</code> <p>Override project ID from credentials.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>region</code> <p>Override region from credentials (us, eu, in).</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>path</code> <p>Path to database file. If None, uses default location.</p> <p> TYPE: <code>str | Path | None</code> DEFAULT: <code>None</code> </p> <code>_config_manager</code> <p>Injected ConfigManager for testing.</p> <p> TYPE: <code>ConfigManager | None</code> DEFAULT: <code>None</code> </p> <code>_api_client</code> <p>Injected MixpanelAPIClient for testing.</p> <p> TYPE: <code>MixpanelAPIClient | None</code> DEFAULT: <code>None</code> </p> <code>_storage</code> <p>Injected StorageEngine for testing.</p> <p> TYPE: <code>StorageEngine | None</code> DEFAULT: <code>None</code> </p> RAISES DESCRIPTION <code>ConfigError</code> <p>If no credentials can be resolved.</p> <code>AccountNotFoundError</code> <p>If named account doesn't exist.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def __init__(\n    self,\n    account: str | None = None,\n    project_id: str | None = None,\n    region: str | None = None,\n    path: str | Path | None = None,\n    # Dependency injection for testing\n    _config_manager: ConfigManager | None = None,\n    _api_client: MixpanelAPIClient | None = None,\n    _storage: StorageEngine | None = None,\n) -&gt; None:\n    \"\"\"Create a new Workspace with credentials and optional database path.\n\n    Credentials are resolved in priority order:\n    1. Environment variables (MP_USERNAME, MP_SECRET, MP_PROJECT_ID, MP_REGION)\n    2. Named account from config file (if account parameter specified)\n    3. Default account from config file\n\n    Args:\n        account: Named account from config file to use.\n        project_id: Override project ID from credentials.\n        region: Override region from credentials (us, eu, in).\n        path: Path to database file. If None, uses default location.\n        _config_manager: Injected ConfigManager for testing.\n        _api_client: Injected MixpanelAPIClient for testing.\n        _storage: Injected StorageEngine for testing.\n\n    Raises:\n        ConfigError: If no credentials can be resolved.\n        AccountNotFoundError: If named account doesn't exist.\n    \"\"\"\n    # Store injected or create default ConfigManager\n    self._config_manager = _config_manager or ConfigManager()\n\n    # Resolve credentials\n    self._credentials: Credentials | None = None\n    self._account_name: str | None = account\n\n    # Resolve credentials (may raise ConfigError or AccountNotFoundError)\n    self._credentials = self._config_manager.resolve_credentials(account)\n\n    # Apply overrides if provided\n    if project_id or region:\n        from typing import cast\n\n        from pydantic import SecretStr\n\n        from mixpanel_data._internal.config import RegionType\n\n        resolved_region = region or self._credentials.region\n        self._credentials = Credentials(\n            username=self._credentials.username,\n            secret=SecretStr(self._credentials.secret.get_secret_value()),\n            project_id=project_id or self._credentials.project_id,\n            region=cast(RegionType, resolved_region),\n        )\n\n    # Initialize storage\n    if _storage is not None:\n        self._storage = _storage\n    else:\n        # Determine database path\n        if path is not None:\n            db_path = Path(path) if isinstance(path, str) else path\n        else:\n            # Default path: ~/.mp/data/{project_id}.db\n            db_path = (\n                Path.home() / \".mp\" / \"data\" / f\"{self._credentials.project_id}.db\"\n            )\n        self._storage = StorageEngine(path=db_path)\n\n    # Lazy-initialized services (None until first use)\n    self._api_client: MixpanelAPIClient | None = _api_client\n    self._discovery: DiscoveryService | None = None\n    self._fetcher: FetcherService | None = None\n    self._live_query: LiveQueryService | None = None\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.connection","title":"connection  <code>property</code>","text":"<pre><code>connection: DuckDBPyConnection\n</code></pre> <p>Direct access to the DuckDB connection.</p> <p>Use this for operations not covered by the Workspace API.</p> RETURNS DESCRIPTION <code>DuckDBPyConnection</code> <p>The underlying DuckDB connection.</p>"},{"location":"api/workspace/#mixpanel_data.Workspace.api","title":"api  <code>property</code>","text":"<pre><code>api: MixpanelAPIClient\n</code></pre> <p>Direct access to the Mixpanel API client.</p> <p>Use this for API operations not covered by the Workspace API.</p> RETURNS DESCRIPTION <code>MixpanelAPIClient</code> <p>The underlying MixpanelAPIClient.</p> RAISES DESCRIPTION <code>ConfigError</code> <p>If API credentials not available.</p>"},{"location":"api/workspace/#mixpanel_data.Workspace.ephemeral","title":"ephemeral  <code>classmethod</code>","text":"<pre><code>ephemeral(account: str | None = None, project_id: str | None = None, region: str | None = None, _config_manager: ConfigManager | None = None, _api_client: MixpanelAPIClient | None = None) -&gt; Iterator[Workspace]\n</code></pre> <p>Create a temporary workspace that auto-deletes on exit.</p> PARAMETER DESCRIPTION <code>account</code> <p>Named account from config file to use.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>project_id</code> <p>Override project ID from credentials.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>region</code> <p>Override region from credentials.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>_config_manager</code> <p>Injected ConfigManager for testing.</p> <p> TYPE: <code>ConfigManager | None</code> DEFAULT: <code>None</code> </p> <code>_api_client</code> <p>Injected MixpanelAPIClient for testing.</p> <p> TYPE: <code>MixpanelAPIClient | None</code> DEFAULT: <code>None</code> </p> YIELDS DESCRIPTION <code>Workspace</code> <p>A workspace with temporary database.</p> <p> TYPE:: <code>Workspace</code> </p> <p>Example::</p> <pre><code>with Workspace.ephemeral() as ws:\n    ws.fetch_events(from_date=\"2024-01-01\", to_date=\"2024-01-31\")\n    print(ws.sql_scalar(\"SELECT COUNT(*) FROM events\"))\n# Database file automatically deleted\n</code></pre> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>@classmethod\n@contextmanager\ndef ephemeral(\n    cls,\n    account: str | None = None,\n    project_id: str | None = None,\n    region: str | None = None,\n    _config_manager: ConfigManager | None = None,\n    _api_client: MixpanelAPIClient | None = None,\n) -&gt; Iterator[Workspace]:\n    \"\"\"Create a temporary workspace that auto-deletes on exit.\n\n    Args:\n        account: Named account from config file to use.\n        project_id: Override project ID from credentials.\n        region: Override region from credentials.\n        _config_manager: Injected ConfigManager for testing.\n        _api_client: Injected MixpanelAPIClient for testing.\n\n    Yields:\n        Workspace: A workspace with temporary database.\n\n    Example::\n\n        with Workspace.ephemeral() as ws:\n            ws.fetch_events(from_date=\"2024-01-01\", to_date=\"2024-01-31\")\n            print(ws.sql_scalar(\"SELECT COUNT(*) FROM events\"))\n        # Database file automatically deleted\n    \"\"\"\n    storage = StorageEngine.ephemeral()\n    ws = cls(\n        account=account,\n        project_id=project_id,\n        region=region,\n        _config_manager=_config_manager,\n        _api_client=_api_client,\n        _storage=storage,\n    )\n    try:\n        yield ws\n    finally:\n        ws.close()\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.open","title":"open  <code>classmethod</code>","text":"<pre><code>open(path: str | Path) -&gt; Workspace\n</code></pre> <p>Open an existing database for query-only access.</p> <p>This method opens a database without requiring API credentials. Discovery, fetching, and live query methods will be unavailable.</p> PARAMETER DESCRIPTION <code>path</code> <p>Path to existing database file.</p> <p> TYPE: <code>str | Path</code> </p> RETURNS DESCRIPTION <code>Workspace</code> <p>A workspace with read-only access to stored data.</p> <p> TYPE: <code>Workspace</code> </p> RAISES DESCRIPTION <code>FileNotFoundError</code> <p>If database file doesn't exist.</p> <p>Example::</p> <pre><code>ws = Workspace.open(\"my_data.db\")\ndf = ws.sql(\"SELECT * FROM events\")\nws.close()\n</code></pre> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>@classmethod\ndef open(cls, path: str | Path) -&gt; Workspace:\n    \"\"\"Open an existing database for query-only access.\n\n    This method opens a database without requiring API credentials.\n    Discovery, fetching, and live query methods will be unavailable.\n\n    Args:\n        path: Path to existing database file.\n\n    Returns:\n        Workspace: A workspace with read-only access to stored data.\n\n    Raises:\n        FileNotFoundError: If database file doesn't exist.\n\n    Example::\n\n        ws = Workspace.open(\"my_data.db\")\n        df = ws.sql(\"SELECT * FROM events\")\n        ws.close()\n    \"\"\"\n    db_path = Path(path) if isinstance(path, str) else path\n    storage = StorageEngine.open_existing(db_path)\n\n    # Create instance without credential resolution\n    instance = object.__new__(cls)\n    instance._config_manager = ConfigManager()\n    instance._credentials = None\n    instance._account_name = None\n    instance._storage = storage\n    instance._api_client = None\n    instance._discovery = None\n    instance._fetcher = None\n    instance._live_query = None\n\n    return instance\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.close","title":"close","text":"<pre><code>close() -&gt; None\n</code></pre> <p>Close all resources (database connection, HTTP client).</p> <p>This method is idempotent and safe to call multiple times.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def close(self) -&gt; None:\n    \"\"\"Close all resources (database connection, HTTP client).\n\n    This method is idempotent and safe to call multiple times.\n    \"\"\"\n    # Close storage\n    if self._storage is not None:\n        self._storage.close()\n\n    # Close API client if we created one\n    if self._api_client is not None:\n        self._api_client.close()\n        self._api_client = None\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.test_credentials","title":"test_credentials  <code>staticmethod</code>","text":"<pre><code>test_credentials(account: str | None = None) -&gt; dict[str, Any]\n</code></pre> <p>Test account credentials by making a lightweight API call.</p> <p>This method verifies that credentials are valid and can access the Mixpanel API. It's useful for validating configuration before attempting more expensive operations.</p> PARAMETER DESCRIPTION <code>account</code> <p>Named account to test. If None, tests the default account or credentials from environment variables.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>dict[str, Any]</code> <p>Dict containing: - success: bool - Whether the test succeeded - account: str | None - Account name tested - project_id: str - Project ID from credentials - region: str - Region from credentials - events_found: int - Number of events found (validation metric)</p> RAISES DESCRIPTION <code>AccountNotFoundError</code> <p>If named account doesn't exist.</p> <code>AuthenticationError</code> <p>If credentials are invalid.</p> <code>ConfigError</code> <p>If no credentials can be resolved.</p> <p>Example::</p> <pre><code># Test default account\nresult = Workspace.test_credentials()\nif result[\"success\"]:\n    print(f\"Authenticated to project {result['project_id']}\")\n\n# Test specific account\nresult = Workspace.test_credentials(\"production\")\n</code></pre> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>@staticmethod\ndef test_credentials(account: str | None = None) -&gt; dict[str, Any]:\n    \"\"\"Test account credentials by making a lightweight API call.\n\n    This method verifies that credentials are valid and can access the\n    Mixpanel API. It's useful for validating configuration before\n    attempting more expensive operations.\n\n    Args:\n        account: Named account to test. If None, tests the default account\n            or credentials from environment variables.\n\n    Returns:\n        Dict containing:\n            - success: bool - Whether the test succeeded\n            - account: str | None - Account name tested\n            - project_id: str - Project ID from credentials\n            - region: str - Region from credentials\n            - events_found: int - Number of events found (validation metric)\n\n    Raises:\n        AccountNotFoundError: If named account doesn't exist.\n        AuthenticationError: If credentials are invalid.\n        ConfigError: If no credentials can be resolved.\n\n    Example::\n\n        # Test default account\n        result = Workspace.test_credentials()\n        if result[\"success\"]:\n            print(f\"Authenticated to project {result['project_id']}\")\n\n        # Test specific account\n        result = Workspace.test_credentials(\"production\")\n    \"\"\"\n    config_manager = ConfigManager()\n    credentials = config_manager.resolve_credentials(account)\n\n    # Get account info if we used a named account\n    account_info = None\n    if account is not None:\n        account_info = config_manager.get_account(account)\n    else:\n        # Check if credentials came from a default account\n        accounts = config_manager.list_accounts()\n        for acc in accounts:\n            if acc.is_default:\n                account_info = acc\n                break\n\n    # Create API client and test with a lightweight call\n    api_client = MixpanelAPIClient(credentials)\n    try:\n        events = api_client.get_events()\n        event_count = len(list(events)) if events else 0\n\n        return {\n            \"success\": True,\n            \"account\": account_info.name if account_info else None,\n            \"project_id\": credentials.project_id,\n            \"region\": credentials.region,\n            \"events_found\": event_count,\n        }\n    finally:\n        api_client.close()\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.events","title":"events","text":"<pre><code>events() -&gt; list[str]\n</code></pre> <p>List all event names in the Mixpanel project.</p> <p>Results are cached for the lifetime of the Workspace.</p> RETURNS DESCRIPTION <code>list[str]</code> <p>Alphabetically sorted list of event names.</p> RAISES DESCRIPTION <code>ConfigError</code> <p>If API credentials not available.</p> <code>AuthenticationError</code> <p>If credentials are invalid.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def events(self) -&gt; list[str]:\n    \"\"\"List all event names in the Mixpanel project.\n\n    Results are cached for the lifetime of the Workspace.\n\n    Returns:\n        Alphabetically sorted list of event names.\n\n    Raises:\n        ConfigError: If API credentials not available.\n        AuthenticationError: If credentials are invalid.\n    \"\"\"\n    return self._discovery_service.list_events()\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.properties","title":"properties","text":"<pre><code>properties(event: str) -&gt; list[str]\n</code></pre> <p>List all property names for an event.</p> <p>Results are cached per event for the lifetime of the Workspace.</p> PARAMETER DESCRIPTION <code>event</code> <p>Event name to get properties for.</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>list[str]</code> <p>Alphabetically sorted list of property names.</p> RAISES DESCRIPTION <code>ConfigError</code> <p>If API credentials not available.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def properties(self, event: str) -&gt; list[str]:\n    \"\"\"List all property names for an event.\n\n    Results are cached per event for the lifetime of the Workspace.\n\n    Args:\n        event: Event name to get properties for.\n\n    Returns:\n        Alphabetically sorted list of property names.\n\n    Raises:\n        ConfigError: If API credentials not available.\n    \"\"\"\n    return self._discovery_service.list_properties(event)\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.property_values","title":"property_values","text":"<pre><code>property_values(property_name: str, *, event: str | None = None, limit: int = 100) -&gt; list[str]\n</code></pre> <p>Get sample values for a property.</p> <p>Results are cached per (property, event, limit) for the lifetime of the Workspace.</p> PARAMETER DESCRIPTION <code>property_name</code> <p>Property to get values for.</p> <p> TYPE: <code>str</code> </p> <code>event</code> <p>Optional event to filter by.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>limit</code> <p>Maximum number of values to return.</p> <p> TYPE: <code>int</code> DEFAULT: <code>100</code> </p> RETURNS DESCRIPTION <code>list[str]</code> <p>List of sample property values as strings.</p> RAISES DESCRIPTION <code>ConfigError</code> <p>If API credentials not available.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def property_values(\n    self,\n    property_name: str,\n    *,\n    event: str | None = None,\n    limit: int = 100,\n) -&gt; list[str]:\n    \"\"\"Get sample values for a property.\n\n    Results are cached per (property, event, limit) for the lifetime of the Workspace.\n\n    Args:\n        property_name: Property to get values for.\n        event: Optional event to filter by.\n        limit: Maximum number of values to return.\n\n    Returns:\n        List of sample property values as strings.\n\n    Raises:\n        ConfigError: If API credentials not available.\n    \"\"\"\n    return self._discovery_service.list_property_values(\n        property_name, event=event, limit=limit\n    )\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.funnels","title":"funnels","text":"<pre><code>funnels() -&gt; list[FunnelInfo]\n</code></pre> <p>List saved funnels in the Mixpanel project.</p> <p>Results are cached for the lifetime of the Workspace.</p> RETURNS DESCRIPTION <code>list[FunnelInfo]</code> <p>List of FunnelInfo objects (funnel_id, name).</p> RAISES DESCRIPTION <code>ConfigError</code> <p>If API credentials not available.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def funnels(self) -&gt; list[FunnelInfo]:\n    \"\"\"List saved funnels in the Mixpanel project.\n\n    Results are cached for the lifetime of the Workspace.\n\n    Returns:\n        List of FunnelInfo objects (funnel_id, name).\n\n    Raises:\n        ConfigError: If API credentials not available.\n    \"\"\"\n    return self._discovery_service.list_funnels()\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.cohorts","title":"cohorts","text":"<pre><code>cohorts() -&gt; list[SavedCohort]\n</code></pre> <p>List saved cohorts in the Mixpanel project.</p> <p>Results are cached for the lifetime of the Workspace.</p> RETURNS DESCRIPTION <code>list[SavedCohort]</code> <p>List of SavedCohort objects.</p> RAISES DESCRIPTION <code>ConfigError</code> <p>If API credentials not available.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def cohorts(self) -&gt; list[SavedCohort]:\n    \"\"\"List saved cohorts in the Mixpanel project.\n\n    Results are cached for the lifetime of the Workspace.\n\n    Returns:\n        List of SavedCohort objects.\n\n    Raises:\n        ConfigError: If API credentials not available.\n    \"\"\"\n    return self._discovery_service.list_cohorts()\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.top_events","title":"top_events","text":"<pre><code>top_events(*, type: Literal['general', 'average', 'unique'] = 'general', limit: int | None = None) -&gt; list[TopEvent]\n</code></pre> <p>Get today's most active events.</p> <p>This method is NOT cached (returns real-time data).</p> PARAMETER DESCRIPTION <code>type</code> <p>Counting method (general, average, unique).</p> <p> TYPE: <code>Literal['general', 'average', 'unique']</code> DEFAULT: <code>'general'</code> </p> <code>limit</code> <p>Maximum number of events to return.</p> <p> TYPE: <code>int | None</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>list[TopEvent]</code> <p>List of TopEvent objects (event, count, percent_change).</p> RAISES DESCRIPTION <code>ConfigError</code> <p>If API credentials not available.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def top_events(\n    self,\n    *,\n    type: Literal[\"general\", \"average\", \"unique\"] = \"general\",\n    limit: int | None = None,\n) -&gt; list[TopEvent]:\n    \"\"\"Get today's most active events.\n\n    This method is NOT cached (returns real-time data).\n\n    Args:\n        type: Counting method (general, average, unique).\n        limit: Maximum number of events to return.\n\n    Returns:\n        List of TopEvent objects (event, count, percent_change).\n\n    Raises:\n        ConfigError: If API credentials not available.\n    \"\"\"\n    return self._discovery_service.list_top_events(type=type, limit=limit)\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.clear_discovery_cache","title":"clear_discovery_cache","text":"<pre><code>clear_discovery_cache() -&gt; None\n</code></pre> <p>Clear cached discovery results.</p> <p>Subsequent discovery calls will fetch fresh data from the API.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def clear_discovery_cache(self) -&gt; None:\n    \"\"\"Clear cached discovery results.\n\n    Subsequent discovery calls will fetch fresh data from the API.\n    \"\"\"\n    if self._discovery is not None:\n        self._discovery.clear_cache()\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.fetch_events","title":"fetch_events","text":"<pre><code>fetch_events(name: str = 'events', *, from_date: str, to_date: str, events: list[str] | None = None, where: str | None = None, progress: bool = True) -&gt; FetchResult\n</code></pre> <p>Fetch events from Mixpanel and store in local database.</p> PARAMETER DESCRIPTION <code>name</code> <p>Table name to create (default: \"events\").</p> <p> TYPE: <code>str</code> DEFAULT: <code>'events'</code> </p> <code>from_date</code> <p>Start date (YYYY-MM-DD).</p> <p> TYPE: <code>str</code> </p> <code>to_date</code> <p>End date (YYYY-MM-DD).</p> <p> TYPE: <code>str</code> </p> <code>events</code> <p>Optional list of event names to filter.</p> <p> TYPE: <code>list[str] | None</code> DEFAULT: <code>None</code> </p> <code>where</code> <p>Optional WHERE clause for filtering.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>progress</code> <p>Show progress bar (default: True).</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> RETURNS DESCRIPTION <code>FetchResult</code> <p>FetchResult with table name, row count, duration.</p> RAISES DESCRIPTION <code>TableExistsError</code> <p>If table already exists.</p> <code>ConfigError</code> <p>If API credentials not available.</p> <code>AuthenticationError</code> <p>If credentials are invalid.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def fetch_events(\n    self,\n    name: str = \"events\",\n    *,\n    from_date: str,\n    to_date: str,\n    events: list[str] | None = None,\n    where: str | None = None,\n    progress: bool = True,\n) -&gt; FetchResult:\n    \"\"\"Fetch events from Mixpanel and store in local database.\n\n    Args:\n        name: Table name to create (default: \"events\").\n        from_date: Start date (YYYY-MM-DD).\n        to_date: End date (YYYY-MM-DD).\n        events: Optional list of event names to filter.\n        where: Optional WHERE clause for filtering.\n        progress: Show progress bar (default: True).\n\n    Returns:\n        FetchResult with table name, row count, duration.\n\n    Raises:\n        TableExistsError: If table already exists.\n        ConfigError: If API credentials not available.\n        AuthenticationError: If credentials are invalid.\n    \"\"\"\n    # Create progress callback if requested\n    progress_callback = None\n    pbar = None\n    if progress:\n        try:\n            from rich.progress import Progress, SpinnerColumn, TextColumn\n\n            pbar = Progress(\n                SpinnerColumn(),\n                TextColumn(\"[progress.description]{task.description}\"),\n                TextColumn(\"{task.completed} rows\"),\n            )\n            task = pbar.add_task(\"Fetching events...\", total=None)\n            pbar.start()\n\n            def callback(count: int) -&gt; None:\n                pbar.update(task, completed=count)\n\n            progress_callback = callback\n        except Exception:\n            # Progress bar unavailable or failed to initialize, skip silently\n            pass\n\n    try:\n        result = self._fetcher_service.fetch_events(\n            name=name,\n            from_date=from_date,\n            to_date=to_date,\n            events=events,\n            where=where,\n            progress_callback=progress_callback,\n        )\n    finally:\n        if pbar is not None:\n            pbar.stop()\n\n    return result\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.fetch_profiles","title":"fetch_profiles","text":"<pre><code>fetch_profiles(name: str = 'profiles', *, where: str | None = None, progress: bool = True) -&gt; FetchResult\n</code></pre> <p>Fetch user profiles from Mixpanel and store in local database.</p> PARAMETER DESCRIPTION <code>name</code> <p>Table name to create (default: \"profiles\").</p> <p> TYPE: <code>str</code> DEFAULT: <code>'profiles'</code> </p> <code>where</code> <p>Optional WHERE clause for filtering.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>progress</code> <p>Show progress bar (default: True).</p> <p> TYPE: <code>bool</code> DEFAULT: <code>True</code> </p> RETURNS DESCRIPTION <code>FetchResult</code> <p>FetchResult with table name, row count, duration.</p> RAISES DESCRIPTION <code>TableExistsError</code> <p>If table already exists.</p> <code>ConfigError</code> <p>If API credentials not available.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def fetch_profiles(\n    self,\n    name: str = \"profiles\",\n    *,\n    where: str | None = None,\n    progress: bool = True,\n) -&gt; FetchResult:\n    \"\"\"Fetch user profiles from Mixpanel and store in local database.\n\n    Args:\n        name: Table name to create (default: \"profiles\").\n        where: Optional WHERE clause for filtering.\n        progress: Show progress bar (default: True).\n\n    Returns:\n        FetchResult with table name, row count, duration.\n\n    Raises:\n        TableExistsError: If table already exists.\n        ConfigError: If API credentials not available.\n    \"\"\"\n    # Create progress callback if requested\n    progress_callback = None\n    pbar = None\n    if progress:\n        try:\n            from rich.progress import Progress, SpinnerColumn, TextColumn\n\n            pbar = Progress(\n                SpinnerColumn(),\n                TextColumn(\"[progress.description]{task.description}\"),\n                TextColumn(\"{task.completed} rows\"),\n            )\n            task = pbar.add_task(\"Fetching profiles...\", total=None)\n            pbar.start()\n\n            def callback(count: int) -&gt; None:\n                pbar.update(task, completed=count)\n\n            progress_callback = callback\n        except Exception:\n            # Progress bar unavailable or failed to initialize, skip silently\n            pass\n\n    try:\n        result = self._fetcher_service.fetch_profiles(\n            name=name,\n            where=where,\n            progress_callback=progress_callback,\n        )\n    finally:\n        if pbar is not None:\n            pbar.stop()\n\n    return result\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.sql","title":"sql","text":"<pre><code>sql(query: str) -&gt; pd.DataFrame\n</code></pre> <p>Execute SQL query and return results as DataFrame.</p> PARAMETER DESCRIPTION <code>query</code> <p>SQL query string.</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>DataFrame</code> <p>pandas DataFrame with query results.</p> RAISES DESCRIPTION <code>QueryError</code> <p>If query is invalid.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def sql(self, query: str) -&gt; pd.DataFrame:\n    \"\"\"Execute SQL query and return results as DataFrame.\n\n    Args:\n        query: SQL query string.\n\n    Returns:\n        pandas DataFrame with query results.\n\n    Raises:\n        QueryError: If query is invalid.\n    \"\"\"\n    return self._storage.execute_df(query)\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.sql_scalar","title":"sql_scalar","text":"<pre><code>sql_scalar(query: str) -&gt; Any\n</code></pre> <p>Execute SQL query and return single scalar value.</p> PARAMETER DESCRIPTION <code>query</code> <p>SQL query that returns a single value.</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>Any</code> <p>The scalar result (int, float, str, etc.).</p> RAISES DESCRIPTION <code>QueryError</code> <p>If query is invalid or returns multiple values.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def sql_scalar(self, query: str) -&gt; Any:\n    \"\"\"Execute SQL query and return single scalar value.\n\n    Args:\n        query: SQL query that returns a single value.\n\n    Returns:\n        The scalar result (int, float, str, etc.).\n\n    Raises:\n        QueryError: If query is invalid or returns multiple values.\n    \"\"\"\n    return self._storage.execute_scalar(query)\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.sql_rows","title":"sql_rows","text":"<pre><code>sql_rows(query: str) -&gt; list[tuple[Any, ...]]\n</code></pre> <p>Execute SQL query and return results as list of tuples.</p> PARAMETER DESCRIPTION <code>query</code> <p>SQL query string.</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>list[tuple[Any, ...]]</code> <p>List of row tuples.</p> RAISES DESCRIPTION <code>QueryError</code> <p>If query is invalid.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def sql_rows(self, query: str) -&gt; list[tuple[Any, ...]]:\n    \"\"\"Execute SQL query and return results as list of tuples.\n\n    Args:\n        query: SQL query string.\n\n    Returns:\n        List of row tuples.\n\n    Raises:\n        QueryError: If query is invalid.\n    \"\"\"\n    return self._storage.execute_rows(query)\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.segmentation","title":"segmentation","text":"<pre><code>segmentation(event: str, *, from_date: str, to_date: str, on: str | None = None, unit: Literal['day', 'week', 'month'] = 'day', where: str | None = None) -&gt; SegmentationResult\n</code></pre> <p>Run a segmentation query against Mixpanel API.</p> PARAMETER DESCRIPTION <code>event</code> <p>Event name to query.</p> <p> TYPE: <code>str</code> </p> <code>from_date</code> <p>Start date (YYYY-MM-DD).</p> <p> TYPE: <code>str</code> </p> <code>to_date</code> <p>End date (YYYY-MM-DD).</p> <p> TYPE: <code>str</code> </p> <code>on</code> <p>Optional property to segment by.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>unit</code> <p>Time unit for aggregation.</p> <p> TYPE: <code>Literal['day', 'week', 'month']</code> DEFAULT: <code>'day'</code> </p> <code>where</code> <p>Optional WHERE clause.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>SegmentationResult</code> <p>SegmentationResult with time-series data.</p> RAISES DESCRIPTION <code>ConfigError</code> <p>If API credentials not available.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def segmentation(\n    self,\n    event: str,\n    *,\n    from_date: str,\n    to_date: str,\n    on: str | None = None,\n    unit: Literal[\"day\", \"week\", \"month\"] = \"day\",\n    where: str | None = None,\n) -&gt; SegmentationResult:\n    \"\"\"Run a segmentation query against Mixpanel API.\n\n    Args:\n        event: Event name to query.\n        from_date: Start date (YYYY-MM-DD).\n        to_date: End date (YYYY-MM-DD).\n        on: Optional property to segment by.\n        unit: Time unit for aggregation.\n        where: Optional WHERE clause.\n\n    Returns:\n        SegmentationResult with time-series data.\n\n    Raises:\n        ConfigError: If API credentials not available.\n    \"\"\"\n    return self._live_query_service.segmentation(\n        event=event,\n        from_date=from_date,\n        to_date=to_date,\n        on=on,\n        unit=unit,\n        where=where,\n    )\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.funnel","title":"funnel","text":"<pre><code>funnel(funnel_id: int, *, from_date: str, to_date: str, unit: str | None = None, on: str | None = None) -&gt; FunnelResult\n</code></pre> <p>Run a funnel analysis query.</p> PARAMETER DESCRIPTION <code>funnel_id</code> <p>ID of saved funnel.</p> <p> TYPE: <code>int</code> </p> <code>from_date</code> <p>Start date (YYYY-MM-DD).</p> <p> TYPE: <code>str</code> </p> <code>to_date</code> <p>End date (YYYY-MM-DD).</p> <p> TYPE: <code>str</code> </p> <code>unit</code> <p>Optional time unit.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>on</code> <p>Optional property to segment by.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>FunnelResult</code> <p>FunnelResult with step conversion rates.</p> RAISES DESCRIPTION <code>ConfigError</code> <p>If API credentials not available.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def funnel(\n    self,\n    funnel_id: int,\n    *,\n    from_date: str,\n    to_date: str,\n    unit: str | None = None,\n    on: str | None = None,\n) -&gt; FunnelResult:\n    \"\"\"Run a funnel analysis query.\n\n    Args:\n        funnel_id: ID of saved funnel.\n        from_date: Start date (YYYY-MM-DD).\n        to_date: End date (YYYY-MM-DD).\n        unit: Optional time unit.\n        on: Optional property to segment by.\n\n    Returns:\n        FunnelResult with step conversion rates.\n\n    Raises:\n        ConfigError: If API credentials not available.\n    \"\"\"\n    return self._live_query_service.funnel(\n        funnel_id=funnel_id,\n        from_date=from_date,\n        to_date=to_date,\n        unit=unit,\n        on=on,\n    )\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.retention","title":"retention","text":"<pre><code>retention(*, born_event: str, return_event: str, from_date: str, to_date: str, born_where: str | None = None, return_where: str | None = None, interval: int = 1, interval_count: int = 10, unit: Literal['day', 'week', 'month'] = 'day') -&gt; RetentionResult\n</code></pre> <p>Run a retention analysis query.</p> PARAMETER DESCRIPTION <code>born_event</code> <p>Event that defines cohort entry.</p> <p> TYPE: <code>str</code> </p> <code>return_event</code> <p>Event that defines return.</p> <p> TYPE: <code>str</code> </p> <code>from_date</code> <p>Start date (YYYY-MM-DD).</p> <p> TYPE: <code>str</code> </p> <code>to_date</code> <p>End date (YYYY-MM-DD).</p> <p> TYPE: <code>str</code> </p> <code>born_where</code> <p>Optional filter for born event.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>return_where</code> <p>Optional filter for return event.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>interval</code> <p>Retention interval.</p> <p> TYPE: <code>int</code> DEFAULT: <code>1</code> </p> <code>interval_count</code> <p>Number of intervals.</p> <p> TYPE: <code>int</code> DEFAULT: <code>10</code> </p> <code>unit</code> <p>Time unit.</p> <p> TYPE: <code>Literal['day', 'week', 'month']</code> DEFAULT: <code>'day'</code> </p> RETURNS DESCRIPTION <code>RetentionResult</code> <p>RetentionResult with cohort retention data.</p> RAISES DESCRIPTION <code>ConfigError</code> <p>If API credentials not available.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def retention(\n    self,\n    *,\n    born_event: str,\n    return_event: str,\n    from_date: str,\n    to_date: str,\n    born_where: str | None = None,\n    return_where: str | None = None,\n    interval: int = 1,\n    interval_count: int = 10,\n    unit: Literal[\"day\", \"week\", \"month\"] = \"day\",\n) -&gt; RetentionResult:\n    \"\"\"Run a retention analysis query.\n\n    Args:\n        born_event: Event that defines cohort entry.\n        return_event: Event that defines return.\n        from_date: Start date (YYYY-MM-DD).\n        to_date: End date (YYYY-MM-DD).\n        born_where: Optional filter for born event.\n        return_where: Optional filter for return event.\n        interval: Retention interval.\n        interval_count: Number of intervals.\n        unit: Time unit.\n\n    Returns:\n        RetentionResult with cohort retention data.\n\n    Raises:\n        ConfigError: If API credentials not available.\n    \"\"\"\n    return self._live_query_service.retention(\n        born_event=born_event,\n        return_event=return_event,\n        from_date=from_date,\n        to_date=to_date,\n        born_where=born_where,\n        return_where=return_where,\n        interval=interval,\n        interval_count=interval_count,\n        unit=unit,\n    )\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.jql","title":"jql","text":"<pre><code>jql(script: str, params: dict[str, Any] | None = None) -&gt; JQLResult\n</code></pre> <p>Execute a custom JQL script.</p> PARAMETER DESCRIPTION <code>script</code> <p>JQL script code.</p> <p> TYPE: <code>str</code> </p> <code>params</code> <p>Optional parameters to pass to script.</p> <p> TYPE: <code>dict[str, Any] | None</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>JQLResult</code> <p>JQLResult with raw query results.</p> RAISES DESCRIPTION <code>ConfigError</code> <p>If API credentials not available.</p> <code>JQLSyntaxError</code> <p>If script has syntax errors.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def jql(self, script: str, params: dict[str, Any] | None = None) -&gt; JQLResult:\n    \"\"\"Execute a custom JQL script.\n\n    Args:\n        script: JQL script code.\n        params: Optional parameters to pass to script.\n\n    Returns:\n        JQLResult with raw query results.\n\n    Raises:\n        ConfigError: If API credentials not available.\n        JQLSyntaxError: If script has syntax errors.\n    \"\"\"\n    return self._live_query_service.jql(script=script, params=params)\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.event_counts","title":"event_counts","text":"<pre><code>event_counts(events: list[str], *, from_date: str, to_date: str, type: Literal['general', 'unique', 'average'] = 'general', unit: Literal['day', 'week', 'month'] = 'day') -&gt; EventCountsResult\n</code></pre> <p>Get event counts for multiple events.</p> PARAMETER DESCRIPTION <code>events</code> <p>List of event names.</p> <p> TYPE: <code>list[str]</code> </p> <code>from_date</code> <p>Start date (YYYY-MM-DD).</p> <p> TYPE: <code>str</code> </p> <code>to_date</code> <p>End date (YYYY-MM-DD).</p> <p> TYPE: <code>str</code> </p> <code>type</code> <p>Counting method.</p> <p> TYPE: <code>Literal['general', 'unique', 'average']</code> DEFAULT: <code>'general'</code> </p> <code>unit</code> <p>Time unit.</p> <p> TYPE: <code>Literal['day', 'week', 'month']</code> DEFAULT: <code>'day'</code> </p> RETURNS DESCRIPTION <code>EventCountsResult</code> <p>EventCountsResult with time-series per event.</p> RAISES DESCRIPTION <code>ConfigError</code> <p>If API credentials not available.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def event_counts(\n    self,\n    events: list[str],\n    *,\n    from_date: str,\n    to_date: str,\n    type: Literal[\"general\", \"unique\", \"average\"] = \"general\",\n    unit: Literal[\"day\", \"week\", \"month\"] = \"day\",\n) -&gt; EventCountsResult:\n    \"\"\"Get event counts for multiple events.\n\n    Args:\n        events: List of event names.\n        from_date: Start date (YYYY-MM-DD).\n        to_date: End date (YYYY-MM-DD).\n        type: Counting method.\n        unit: Time unit.\n\n    Returns:\n        EventCountsResult with time-series per event.\n\n    Raises:\n        ConfigError: If API credentials not available.\n    \"\"\"\n    return self._live_query_service.event_counts(\n        events=events,\n        from_date=from_date,\n        to_date=to_date,\n        type=type,\n        unit=unit,\n    )\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.property_counts","title":"property_counts","text":"<pre><code>property_counts(event: str, property_name: str, *, from_date: str, to_date: str, type: Literal['general', 'unique', 'average'] = 'general', unit: Literal['day', 'week', 'month'] = 'day', values: list[str] | None = None, limit: int | None = None) -&gt; PropertyCountsResult\n</code></pre> <p>Get event counts broken down by property values.</p> PARAMETER DESCRIPTION <code>event</code> <p>Event name.</p> <p> TYPE: <code>str</code> </p> <code>property_name</code> <p>Property to break down by.</p> <p> TYPE: <code>str</code> </p> <code>from_date</code> <p>Start date (YYYY-MM-DD).</p> <p> TYPE: <code>str</code> </p> <code>to_date</code> <p>End date (YYYY-MM-DD).</p> <p> TYPE: <code>str</code> </p> <code>type</code> <p>Counting method.</p> <p> TYPE: <code>Literal['general', 'unique', 'average']</code> DEFAULT: <code>'general'</code> </p> <code>unit</code> <p>Time unit.</p> <p> TYPE: <code>Literal['day', 'week', 'month']</code> DEFAULT: <code>'day'</code> </p> <code>values</code> <p>Optional list of property values to include.</p> <p> TYPE: <code>list[str] | None</code> DEFAULT: <code>None</code> </p> <code>limit</code> <p>Maximum number of property values.</p> <p> TYPE: <code>int | None</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>PropertyCountsResult</code> <p>PropertyCountsResult with time-series per property value.</p> RAISES DESCRIPTION <code>ConfigError</code> <p>If API credentials not available.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def property_counts(\n    self,\n    event: str,\n    property_name: str,\n    *,\n    from_date: str,\n    to_date: str,\n    type: Literal[\"general\", \"unique\", \"average\"] = \"general\",\n    unit: Literal[\"day\", \"week\", \"month\"] = \"day\",\n    values: list[str] | None = None,\n    limit: int | None = None,\n) -&gt; PropertyCountsResult:\n    \"\"\"Get event counts broken down by property values.\n\n    Args:\n        event: Event name.\n        property_name: Property to break down by.\n        from_date: Start date (YYYY-MM-DD).\n        to_date: End date (YYYY-MM-DD).\n        type: Counting method.\n        unit: Time unit.\n        values: Optional list of property values to include.\n        limit: Maximum number of property values.\n\n    Returns:\n        PropertyCountsResult with time-series per property value.\n\n    Raises:\n        ConfigError: If API credentials not available.\n    \"\"\"\n    return self._live_query_service.property_counts(\n        event=event,\n        property_name=property_name,\n        from_date=from_date,\n        to_date=to_date,\n        type=type,\n        unit=unit,\n        values=values,\n        limit=limit,\n    )\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.activity_feed","title":"activity_feed","text":"<pre><code>activity_feed(distinct_ids: list[str], *, from_date: str | None = None, to_date: str | None = None) -&gt; ActivityFeedResult\n</code></pre> <p>Get activity feed for specific users.</p> PARAMETER DESCRIPTION <code>distinct_ids</code> <p>List of user identifiers.</p> <p> TYPE: <code>list[str]</code> </p> <code>from_date</code> <p>Optional start date filter.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>to_date</code> <p>Optional end date filter.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>ActivityFeedResult</code> <p>ActivityFeedResult with user events.</p> RAISES DESCRIPTION <code>ConfigError</code> <p>If API credentials not available.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def activity_feed(\n    self,\n    distinct_ids: list[str],\n    *,\n    from_date: str | None = None,\n    to_date: str | None = None,\n) -&gt; ActivityFeedResult:\n    \"\"\"Get activity feed for specific users.\n\n    Args:\n        distinct_ids: List of user identifiers.\n        from_date: Optional start date filter.\n        to_date: Optional end date filter.\n\n    Returns:\n        ActivityFeedResult with user events.\n\n    Raises:\n        ConfigError: If API credentials not available.\n    \"\"\"\n    return self._live_query_service.activity_feed(\n        distinct_ids=distinct_ids,\n        from_date=from_date,\n        to_date=to_date,\n    )\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.insights","title":"insights","text":"<pre><code>insights(bookmark_id: int) -&gt; InsightsResult\n</code></pre> <p>Query a saved Insights report.</p> PARAMETER DESCRIPTION <code>bookmark_id</code> <p>ID of saved report.</p> <p> TYPE: <code>int</code> </p> RETURNS DESCRIPTION <code>InsightsResult</code> <p>InsightsResult with report data.</p> RAISES DESCRIPTION <code>ConfigError</code> <p>If API credentials not available.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def insights(self, bookmark_id: int) -&gt; InsightsResult:\n    \"\"\"Query a saved Insights report.\n\n    Args:\n        bookmark_id: ID of saved report.\n\n    Returns:\n        InsightsResult with report data.\n\n    Raises:\n        ConfigError: If API credentials not available.\n    \"\"\"\n    return self._live_query_service.insights(bookmark_id=bookmark_id)\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.frequency","title":"frequency","text":"<pre><code>frequency(*, from_date: str, to_date: str, unit: Literal['day', 'week', 'month'] = 'day', addiction_unit: Literal['hour', 'day'] = 'hour', event: str | None = None, where: str | None = None) -&gt; FrequencyResult\n</code></pre> <p>Analyze event frequency distribution.</p> PARAMETER DESCRIPTION <code>from_date</code> <p>Start date (YYYY-MM-DD).</p> <p> TYPE: <code>str</code> </p> <code>to_date</code> <p>End date (YYYY-MM-DD).</p> <p> TYPE: <code>str</code> </p> <code>unit</code> <p>Overall time unit.</p> <p> TYPE: <code>Literal['day', 'week', 'month']</code> DEFAULT: <code>'day'</code> </p> <code>addiction_unit</code> <p>Measurement granularity.</p> <p> TYPE: <code>Literal['hour', 'day']</code> DEFAULT: <code>'hour'</code> </p> <code>event</code> <p>Optional event filter.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>where</code> <p>Optional WHERE clause.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>FrequencyResult</code> <p>FrequencyResult with frequency distribution.</p> RAISES DESCRIPTION <code>ConfigError</code> <p>If API credentials not available.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def frequency(\n    self,\n    *,\n    from_date: str,\n    to_date: str,\n    unit: Literal[\"day\", \"week\", \"month\"] = \"day\",\n    addiction_unit: Literal[\"hour\", \"day\"] = \"hour\",\n    event: str | None = None,\n    where: str | None = None,\n) -&gt; FrequencyResult:\n    \"\"\"Analyze event frequency distribution.\n\n    Args:\n        from_date: Start date (YYYY-MM-DD).\n        to_date: End date (YYYY-MM-DD).\n        unit: Overall time unit.\n        addiction_unit: Measurement granularity.\n        event: Optional event filter.\n        where: Optional WHERE clause.\n\n    Returns:\n        FrequencyResult with frequency distribution.\n\n    Raises:\n        ConfigError: If API credentials not available.\n    \"\"\"\n    return self._live_query_service.frequency(\n        from_date=from_date,\n        to_date=to_date,\n        unit=unit,\n        addiction_unit=addiction_unit,\n        event=event,\n        where=where,\n    )\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.segmentation_numeric","title":"segmentation_numeric","text":"<pre><code>segmentation_numeric(event: str, *, from_date: str, to_date: str, on: str, unit: Literal['hour', 'day'] = 'day', where: str | None = None, type: Literal['general', 'unique', 'average'] = 'general') -&gt; NumericBucketResult\n</code></pre> <p>Bucket events by numeric property ranges.</p> PARAMETER DESCRIPTION <code>event</code> <p>Event name.</p> <p> TYPE: <code>str</code> </p> <code>from_date</code> <p>Start date.</p> <p> TYPE: <code>str</code> </p> <code>to_date</code> <p>End date.</p> <p> TYPE: <code>str</code> </p> <code>on</code> <p>Numeric property expression.</p> <p> TYPE: <code>str</code> </p> <code>unit</code> <p>Time unit.</p> <p> TYPE: <code>Literal['hour', 'day']</code> DEFAULT: <code>'day'</code> </p> <code>where</code> <p>Optional filter.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> <code>type</code> <p>Counting method.</p> <p> TYPE: <code>Literal['general', 'unique', 'average']</code> DEFAULT: <code>'general'</code> </p> RETURNS DESCRIPTION <code>NumericBucketResult</code> <p>NumericBucketResult with bucketed data.</p> RAISES DESCRIPTION <code>ConfigError</code> <p>If API credentials not available.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def segmentation_numeric(\n    self,\n    event: str,\n    *,\n    from_date: str,\n    to_date: str,\n    on: str,\n    unit: Literal[\"hour\", \"day\"] = \"day\",\n    where: str | None = None,\n    type: Literal[\"general\", \"unique\", \"average\"] = \"general\",\n) -&gt; NumericBucketResult:\n    \"\"\"Bucket events by numeric property ranges.\n\n    Args:\n        event: Event name.\n        from_date: Start date.\n        to_date: End date.\n        on: Numeric property expression.\n        unit: Time unit.\n        where: Optional filter.\n        type: Counting method.\n\n    Returns:\n        NumericBucketResult with bucketed data.\n\n    Raises:\n        ConfigError: If API credentials not available.\n    \"\"\"\n    return self._live_query_service.segmentation_numeric(\n        event=event,\n        from_date=from_date,\n        to_date=to_date,\n        on=on,\n        unit=unit,\n        where=where,\n        type=type,\n    )\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.segmentation_sum","title":"segmentation_sum","text":"<pre><code>segmentation_sum(event: str, *, from_date: str, to_date: str, on: str, unit: Literal['hour', 'day'] = 'day', where: str | None = None) -&gt; NumericSumResult\n</code></pre> <p>Calculate sum of numeric property over time.</p> PARAMETER DESCRIPTION <code>event</code> <p>Event name.</p> <p> TYPE: <code>str</code> </p> <code>from_date</code> <p>Start date.</p> <p> TYPE: <code>str</code> </p> <code>to_date</code> <p>End date.</p> <p> TYPE: <code>str</code> </p> <code>on</code> <p>Numeric property expression.</p> <p> TYPE: <code>str</code> </p> <code>unit</code> <p>Time unit.</p> <p> TYPE: <code>Literal['hour', 'day']</code> DEFAULT: <code>'day'</code> </p> <code>where</code> <p>Optional filter.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>NumericSumResult</code> <p>NumericSumResult with sum values per period.</p> RAISES DESCRIPTION <code>ConfigError</code> <p>If API credentials not available.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def segmentation_sum(\n    self,\n    event: str,\n    *,\n    from_date: str,\n    to_date: str,\n    on: str,\n    unit: Literal[\"hour\", \"day\"] = \"day\",\n    where: str | None = None,\n) -&gt; NumericSumResult:\n    \"\"\"Calculate sum of numeric property over time.\n\n    Args:\n        event: Event name.\n        from_date: Start date.\n        to_date: End date.\n        on: Numeric property expression.\n        unit: Time unit.\n        where: Optional filter.\n\n    Returns:\n        NumericSumResult with sum values per period.\n\n    Raises:\n        ConfigError: If API credentials not available.\n    \"\"\"\n    return self._live_query_service.segmentation_sum(\n        event=event,\n        from_date=from_date,\n        to_date=to_date,\n        on=on,\n        unit=unit,\n        where=where,\n    )\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.segmentation_average","title":"segmentation_average","text":"<pre><code>segmentation_average(event: str, *, from_date: str, to_date: str, on: str, unit: Literal['hour', 'day'] = 'day', where: str | None = None) -&gt; NumericAverageResult\n</code></pre> <p>Calculate average of numeric property over time.</p> PARAMETER DESCRIPTION <code>event</code> <p>Event name.</p> <p> TYPE: <code>str</code> </p> <code>from_date</code> <p>Start date.</p> <p> TYPE: <code>str</code> </p> <code>to_date</code> <p>End date.</p> <p> TYPE: <code>str</code> </p> <code>on</code> <p>Numeric property expression.</p> <p> TYPE: <code>str</code> </p> <code>unit</code> <p>Time unit.</p> <p> TYPE: <code>Literal['hour', 'day']</code> DEFAULT: <code>'day'</code> </p> <code>where</code> <p>Optional filter.</p> <p> TYPE: <code>str | None</code> DEFAULT: <code>None</code> </p> RETURNS DESCRIPTION <code>NumericAverageResult</code> <p>NumericAverageResult with average values per period.</p> RAISES DESCRIPTION <code>ConfigError</code> <p>If API credentials not available.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def segmentation_average(\n    self,\n    event: str,\n    *,\n    from_date: str,\n    to_date: str,\n    on: str,\n    unit: Literal[\"hour\", \"day\"] = \"day\",\n    where: str | None = None,\n) -&gt; NumericAverageResult:\n    \"\"\"Calculate average of numeric property over time.\n\n    Args:\n        event: Event name.\n        from_date: Start date.\n        to_date: End date.\n        on: Numeric property expression.\n        unit: Time unit.\n        where: Optional filter.\n\n    Returns:\n        NumericAverageResult with average values per period.\n\n    Raises:\n        ConfigError: If API credentials not available.\n    \"\"\"\n    return self._live_query_service.segmentation_average(\n        event=event,\n        from_date=from_date,\n        to_date=to_date,\n        on=on,\n        unit=unit,\n        where=where,\n    )\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.info","title":"info","text":"<pre><code>info() -&gt; WorkspaceInfo\n</code></pre> <p>Get metadata about this workspace.</p> RETURNS DESCRIPTION <code>WorkspaceInfo</code> <p>WorkspaceInfo with path, project_id, region, account, tables, size.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def info(self) -&gt; WorkspaceInfo:\n    \"\"\"Get metadata about this workspace.\n\n    Returns:\n        WorkspaceInfo with path, project_id, region, account, tables, size.\n    \"\"\"\n    path = self._storage.path\n    tables = [t.name for t in self._storage.list_tables()]\n\n    # Calculate database size and creation time\n    size_mb = 0.0\n    created_at: datetime | None = None\n    if path is not None and path.exists():\n        try:\n            stat = path.stat()\n            size_mb = stat.st_size / 1_000_000\n            created_at = datetime.fromtimestamp(stat.st_ctime)\n        except (OSError, PermissionError):\n            # File became inaccessible, use defaults\n            pass\n\n    return WorkspaceInfo(\n        path=path,\n        project_id=self._credentials.project_id if self._credentials else \"unknown\",\n        region=self._credentials.region if self._credentials else \"unknown\",\n        account=self._account_name,\n        tables=tables,\n        size_mb=size_mb,\n        created_at=created_at,\n    )\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.tables","title":"tables","text":"<pre><code>tables() -&gt; list[TableInfo]\n</code></pre> <p>List tables in the local database.</p> RETURNS DESCRIPTION <code>list[TableInfo]</code> <p>List of TableInfo objects (name, type, row_count, fetched_at).</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def tables(self) -&gt; list[TableInfo]:\n    \"\"\"List tables in the local database.\n\n    Returns:\n        List of TableInfo objects (name, type, row_count, fetched_at).\n    \"\"\"\n    return self._storage.list_tables()\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.schema","title":"schema","text":"<pre><code>schema(table: str) -&gt; TableSchema\n</code></pre> <p>Get schema for a table.</p> PARAMETER DESCRIPTION <code>table</code> <p>Table name.</p> <p> TYPE: <code>str</code> </p> RETURNS DESCRIPTION <code>TableSchema</code> <p>TableSchema with column definitions.</p> RAISES DESCRIPTION <code>TableNotFoundError</code> <p>If table doesn't exist.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def schema(self, table: str) -&gt; TableSchema:\n    \"\"\"Get schema for a table.\n\n    Args:\n        table: Table name.\n\n    Returns:\n        TableSchema with column definitions.\n\n    Raises:\n        TableNotFoundError: If table doesn't exist.\n    \"\"\"\n    return self._storage.get_schema(table)\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.drop","title":"drop","text":"<pre><code>drop(*names: str) -&gt; None\n</code></pre> <p>Drop specified tables.</p> PARAMETER DESCRIPTION <code>*names</code> <p>Table names to drop.</p> <p> TYPE: <code>str</code> DEFAULT: <code>()</code> </p> RAISES DESCRIPTION <code>TableNotFoundError</code> <p>If any table doesn't exist.</p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def drop(self, *names: str) -&gt; None:\n    \"\"\"Drop specified tables.\n\n    Args:\n        *names: Table names to drop.\n\n    Raises:\n        TableNotFoundError: If any table doesn't exist.\n    \"\"\"\n    for name in names:\n        self._storage.drop_table(name)\n</code></pre>"},{"location":"api/workspace/#mixpanel_data.Workspace.drop_all","title":"drop_all","text":"<pre><code>drop_all(type: Literal['events', 'profiles'] | None = None) -&gt; None\n</code></pre> <p>Drop all tables, optionally filtered by type.</p> PARAMETER DESCRIPTION <code>type</code> <p>If specified, only drop tables of this type.</p> <p> TYPE: <code>Literal['events', 'profiles'] | None</code> DEFAULT: <code>None</code> </p> Source code in <code>src/mixpanel_data/workspace.py</code> <pre><code>def drop_all(self, type: Literal[\"events\", \"profiles\"] | None = None) -&gt; None:\n    \"\"\"Drop all tables, optionally filtered by type.\n\n    Args:\n        type: If specified, only drop tables of this type.\n    \"\"\"\n    tables = self._storage.list_tables()\n    for table in tables:\n        if type is None or table.type == type:\n            self._storage.drop_table(table.name)\n</code></pre>"},{"location":"architecture/data-model/","title":"Data Model","text":"<p>How Mixpanel data maps to local storage.</p>"},{"location":"architecture/data-model/#mixpanel-data-model","title":"Mixpanel Data Model","text":"<p>Mixpanel tracks two primary data types:</p>"},{"location":"architecture/data-model/#events","title":"Events","text":"<p>Actions users take in your product:</p> Field Description <code>event</code> Event name (e.g., \"Purchase\", \"Signup\") <code>time</code> Unix timestamp when event occurred <code>distinct_id</code> User identifier <code>$insert_id</code> Deduplication ID <code>properties</code> Custom properties (JSON object)"},{"location":"architecture/data-model/#user-profiles","title":"User Profiles","text":"<p>Persistent attributes about users:</p> Field Description <code>$distinct_id</code> User identifier (primary key) <code>$properties</code> Profile properties (JSON object)"},{"location":"architecture/data-model/#local-storage-schema","title":"Local Storage Schema","text":""},{"location":"architecture/data-model/#events-table","title":"Events Table","text":"<p>When you fetch events, they're stored with this schema:</p> Column Type Description <code>event_id</code> VARCHAR Unique event identifier <code>event_name</code> VARCHAR Event name <code>event_time</code> TIMESTAMP When the event occurred <code>distinct_id</code> VARCHAR User identifier <code>insert_id</code> VARCHAR Deduplication ID <code>properties</code> JSON All event properties <p>Example query:</p> <pre><code>SELECT\n    event_name,\n    event_time,\n    distinct_id,\n    properties-&gt;&gt;'$.country' as country,\n    CAST(properties-&gt;&gt;'$.amount' AS DECIMAL) as amount\nFROM events\nWHERE event_name = 'Purchase'\n</code></pre>"},{"location":"architecture/data-model/#profiles-table","title":"Profiles Table","text":"<p>User profiles are stored with:</p> Column Type Description <code>distinct_id</code> VARCHAR User identifier (primary key) <code>properties</code> JSON All profile properties <p>Example query:</p> <pre><code>SELECT\n    distinct_id,\n    properties-&gt;&gt;'$.name' as name,\n    properties-&gt;&gt;'$.email' as email,\n    properties-&gt;&gt;'$.plan' as plan\nFROM profiles\nWHERE properties-&gt;&gt;'$.plan' = 'premium'\n</code></pre>"},{"location":"architecture/data-model/#json-property-access","title":"JSON Property Access","text":"<p>DuckDB provides powerful JSON operators for querying properties:</p>"},{"location":"architecture/data-model/#extract-string","title":"Extract String","text":"<pre><code>-- Arrow operator returns JSON, -&gt;&gt; returns text\nSELECT properties-&gt;&gt;'$.country' as country FROM events\n</code></pre>"},{"location":"architecture/data-model/#extract-and-cast","title":"Extract and Cast","text":"<pre><code>SELECT CAST(properties-&gt;&gt;'$.amount' AS DECIMAL) as amount FROM events\n</code></pre>"},{"location":"architecture/data-model/#nested-access","title":"Nested Access","text":"<pre><code>SELECT properties-&gt;&gt;'$.user.address.city' as city FROM events\n</code></pre>"},{"location":"architecture/data-model/#array-access","title":"Array Access","text":"<pre><code>-- First element\nSELECT properties-&gt;'$.items'-&gt;&gt;0 as first_item FROM events\n\n-- Array length\nSELECT json_array_length(properties-&gt;'$.items') as count FROM events\n</code></pre>"},{"location":"architecture/data-model/#check-existence","title":"Check Existence","text":"<pre><code>SELECT * FROM events\nWHERE properties-&gt;&gt;'$.coupon_code' IS NOT NULL\n</code></pre>"},{"location":"architecture/data-model/#metadata-table","title":"Metadata Table","text":"<p>Each workspace maintains a <code>_mp_metadata</code> table for tracking fetch operations:</p> Column Type Description <code>table_name</code> VARCHAR Name of the data table <code>table_type</code> VARCHAR \"events\" or \"profiles\" <code>from_date</code> VARCHAR Start date (events only) <code>to_date</code> VARCHAR End date (events only) <code>events</code> JSON Event filter (if any) <code>where_clause</code> VARCHAR Where filter (if any) <code>row_count</code> BIGINT Number of rows <code>fetched_at</code> TIMESTAMP When fetch completed <p>This metadata is used by <code>ws.tables()</code> and <code>ws.info()</code>.</p>"},{"location":"architecture/data-model/#common-mixpanel-properties","title":"Common Mixpanel Properties","text":""},{"location":"architecture/data-model/#event-properties","title":"Event Properties","text":"Property Type Description <code>$city</code> string User's city <code>$region</code> string User's region/state <code>$country_code</code> string Two-letter country code <code>$browser</code> string Browser name <code>$device</code> string Device type <code>$os</code> string Operating system <code>mp_country_code</code> string Country code <code>$current_url</code> string Page URL <code>$referrer</code> string Referrer URL"},{"location":"architecture/data-model/#profile-properties","title":"Profile Properties","text":"Property Type Description <code>$email</code> string User's email <code>$name</code> string User's name <code>$first_name</code> string First name <code>$last_name</code> string Last name <code>$created</code> timestamp When profile was created <code>$last_seen</code> timestamp Last activity time"},{"location":"architecture/data-model/#query-patterns","title":"Query Patterns","text":""},{"location":"architecture/data-model/#daily-active-users","title":"Daily Active Users","text":"<pre><code>SELECT\n    DATE_TRUNC('day', event_time) as day,\n    COUNT(DISTINCT distinct_id) as dau\nFROM events\nGROUP BY 1\nORDER BY 1\n</code></pre>"},{"location":"architecture/data-model/#revenue-by-country","title":"Revenue by Country","text":"<pre><code>SELECT\n    properties-&gt;&gt;'$.country_code' as country,\n    SUM(CAST(properties-&gt;&gt;'$.amount' AS DECIMAL)) as revenue\nFROM events\nWHERE event_name = 'Purchase'\nGROUP BY 1\nORDER BY 2 DESC\n</code></pre>"},{"location":"architecture/data-model/#join-events-with-profiles","title":"Join Events with Profiles","text":"<pre><code>SELECT\n    e.event_name,\n    p.properties-&gt;&gt;'$.plan' as plan,\n    COUNT(*) as count\nFROM events e\nJOIN profiles p ON e.distinct_id = p.distinct_id\nGROUP BY 1, 2\n</code></pre>"},{"location":"architecture/data-model/#funnel-analysis","title":"Funnel Analysis","text":"<pre><code>WITH step1 AS (\n    SELECT DISTINCT distinct_id, MIN(event_time) as t1\n    FROM events WHERE event_name = 'View Product' GROUP BY 1\n),\nstep2 AS (\n    SELECT DISTINCT e.distinct_id, MIN(e.event_time) as t2\n    FROM events e\n    JOIN step1 s ON e.distinct_id = s.distinct_id\n    WHERE e.event_name = 'Add to Cart' AND e.event_time &gt; s.t1\n    GROUP BY 1\n),\nstep3 AS (\n    SELECT DISTINCT e.distinct_id\n    FROM events e\n    JOIN step2 s ON e.distinct_id = s.distinct_id\n    WHERE e.event_name = 'Purchase' AND e.event_time &gt; s.t2\n)\nSELECT\n    (SELECT COUNT(*) FROM step1) as viewed,\n    (SELECT COUNT(*) FROM step2) as added,\n    (SELECT COUNT(*) FROM step3) as purchased\n</code></pre>"},{"location":"architecture/data-model/#see-also","title":"See Also","text":"<ul> <li>SQL Queries Guide \u2014 More query examples</li> <li>DuckDB JSON Documentation \u2014 Complete JSON function reference</li> </ul>"},{"location":"architecture/design/","title":"Architecture","text":"<p>mixpanel_data follows a layered architecture with clear separation of concerns.</p>"},{"location":"architecture/design/#layer-diagram","title":"Layer Diagram","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      CLI Layer (Typer)                      \u2502\n\u2502         Argument parsing, output formatting, progress       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   Public API Layer                          \u2502\n\u2502              Workspace class, auth module                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     Service Layer                           \u2502\n\u2502     DiscoveryService, FetcherService, LiveQueryService      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                              \u2502\n                              \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                  Infrastructure Layer                       \u2502\n\u2502       ConfigManager, MixpanelAPIClient, StorageEngine       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"architecture/design/#components","title":"Components","text":""},{"location":"architecture/design/#workspace-facade","title":"Workspace (Facade)","text":"<p>The <code>Workspace</code> class is the unified entry point that coordinates all services:</p> <ul> <li>Credential Resolution \u2014 Env vars \u2192 named account \u2192 default account</li> <li>Service Orchestration \u2014 Creates and manages service instances</li> <li>Resource Management \u2014 Context manager support for cleanup</li> </ul>"},{"location":"architecture/design/#services","title":"Services","text":""},{"location":"architecture/design/#discoveryservice","title":"DiscoveryService","text":"<p>Schema introspection with session-scoped caching:</p> <ul> <li><code>list_events()</code> \u2014 All event names (cached)</li> <li><code>list_properties(event)</code> \u2014 Properties for an event (cached per event)</li> <li><code>list_property_values(property, event)</code> \u2014 Sample values (cached)</li> <li><code>list_funnels()</code> \u2014 Saved funnels (cached)</li> <li><code>list_cohorts()</code> \u2014 Saved cohorts (cached)</li> <li><code>list_top_events()</code> \u2014 Today's top events (NOT cached, real-time)</li> </ul>"},{"location":"architecture/design/#fetcherservice","title":"FetcherService","text":"<p>Coordinates data ingestion from Mixpanel API to DuckDB:</p> <ul> <li>Streaming transformation (memory efficient)</li> <li>Progress callback integration</li> <li>Returns <code>FetchResult</code> with metadata</li> </ul>"},{"location":"architecture/design/#livequeryservice","title":"LiveQueryService","text":"<p>Executes live analytics queries against Mixpanel Query API:</p> <ul> <li>Segmentation, funnels, retention, JQL</li> <li>Event counts, property counts</li> <li>Activity feed, insights, frequency</li> <li>Numeric aggregations (bucket, sum, average)</li> </ul>"},{"location":"architecture/design/#infrastructure","title":"Infrastructure","text":""},{"location":"architecture/design/#configmanager","title":"ConfigManager","text":"<p>TOML-based account management at <code>~/.mp/config.toml</code>:</p> <ul> <li>Account CRUD operations</li> <li>Credential resolution</li> <li>Default account management</li> </ul>"},{"location":"architecture/design/#mixpanelapiclient","title":"MixpanelAPIClient","text":"<p>HTTP client with Mixpanel-specific features:</p> <ul> <li>Service account authentication</li> <li>Regional endpoint routing (US, EU, India)</li> <li>Automatic rate limit handling with exponential backoff</li> <li>Streaming JSONL parsing for large exports</li> </ul>"},{"location":"architecture/design/#storageengine","title":"StorageEngine","text":"<p>DuckDB-based storage:</p> <ul> <li>Persistent and ephemeral modes</li> <li>Table creation with streaming batch ingestion</li> <li>Query execution (DataFrame, scalar, rows)</li> <li>Schema introspection and metadata</li> </ul>"},{"location":"architecture/design/#data-paths","title":"Data Paths","text":""},{"location":"architecture/design/#live-query-path","title":"Live Query Path","text":"<pre><code>User Request \u2192 Workspace \u2192 LiveQueryService \u2192 MixpanelAPIClient \u2192 Mixpanel API\n                                                      \u2193\n                                              Typed Result (e.g., SegmentationResult)\n</code></pre> <p>Best for:</p> <ul> <li>Real-time data needs</li> <li>One-off analysis</li> <li>Pre-computed Mixpanel reports</li> </ul>"},{"location":"architecture/design/#local-analysis-path","title":"Local Analysis Path","text":"<pre><code>User Request \u2192 Workspace \u2192 FetcherService \u2192 MixpanelAPIClient \u2192 Mixpanel Export API\n                                 \u2193\n                          StorageEngine (DuckDB)\n                                 \u2193\nUser Query \u2192 Workspace \u2192 StorageEngine \u2192 SQL Execution \u2192 DataFrame\n</code></pre> <p>Best for:</p> <ul> <li>Repeated queries over same data</li> <li>Custom SQL logic</li> <li>Context window preservation (AI agents)</li> <li>Offline analysis</li> </ul>"},{"location":"architecture/design/#key-design-decisions","title":"Key Design Decisions","text":""},{"location":"architecture/design/#explicit-table-management","title":"Explicit Table Management","text":"<p>Tables are never implicitly overwritten. Fetching to an existing table name raises <code>TableExistsError</code>. This prevents accidental data loss and makes data lineage explicit.</p>"},{"location":"architecture/design/#streaming-ingestion","title":"Streaming Ingestion","text":"<p>The API client returns iterators, and storage accepts iterators. This enables memory-efficient processing of large datasets without loading everything into memory.</p>"},{"location":"architecture/design/#json-property-storage","title":"JSON Property Storage","text":"<p>Event and profile properties are stored as JSON columns in DuckDB. This preserves the flexible Mixpanel schema while enabling powerful JSON querying:</p> <pre><code>SELECT properties-&gt;&gt;'$.country' as country FROM events\n</code></pre>"},{"location":"architecture/design/#immutable-credentials","title":"Immutable Credentials","text":"<p>Credentials are resolved once at Workspace construction. This prevents confusion from mid-session credential changes.</p>"},{"location":"architecture/design/#dependency-injection","title":"Dependency Injection","text":"<p>All services accept their dependencies as constructor arguments. This enables:</p> <ul> <li>Easy testing with mocks</li> <li>Flexible composition</li> <li>Clear dependency relationships</li> </ul>"},{"location":"architecture/design/#technology-stack","title":"Technology Stack","text":"Component Technology Purpose Language Python 3.11+ Type hints, modern syntax CLI Framework Typer Declarative CLI building Output Formatting Rich Tables, progress bars, colors Validation Pydantic Data validation, settings Database DuckDB Embedded analytical database HTTP Client httpx Async-capable HTTP DataFrames pandas Data analysis interface"},{"location":"architecture/design/#package-structure","title":"Package Structure","text":"<pre><code>src/mixpanel_data/\n\u251c\u2500\u2500 __init__.py              # Public API exports\n\u251c\u2500\u2500 workspace.py             # Workspace facade\n\u251c\u2500\u2500 auth.py                  # Public auth module\n\u251c\u2500\u2500 exceptions.py            # Exception hierarchy\n\u251c\u2500\u2500 types.py                 # Result types\n\u251c\u2500\u2500 py.typed                 # PEP 561 marker\n\u251c\u2500\u2500 _internal/               # Private implementation\n\u2502   \u251c\u2500\u2500 config.py            # ConfigManager, Credentials\n\u2502   \u251c\u2500\u2500 api_client.py        # MixpanelAPIClient\n\u2502   \u251c\u2500\u2500 storage.py           # StorageEngine\n\u2502   \u2514\u2500\u2500 services/\n\u2502       \u251c\u2500\u2500 discovery.py     # DiscoveryService\n\u2502       \u251c\u2500\u2500 fetcher.py       # FetcherService\n\u2502       \u2514\u2500\u2500 live_query.py    # LiveQueryService\n\u2514\u2500\u2500 cli/\n    \u251c\u2500\u2500 main.py              # Typer app entry point\n    \u251c\u2500\u2500 commands/            # Command implementations\n    \u251c\u2500\u2500 formatters.py        # Output formatters\n    \u2514\u2500\u2500 utils.py             # CLI utilities\n</code></pre>"},{"location":"cli/","title":"CLI Overview","text":"<p>The <code>mp</code> command provides full access to mixpanel_data functionality from the command line.</p>"},{"location":"cli/#installation","title":"Installation","text":"<p>The CLI is installed automatically with the package:</p> <pre><code>pip install mixpanel_data\n</code></pre> <p>Verify installation:</p> <pre><code>mp --version\n</code></pre>"},{"location":"cli/#global-options","title":"Global Options","text":"Option Short Description <code>--account</code> <code>-a</code> Account name to use (overrides default) <code>--quiet</code> <code>-q</code> Suppress progress output <code>--verbose</code> <code>-v</code> Enable debug output <code>--version</code> Show version and exit <code>--help</code> Show help and exit"},{"location":"cli/#command-groups","title":"Command Groups","text":""},{"location":"cli/#auth-account-management","title":"auth \u2014 Account Management","text":"<p>Manage stored credentials and accounts.</p> Command Description <code>mp auth list</code> List configured accounts <code>mp auth add</code> Add a new account <code>mp auth remove</code> Remove an account <code>mp auth switch</code> Set the default account <code>mp auth show</code> Display account details <code>mp auth test</code> Test account credentials"},{"location":"cli/#fetch-data-fetching","title":"fetch \u2014 Data Fetching","text":"<p>Fetch data from Mixpanel into local storage.</p> Command Description <code>mp fetch events</code> Fetch events to local DuckDB <code>mp fetch profiles</code> Fetch user profiles to local DuckDB"},{"location":"cli/#query-query-operations","title":"query \u2014 Query Operations","text":"<p>Execute queries against local or remote data.</p> Command Description <code>mp query sql</code> Query local DuckDB with SQL <code>mp query segmentation</code> Time-series event counts <code>mp query funnel</code> Funnel conversion analysis <code>mp query retention</code> Cohort retention analysis <code>mp query jql</code> Execute JQL scripts <code>mp query event-counts</code> Multi-event time series <code>mp query property-counts</code> Property breakdown time series <code>mp query activity-feed</code> User event history <code>mp query insights</code> Query saved Insights reports <code>mp query frequency</code> Event frequency distribution <code>mp query segmentation-numeric</code> Numeric property bucketing <code>mp query segmentation-sum</code> Numeric property sum <code>mp query segmentation-average</code> Numeric property average"},{"location":"cli/#inspect-discovery-introspection","title":"inspect \u2014 Discovery &amp; Introspection","text":"<p>Explore schema and local database.</p> Command Description <code>mp inspect events</code> List event names <code>mp inspect properties</code> List properties for an event <code>mp inspect values</code> List values for a property <code>mp inspect funnels</code> List saved funnels <code>mp inspect cohorts</code> List saved cohorts <code>mp inspect top-events</code> List today's top events <code>mp inspect info</code> Show workspace info <code>mp inspect tables</code> List local tables <code>mp inspect schema</code> Show table schema <code>mp inspect drop</code> Drop a local table"},{"location":"cli/#output-formats","title":"Output Formats","text":"<p>All commands support the <code>--format</code> option:</p> Format Description Use Case <code>json</code> Pretty-printed JSON Default, human-readable <code>jsonl</code> JSON Lines Streaming, large datasets <code>table</code> Rich formatted table Terminal viewing <code>csv</code> CSV with headers Spreadsheet export <code>plain</code> Minimal text Scripting <p>Example:</p> <pre><code># Table output for terminal\nmp query sql \"SELECT * FROM events LIMIT 10\" --format table\n\n# CSV for export\nmp query sql \"SELECT * FROM events\" --format csv &gt; events.csv\n\n# JSONL for streaming processing\nmp query sql \"SELECT * FROM events\" --format jsonl | jq '.event_name'\n</code></pre>"},{"location":"cli/#exit-codes","title":"Exit Codes","text":"Code Meaning Exception 0 Success \u2014 1 General error <code>MixpanelDataError</code> 2 Authentication error <code>AuthenticationError</code> 3 Invalid arguments <code>ConfigError</code>, validation errors 4 Resource not found <code>TableNotFoundError</code>, <code>AccountNotFoundError</code> 5 Rate limit exceeded <code>RateLimitError</code> 130 Interrupted Ctrl+C"},{"location":"cli/#environment-variables","title":"Environment Variables","text":"Variable Description <code>MP_USERNAME</code> Service account username <code>MP_SECRET</code> Service account secret <code>MP_PROJECT_ID</code> Project ID <code>MP_REGION</code> Data residency region <code>MP_ACCOUNT</code> Account name to use <code>MP_CONFIG_PATH</code> Override config file path"},{"location":"cli/#examples","title":"Examples","text":""},{"location":"cli/#complete-workflow","title":"Complete Workflow","text":"<pre><code># 1. Set up credentials\nmp auth add production --username sa_... --secret ... --project 12345 --region us\n\n# 2. Explore schema\nmp inspect events\nmp inspect properties --event Purchase\n\n# 3. Fetch data\nmp fetch events --name jan --from 2024-01-01 --to 2024-01-31\n\n# 4. Query locally\nmp query sql \"SELECT event_name, COUNT(*) FROM jan GROUP BY 1\" --format table\n\n# 5. Run live queries\nmp query segmentation --event Purchase --from 2024-01-01 --to 2024-01-31 --format table\n</code></pre>"},{"location":"cli/#piping-and-scripting","title":"Piping and Scripting","text":"<pre><code># Export to file\nmp query sql \"SELECT * FROM events\" --format csv &gt; events.csv\n\n# Process with jq\nmp query segmentation --event Login --from 2024-01-01 --to 2024-01-31 --format json \\\n    | jq '.values.\"$overall\"'\n\n# Count lines\nmp query sql \"SELECT * FROM events\" --format jsonl | wc -l\n</code></pre>"},{"location":"cli/#full-command-reference","title":"Full Command Reference","text":"<p>See Commands for the complete auto-generated reference.</p>"},{"location":"cli/commands/","title":"CLI Commands","text":"<p>Complete reference for the <code>mp</code> command-line interface.</p>"},{"location":"cli/commands/#mp","title":"mp","text":"<p>Mixpanel data CLI - fetch, store, and query analytics data.</p> <p>Usage:</p> <pre><code>mp [OPTIONS] COMMAND [ARGS]...\n</code></pre> <p>Options:</p> <pre><code>  -a, --account TEXT    Account name to use (overrides default).  \\[env var:\n                        MP_ACCOUNT]\n  -q, --quiet           Suppress progress output.\n  -v, --verbose         Enable debug output.\n  --version             Show version and exit.\n  --install-completion  Install completion for the current shell.\n  --show-completion     Show completion for the current shell, to copy it or\n                        customize the installation.\n</code></pre>"},{"location":"cli/commands/#auth","title":"auth","text":"<p>Manage authentication and accounts.</p> <p>Usage:</p> <pre><code>mp auth [OPTIONS] COMMAND [ARGS]...\n</code></pre>"},{"location":"cli/commands/#add","title":"add","text":"<p>Add a new account to the configuration.</p> <p>The secret can be provided via: - Interactive prompt (default, hidden input) - MP_SECRET environment variable (for CI/CD) - --secret-stdin flag to read from stdin (e.g., echo $SECRET | mp auth add ...)</p> <p>Examples:     # Interactive (prompts for secret with hidden input)     mp auth add production -u myuser -p 12345</p> <pre><code># Using environment variable\nMP_SECRET=abc123 mp auth add production -u myuser -p 12345\n\n# Reading secret from stdin\necho \"abc123\" | mp auth add production -u myuser -p 12345 --secret-stdin\n</code></pre> <p>Usage:</p> <pre><code>mp auth add [OPTIONS] NAME\n</code></pre> <p>Options:</p> <pre><code>  NAME                            Account name (identifier).  \\[required]\n  -u, --username TEXT             Service account username.\n  -p, --project TEXT              Project ID.\n  -r, --region TEXT               Region: us, eu, or in.  \\[default: us]\n  -d, --default                   Set as default account.\n  -i, --interactive               Prompt for all credentials.\n  --secret-stdin                  Read secret from stdin.\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#list","title":"list","text":"<p>List all configured accounts.</p> <p>Shows account name, username, project ID, region, and default status.</p> <p>Usage:</p> <pre><code>mp auth list [OPTIONS]\n</code></pre> <p>Options:</p> <pre><code>  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#remove","title":"remove","text":"<p>Remove an account from the configuration.</p> <p>Usage:</p> <pre><code>mp auth remove [OPTIONS] NAME\n</code></pre> <p>Options:</p> <pre><code>  NAME                            Account name to remove.  \\[required]\n  --force                         Skip confirmation prompt.\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#show","title":"show","text":"<p>Show account details (secret is redacted).</p> <p>Usage:</p> <pre><code>mp auth show [OPTIONS] [NAME]\n</code></pre> <p>Options:</p> <pre><code>  [NAME]                          Account name (default if omitted).\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#switch","title":"switch","text":"<p>Set an account as the default.</p> <p>Usage:</p> <pre><code>mp auth switch [OPTIONS] NAME\n</code></pre> <p>Options:</p> <pre><code>  NAME                            Account name to set as default.  \\[required]\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#test","title":"test","text":"<p>Test account credentials by pinging the API.</p> <p>Verifies that the credentials are valid and can access the project.</p> <p>Usage:</p> <pre><code>mp auth test [OPTIONS] [NAME]\n</code></pre> <p>Options:</p> <pre><code>  [NAME]                          Account name to test (default if omitted).\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#fetch","title":"fetch","text":"<p>Fetch data from Mixpanel.</p> <p>Usage:</p> <pre><code>mp fetch [OPTIONS] COMMAND [ARGS]...\n</code></pre>"},{"location":"cli/commands/#events","title":"events","text":"<p>Fetch events from Mixpanel into local storage.</p> <p>Events are stored in a DuckDB table for SQL querying. A progress bar shows fetch progress (disable with --no-progress or --quiet).</p> <p>Use --events to filter by event name (comma-separated list). Use --where for Mixpanel expression filters (e.g., 'properties[\"country\"]==\"US\"').</p> <p>Output shows table name, row count, duration, and date range.</p> <p>Usage:</p> <pre><code>mp fetch events [OPTIONS] [NAME]\n</code></pre> <p>Options:</p> <pre><code>  [NAME]                          Table name for storing events.  \\[default:\n                                  events]\n  --from TEXT                     Start date (YYYY-MM-DD).\n  --to TEXT                       End date (YYYY-MM-DD).\n  -e, --events TEXT               Comma-separated event filter.\n  -w, --where TEXT                Mixpanel filter expression.\n  --replace                       Replace existing table.\n  --no-progress                   Hide progress bar.\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#profiles","title":"profiles","text":"<p>Fetch user profiles from Mixpanel into local storage.</p> <p>Profiles are stored in a DuckDB table for SQL querying. A progress bar shows fetch progress (disable with --no-progress or --quiet).</p> <p>Use --where for Mixpanel expression filters on profile properties.</p> <p>Output shows table name, row count, and fetch duration.</p> <p>Usage:</p> <pre><code>mp fetch profiles [OPTIONS] [NAME]\n</code></pre> <p>Options:</p> <pre><code>  [NAME]                          Table name for storing profiles.  \\[default:\n                                  profiles]\n  -w, --where TEXT                Mixpanel filter expression.\n  --replace                       Replace existing table.\n  --no-progress                   Hide progress bar.\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#inspect","title":"inspect","text":"<p>Inspect schema and local database.</p> <p>Usage:</p> <pre><code>mp inspect [OPTIONS] COMMAND [ARGS]...\n</code></pre>"},{"location":"cli/commands/#cohorts","title":"cohorts","text":"<p>List saved cohorts in Mixpanel project.</p> <p>Usage:</p> <pre><code>mp inspect cohorts [OPTIONS]\n</code></pre> <p>Options:</p> <pre><code>  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#drop","title":"drop","text":"<p>Drop a table from the local database.</p> <p>Usage:</p> <pre><code>mp inspect drop [OPTIONS]\n</code></pre> <p>Options:</p> <pre><code>  -t, --table TEXT                Table name to drop.  \\[required]\n  --force                         Skip confirmation prompt.\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#events_1","title":"events","text":"<p>List all event names from Mixpanel project.</p> <p>Usage:</p> <pre><code>mp inspect events [OPTIONS]\n</code></pre> <p>Options:</p> <pre><code>  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#funnels","title":"funnels","text":"<p>List saved funnels in Mixpanel project.</p> <p>Usage:</p> <pre><code>mp inspect funnels [OPTIONS]\n</code></pre> <p>Options:</p> <pre><code>  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#info","title":"info","text":"<p>Show workspace information.</p> <p>Usage:</p> <pre><code>mp inspect info [OPTIONS]\n</code></pre> <p>Options:</p> <pre><code>  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#properties","title":"properties","text":"<p>List properties for a specific event.</p> <p>Usage:</p> <pre><code>mp inspect properties [OPTIONS]\n</code></pre> <p>Options:</p> <pre><code>  -e, --event TEXT                Event name.  \\[required]\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#schema","title":"schema","text":"<p>Show schema for a table in local database.</p> <p>Lists all columns with their types and nullability constraints.</p> <p>Note: The --sample option is reserved for future implementation.</p> <p>Usage:</p> <pre><code>mp inspect schema [OPTIONS]\n</code></pre> <p>Options:</p> <pre><code>  -t, --table TEXT                Table name.  \\[required]\n  --sample                        Include sample values.\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#tables","title":"tables","text":"<p>List tables in local database.</p> <p>Usage:</p> <pre><code>mp inspect tables [OPTIONS]\n</code></pre> <p>Options:</p> <pre><code>  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#top-events","title":"top-events","text":"<p>List today's top events by count.</p> <p>Usage:</p> <pre><code>mp inspect top-events [OPTIONS]\n</code></pre> <p>Options:</p> <pre><code>  -t, --type TEXT                 Count type: general, unique, average.\n                                  \\[default: general]\n  -l, --limit INTEGER             Maximum events to return.  \\[default: 10]\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#values","title":"values","text":"<p>List sample values for a property.</p> <p>Usage:</p> <pre><code>mp inspect values [OPTIONS]\n</code></pre> <p>Options:</p> <pre><code>  -p, --property TEXT             Property name.  \\[required]\n  -e, --event TEXT                Event name (optional).\n  -l, --limit INTEGER             Maximum values to return.  \\[default: 100]\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#query","title":"query","text":"<p>Query local and live data.</p> <p>Usage:</p> <pre><code>mp query [OPTIONS] COMMAND [ARGS]...\n</code></pre>"},{"location":"cli/commands/#activity-feed","title":"activity-feed","text":"<p>Query user activity feed for specific users.</p> <p>Retrieves the event history for one or more users identified by their distinct_id. Pass comma-separated IDs to --users.</p> <p>Optionally filter by date range with --from and --to. Without date filters, returns recent activity (API default).</p> <p>Output includes distinct_ids queried, optional date range, and events array with each event's name, timestamp, and properties.</p> <p>Usage:</p> <pre><code>mp query activity-feed [OPTIONS]\n</code></pre> <p>Options:</p> <pre><code>  -U, --users TEXT                Comma-separated distinct IDs.  \\[required]\n  --from TEXT                     Start date (YYYY-MM-DD).\n  --to TEXT                       End date (YYYY-MM-DD).\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#event-counts","title":"event-counts","text":"<p>Query event counts over time for multiple events.</p> <p>Compares multiple events on the same time series. Pass comma-separated event names to --events (e.g., --events \"Sign Up,Login,Purchase\").</p> <p>The --type option controls how counts are calculated: - general: Total event occurrences (default) - unique: Unique users who triggered the event - average: Average events per user</p> <p>Output includes events list, date range, and series dict mapping each event name to its date/count series.</p> <p>Usage:</p> <pre><code>mp query event-counts [OPTIONS]\n</code></pre> <p>Options:</p> <pre><code>  -e, --events TEXT               Comma-separated event names.  \\[required]\n  --from TEXT                     Start date (YYYY-MM-DD).  \\[required]\n  --to TEXT                       End date (YYYY-MM-DD).  \\[required]\n  -t, --type TEXT                 Count type: general, unique, average.\n                                  \\[default: general]\n  -u, --unit TEXT                 Time unit: day, week, month.  \\[default:\n                                  day]\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#frequency","title":"frequency","text":"<p>Analyze event frequency distribution (addiction analysis).</p> <p>Shows how many users performed an event N times within each time period. Useful for understanding user engagement depth and \"power user\" distribution.</p> <p>The --addiction-unit controls granularity of frequency buckets (hour or day). For example, with --addiction-unit hour, the data shows how many users performed the event 1 time, 2 times, 3 times, etc. per hour.</p> <p>Output includes date range, units, and data dict mapping dates to arrays of user counts (index 0 = users who did it once, 1 = twice, etc.).</p> <p>Usage:</p> <pre><code>mp query frequency [OPTIONS]\n</code></pre> <p>Options:</p> <pre><code>  --from TEXT                     Start date (YYYY-MM-DD).  \\[required]\n  --to TEXT                       End date (YYYY-MM-DD).  \\[required]\n  -e, --event TEXT                Event name (all events if omitted).\n  -u, --unit TEXT                 Time unit: day, week, month.  \\[default:\n                                  day]\n  --addiction-unit TEXT           Addiction unit: hour, day.  \\[default: hour]\n  -w, --where TEXT                Filter expression.\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#funnel","title":"funnel","text":"<p>Run live funnel analysis against Mixpanel API.</p> <p>Analyzes conversion through a saved funnel's steps. The funnel_id can be found in the Mixpanel UI URL when viewing the funnel, or via 'mp inspect funnels'.</p> <p>Output includes funnel_id, date range, and steps array with each step's event name, count, and conversion_rate (percentage who completed this step).</p> <p>Usage:</p> <pre><code>mp query funnel [OPTIONS] FUNNEL_ID\n</code></pre> <p>Options:</p> <pre><code>  FUNNEL_ID                       Funnel ID.  \\[required]\n  --from TEXT                     Start date (YYYY-MM-DD).  \\[required]\n  --to TEXT                       End date (YYYY-MM-DD).  \\[required]\n  -u, --unit TEXT                 Time unit: day, week, month.\n  -o, --on TEXT                   Property to segment by.\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#insights","title":"insights","text":"<p>Query a saved Insights report by bookmark ID.</p> <p>Retrieves data from a saved Insights report in Mixpanel. The bookmark_id can be found in the URL when viewing an Insights report (the numeric ID after /insights/).</p> <p>Output includes bookmark_id, computed_at timestamp, date_range, headers (column names), and series data matching the saved report configuration.</p> <p>Usage:</p> <pre><code>mp query insights [OPTIONS] BOOKMARK_ID\n</code></pre> <p>Options:</p> <pre><code>  BOOKMARK_ID                     Saved Insights report bookmark ID.\n                                  \\[required]\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#jql","title":"jql","text":"<p>Execute JQL script against Mixpanel API.</p> <p>Script can be provided as a file argument or inline with --script. Parameters can be passed with --param key=value (repeatable).</p> <p>Usage:</p> <pre><code>mp query jql [OPTIONS] [FILE]\n</code></pre> <p>Options:</p> <pre><code>  [FILE]                          JQL script file.\n  -c, --script TEXT               Inline JQL script.\n  -P, --param TEXT                Parameter (key=value).\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#property-counts","title":"property-counts","text":"<p>Query event counts broken down by property values.</p> <p>Shows how event counts vary across different values of a property. For example, --property country shows event counts per country.</p> <p>The --type option controls how counts are calculated: - general: Total event occurrences (default) - unique: Unique users who triggered the event - average: Average events per user</p> <p>The --limit option controls how many property values to return (default 10, ordered by count descending).</p> <p>Output includes event, property name, date range, and series dict mapping each property value to its date/count series.</p> <p>Usage:</p> <pre><code>mp query property-counts [OPTIONS]\n</code></pre> <p>Options:</p> <pre><code>  -e, --event TEXT                Event name.  \\[required]\n  -p, --property TEXT             Property name.  \\[required]\n  --from TEXT                     Start date (YYYY-MM-DD).  \\[required]\n  --to TEXT                       End date (YYYY-MM-DD).  \\[required]\n  -t, --type TEXT                 Count type: general, unique, average.\n                                  \\[default: general]\n  -u, --unit TEXT                 Time unit: day, week, month.  \\[default:\n                                  day]\n  -l, --limit INTEGER             Max property values to return.  \\[default:\n                                  10]\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#retention","title":"retention","text":"<p>Run live retention analysis against Mixpanel API.</p> <p>Measures how many users return after their first action (birth event). Users are grouped into cohorts by when they first did the birth event, then tracked for how many returned to do the return event.</p> <p>The --interval and --intervals options control bucket granularity: --interval is the bucket size (default 1), --intervals is the number of buckets to track (default 10). Combined with --unit, this defines the retention window (e.g., --unit day --interval 1 --intervals 7 tracks daily retention for 7 days).</p> <p>Output includes cohorts array with each cohort's date, user count, and retention percentages for each interval.</p> <p>Usage:</p> <pre><code>mp query retention [OPTIONS]\n</code></pre> <p>Options:</p> <pre><code>  -b, --born TEXT                 Birth event.  \\[required]\n  -r, --return TEXT               Return event.  \\[required]\n  --from TEXT                     Start date (YYYY-MM-DD).  \\[required]\n  --to TEXT                       End date (YYYY-MM-DD).  \\[required]\n  --born-where TEXT               Birth event filter.\n  --return-where TEXT             Return event filter.\n  -i, --interval INTEGER          Bucket size.\n  -n, --intervals INTEGER         Number of buckets.\n  -u, --unit TEXT                 Time unit: day, week, month.  \\[default:\n                                  day]\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#segmentation","title":"segmentation","text":"<p>Run live segmentation query against Mixpanel API.</p> <p>Returns time-series event counts, optionally segmented by a property. Without --on, returns total counts per time period. With --on, breaks down counts by property values (e.g., --on country shows counts per country).</p> <p>Output includes event name, date range, total count, time unit, and a series dict mapping dates to counts (or segments to date/count dicts).</p> <p>Usage:</p> <pre><code>mp query segmentation [OPTIONS]\n</code></pre> <p>Options:</p> <pre><code>  -e, --event TEXT                Event name.  \\[required]\n  --from TEXT                     Start date (YYYY-MM-DD).  \\[required]\n  --to TEXT                       End date (YYYY-MM-DD).  \\[required]\n  -o, --on TEXT                   Property to segment by.\n  -u, --unit TEXT                 Time unit: day, week, month.  \\[default:\n                                  day]\n  -w, --where TEXT                Filter expression.\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#segmentation-average","title":"segmentation-average","text":"<p>Calculate average of numeric property over time.</p> <p>Calculates the mean value of a numeric property across all matching events. Useful for tracking averages like order value, session duration, or scores.</p> <p>For example, --event Purchase --on order_value calculates average order value per time period.</p> <p>Output includes event, property, date range, and results dict mapping dates to the average property value for that period.</p> <p>Usage:</p> <pre><code>mp query segmentation-average [OPTIONS]\n</code></pre> <p>Options:</p> <pre><code>  -e, --event TEXT                Event name.  \\[required]\n  -o, --on TEXT                   Numeric property to average.  \\[required]\n  --from TEXT                     Start date (YYYY-MM-DD).  \\[required]\n  --to TEXT                       End date (YYYY-MM-DD).  \\[required]\n  -u, --unit TEXT                 Time unit: hour, day.  \\[default: day]\n  -w, --where TEXT                Filter expression.\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#segmentation-numeric","title":"segmentation-numeric","text":"<p>Bucket events by numeric property ranges.</p> <p>Groups events into buckets based on a numeric property's value. Mixpanel automatically determines optimal bucket ranges based on the property's value distribution.</p> <p>For example, --on price might create buckets like \"0-10\", \"10-50\", \"50+\".</p> <p>The --type option controls how counts are calculated: - general: Total event occurrences (default) - unique: Unique users who triggered the event - average: Average events per user</p> <p>Output includes event, property, date range, buckets info, and values dict mapping bucket labels to their date/count series.</p> <p>Usage:</p> <pre><code>mp query segmentation-numeric [OPTIONS]\n</code></pre> <p>Options:</p> <pre><code>  -e, --event TEXT                Event name.  \\[required]\n  -o, --on TEXT                   Numeric property to bucket.  \\[required]\n  --from TEXT                     Start date (YYYY-MM-DD).  \\[required]\n  --to TEXT                       End date (YYYY-MM-DD).  \\[required]\n  -t, --type TEXT                 Count type: general, unique, average.\n                                  \\[default: general]\n  -u, --unit TEXT                 Time unit: hour, day.  \\[default: day]\n  -w, --where TEXT                Filter expression.\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#segmentation-sum","title":"segmentation-sum","text":"<p>Calculate sum of numeric property over time.</p> <p>Sums the values of a numeric property across all matching events. Useful for tracking totals like revenue, quantity, or duration.</p> <p>For example, --event Purchase --on revenue calculates total revenue per time period.</p> <p>Output includes event, property, date range, and results dict mapping dates to the sum of property values for that period.</p> <p>Usage:</p> <pre><code>mp query segmentation-sum [OPTIONS]\n</code></pre> <p>Options:</p> <pre><code>  -e, --event TEXT                Event name.  \\[required]\n  -o, --on TEXT                   Numeric property to sum.  \\[required]\n  --from TEXT                     Start date (YYYY-MM-DD).  \\[required]\n  --to TEXT                       End date (YYYY-MM-DD).  \\[required]\n  -u, --unit TEXT                 Time unit: hour, day.  \\[default: day]\n  -w, --where TEXT                Filter expression.\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"cli/commands/#sql","title":"sql","text":"<p>Execute SQL query against local DuckDB database.</p> <p>Query can be provided as an argument or read from a file with --file. Use --scalar when your query returns a single value (e.g., COUNT(*)).</p> <p>Results are returned as a list of row objects by default. With --scalar, returns a single value wrapped in {\"value\": result} for JSON output, or just the raw value for plain output.</p> <p>Usage:</p> <pre><code>mp query sql [OPTIONS] [QUERY]\n</code></pre> <p>Options:</p> <pre><code>  [QUERY]                         SQL query string.\n  -F, --file PATH                 Read query from file.\n  -s, --scalar                    Return single value.\n  -f, --format [json|jsonl|table|csv|plain]\n                                  Output format: json, jsonl, table, csv,\n                                  plain.  \\[default: json]\n</code></pre>"},{"location":"getting-started/configuration/","title":"Configuration","text":"<p>mixpanel_data supports multiple configuration methods for credentials and settings.</p>"},{"location":"getting-started/configuration/#environment-variables","title":"Environment Variables","text":"<p>Set these environment variables to configure credentials:</p> Variable Description Required <code>MP_USERNAME</code> Service account username Yes <code>MP_SECRET</code> Service account secret Yes <code>MP_PROJECT_ID</code> Mixpanel project ID Yes <code>MP_REGION</code> Data residency region (<code>us</code>, <code>eu</code>, <code>in</code>) No (default: <code>us</code>) <code>MP_CONFIG_PATH</code> Override config file location No <code>MP_ACCOUNT</code> Account name to use from config file No <p>Example:</p> <pre><code>export MP_USERNAME=\"sa_abc123...\"\nexport MP_SECRET=\"your-secret-here\"\nexport MP_PROJECT_ID=\"12345\"\nexport MP_REGION=\"us\"\n</code></pre>"},{"location":"getting-started/configuration/#config-file","title":"Config File","text":"<p>For persistent credential storage, use the config file at <code>~/.mp/config.toml</code>:</p> <pre><code>default = \"production\"\n\n[accounts.production]\nusername = \"sa_abc123...\"\nsecret = \"...\"\nproject_id = \"12345\"\nregion = \"us\"\n\n[accounts.staging]\nusername = \"sa_xyz789...\"\nsecret = \"...\"\nproject_id = \"67890\"\nregion = \"eu\"\n\n[accounts.development]\nusername = \"sa_dev456...\"\nsecret = \"...\"\nproject_id = \"11111\"\nregion = \"us\"\n</code></pre>"},{"location":"getting-started/configuration/#managing-accounts-with-cli","title":"Managing Accounts with CLI","text":"<p>Add a new account:</p> <pre><code>mp auth add production \\\n    --username sa_abc123... \\\n    --secret your-secret \\\n    --project 12345 \\\n    --region us\n</code></pre> <p>List configured accounts:</p> <pre><code>mp auth list\n</code></pre> <p>Switch the default account:</p> <pre><code>mp auth switch staging\n</code></pre> <p>Remove an account:</p> <pre><code>mp auth remove development\n</code></pre> <p>Show account details (secrets hidden):</p> <pre><code>mp auth show production\n</code></pre>"},{"location":"getting-started/configuration/#managing-accounts-with-python","title":"Managing Accounts with Python","text":"<pre><code>from mixpanel_data.auth import ConfigManager\n\nconfig = ConfigManager()\n\n# Add account\nconfig.add_account(\n    name=\"production\",\n    username=\"sa_abc123...\",\n    secret=\"your-secret\",\n    project_id=\"12345\",\n    region=\"us\"\n)\n\n# List accounts\naccounts = config.list_accounts()\nfor account in accounts:\n    print(f\"{account.name}: project {account.project_id} ({account.region})\")\n\n# Set default\nconfig.set_default(\"production\")\n\n# Remove account\nconfig.remove_account(\"old_account\")\n</code></pre>"},{"location":"getting-started/configuration/#credential-resolution-order","title":"Credential Resolution Order","text":"<p>When creating a Workspace, credentials are resolved in this order:</p> <ol> <li>Explicit arguments \u2014 <code>Workspace(project_id=..., region=...)</code></li> <li>Environment variables \u2014 <code>MP_USERNAME</code>, <code>MP_SECRET</code>, etc.</li> <li>Named account \u2014 <code>Workspace(account=\"staging\")</code> or <code>MP_ACCOUNT=staging</code></li> <li>Default account \u2014 The account marked as <code>default</code> in config.toml</li> </ol> <p>Example showing resolution:</p> <pre><code>import mixpanel_data as mp\n\n# Uses explicit arguments\nws = mp.Workspace(\n    username=\"sa_...\",\n    secret=\"...\",\n    project_id=\"12345\"\n)\n\n# Uses environment variables (if set)\nws = mp.Workspace()\n\n# Uses named account from config file\nws = mp.Workspace(account=\"staging\")\n</code></pre>"},{"location":"getting-started/configuration/#data-residency-regions","title":"Data Residency Regions","text":"<p>Mixpanel stores data in regional data centers. Use the correct region for your project:</p> Region Code API Endpoint United States <code>us</code> <code>mixpanel.com</code> European Union <code>eu</code> <code>eu.mixpanel.com</code> India <code>in</code> <code>in.mixpanel.com</code> <p>Region Mismatch</p> <p>Using the wrong region will result in authentication errors or empty data.</p>"},{"location":"getting-started/configuration/#workspace-path","title":"Workspace Path","text":"<p>By default, the workspace database is stored at <code>./mixpanel.db</code>. Override with:</p> <pre><code>import mixpanel_data as mp\n\n# Custom path\nws = mp.Workspace(path=\"./data/analytics.db\")\n\n# Ephemeral (temporary, auto-deleted)\nwith mp.Workspace.ephemeral() as ws:\n    # ... work with data\n# Database deleted on exit\n</code></pre> <p>For CLI, use the <code>--db</code> option:</p> <pre><code>mp fetch events --db ./data/my_project.db --from 2024-01-01 --to 2024-01-31\n</code></pre>"},{"location":"getting-started/configuration/#next-steps","title":"Next Steps","text":"<ul> <li>Fetching Data \u2014 Learn about data ingestion</li> <li>API Reference \u2014 Complete API documentation</li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#requirements","title":"Requirements","text":"<ul> <li>Python 3.11 or higher</li> <li>A Mixpanel service account with API access</li> </ul>"},{"location":"getting-started/installation/#installing-with-pip","title":"Installing with pip","text":"<pre><code>pip install mixpanel_data\n</code></pre>"},{"location":"getting-started/installation/#installing-with-uv","title":"Installing with uv","text":"<p>uv is a fast Python package installer:</p> <pre><code>uv pip install mixpanel_data\n</code></pre> <p>Or add to your project:</p> <pre><code>uv add mixpanel_data\n</code></pre>"},{"location":"getting-started/installation/#optional-dependencies","title":"Optional Dependencies","text":""},{"location":"getting-started/installation/#documentation-tools","title":"Documentation Tools","text":"<p>If you want to build the documentation locally:</p> <pre><code>pip install mixpanel_data[docs]\n</code></pre>"},{"location":"getting-started/installation/#verifying-installation","title":"Verifying Installation","text":"<p>After installation, verify the CLI is available:</p> <pre><code>mp --version\n</code></pre> <p>You should see output like:</p> <pre><code>mixpanel_data 0.1.0\n</code></pre> <p>Test the Python import:</p> <pre><code>import mixpanel_data as mp\nprint(mp.__version__)\n</code></pre>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start \u2014 Set up credentials and run your first query</li> <li>Configuration \u2014 Learn about environment variables and config files</li> </ul>"},{"location":"getting-started/quickstart/","title":"Quick Start","text":"<p>This guide walks you through your first queries with mixpanel_data in about 5 minutes.</p>"},{"location":"getting-started/quickstart/#prerequisites","title":"Prerequisites","text":"<p>You'll need:</p> <ul> <li>mixpanel_data installed (<code>pip install mixpanel_data</code>)</li> <li>A Mixpanel service account with username, secret, and project ID</li> <li>Your project's data residency region (us, eu, or in)</li> </ul>"},{"location":"getting-started/quickstart/#step-1-set-up-credentials","title":"Step 1: Set Up Credentials","text":""},{"location":"getting-started/quickstart/#option-a-environment-variables","title":"Option A: Environment Variables","text":"<pre><code>export MP_USERNAME=\"sa_abc123...\"\nexport MP_SECRET=\"your-secret-here\"\nexport MP_PROJECT_ID=\"12345\"\nexport MP_REGION=\"us\"\n</code></pre>"},{"location":"getting-started/quickstart/#option-b-using-the-cli","title":"Option B: Using the CLI","text":"<pre><code>mp auth add production \\\n    --username sa_abc123... \\\n    --secret your-secret-here \\\n    --project 12345 \\\n    --region us\n</code></pre> <p>This stores credentials in <code>~/.mp/config.toml</code> and sets <code>production</code> as the default account.</p>"},{"location":"getting-started/quickstart/#step-2-test-your-connection","title":"Step 2: Test Your Connection","text":"<p>Verify credentials are working:</p> CLIPython <pre><code>mp auth test\n</code></pre> <pre><code>import mixpanel_data as mp\n\nws = mp.Workspace()\nws.test_credentials()  # Raises AuthenticationError if invalid\n</code></pre>"},{"location":"getting-started/quickstart/#step-3-explore-your-data","title":"Step 3: Explore Your Data","text":"<p>Discover what events exist in your project:</p> CLIPython <pre><code>mp inspect events\n</code></pre> <pre><code>import mixpanel_data as mp\n\nws = mp.Workspace()\nevents = ws.events()\nprint(events)  # ['Login', 'Purchase', 'Signup', ...]\n</code></pre>"},{"location":"getting-started/quickstart/#step-4-fetch-events-to-local-storage","title":"Step 4: Fetch Events to Local Storage","text":"<p>Fetch a month of events into a local DuckDB database:</p> CLIPython <pre><code>mp fetch events --name jan_events --from 2024-01-01 --to 2024-01-31\n</code></pre> <pre><code>import mixpanel_data as mp\n\nws = mp.Workspace()\nresult = ws.fetch_events(\n    name=\"jan_events\",\n    from_date=\"2024-01-01\",\n    to_date=\"2024-01-31\"\n)\nprint(f\"Fetched {result.row_count} events in {result.duration_seconds:.1f}s\")\n</code></pre>"},{"location":"getting-started/quickstart/#step-5-query-with-sql","title":"Step 5: Query with SQL","text":"<p>Analyze the data with SQL:</p> CLIPython <pre><code>mp query sql \"SELECT event_name, COUNT(*) as count FROM jan_events GROUP BY 1 ORDER BY 2 DESC\" --format table\n</code></pre> <pre><code>import mixpanel_data as mp\n\nws = mp.Workspace()\n\n# Get results as DataFrame\ndf = ws.sql(\"\"\"\n    SELECT\n        event_name,\n        COUNT(*) as count\n    FROM jan_events\n    GROUP BY 1\n    ORDER BY 2 DESC\n\"\"\")\nprint(df)\n</code></pre>"},{"location":"getting-started/quickstart/#step-6-run-live-queries","title":"Step 6: Run Live Queries","text":"<p>For real-time analytics, query Mixpanel directly:</p> CLIPython <pre><code>mp query segmentation --event Purchase --from 2024-01-01 --to 2024-01-31 --format table\n</code></pre> <pre><code>import mixpanel_data as mp\n\nws = mp.Workspace()\n\nresult = ws.segmentation(\n    event=\"Purchase\",\n    from_date=\"2024-01-01\",\n    to_date=\"2024-01-31\"\n)\n\n# Access as DataFrame\nprint(result.df)\n</code></pre>"},{"location":"getting-started/quickstart/#using-ephemeral-workspaces","title":"Using Ephemeral Workspaces","text":"<p>For one-off analysis without persisting data:</p> <pre><code>import mixpanel_data as mp\n\nwith mp.Workspace.ephemeral() as ws:\n    ws.fetch_events(\"events\", from_date=\"2024-01-01\", to_date=\"2024-01-07\")\n    total = ws.sql_scalar(\"SELECT COUNT(*) FROM events\")\n    print(f\"Total events: {total}\")\n# Database automatically deleted when context exits\n</code></pre>"},{"location":"getting-started/quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration \u2014 Multiple accounts and advanced settings</li> <li>Fetching Data \u2014 Filtering and progress callbacks</li> <li>SQL Queries \u2014 DuckDB JSON syntax and patterns</li> <li>Live Analytics \u2014 Segmentation, funnels, retention</li> </ul>"},{"location":"guide/discovery/","title":"Data Discovery","text":"<p>Explore your Mixpanel project's schema before writing queries. Discovery results are cached for the session.</p>"},{"location":"guide/discovery/#listing-events","title":"Listing Events","text":"<p>Get all event names in your project:</p> PythonCLI <pre><code>import mixpanel_data as mp\n\nws = mp.Workspace()\n\nevents = ws.events()\nprint(events)  # ['Login', 'Purchase', 'Signup', ...]\n</code></pre> <pre><code>mp inspect events\n</code></pre> <p>Events are returned sorted alphabetically.</p>"},{"location":"guide/discovery/#listing-properties","title":"Listing Properties","text":"<p>Get properties for a specific event:</p> PythonCLI <pre><code>properties = ws.properties(\"Purchase\")\nprint(properties)  # ['amount', 'country', 'product_id', ...]\n</code></pre> <pre><code>mp inspect properties --event Purchase\n</code></pre> <p>Properties include both event-specific and common properties.</p>"},{"location":"guide/discovery/#property-values","title":"Property Values","text":"<p>Sample values for a property:</p> PythonCLI <pre><code># Sample values for a property\nvalues = ws.property_values(\"country\", event=\"Purchase\")\nprint(values)  # ['US', 'UK', 'DE', 'FR', ...]\n\n# Limit results\nvalues = ws.property_values(\"country\", event=\"Purchase\", limit=5)\n</code></pre> <pre><code>mp inspect values --property country --event Purchase --limit 10\n</code></pre>"},{"location":"guide/discovery/#saved-funnels","title":"Saved Funnels","text":"<p>List funnels defined in Mixpanel:</p> PythonCLI <pre><code>funnels = ws.funnels()\nfor f in funnels:\n    print(f\"{f.funnel_id}: {f.name}\")\n</code></pre> <pre><code>mp inspect funnels\n</code></pre>"},{"location":"guide/discovery/#funnelinfo","title":"FunnelInfo","text":"<pre><code>f.funnel_id  # 12345\nf.name       # \"Checkout Funnel\"\n</code></pre>"},{"location":"guide/discovery/#saved-cohorts","title":"Saved Cohorts","text":"<p>List cohorts defined in Mixpanel:</p> PythonCLI <pre><code>cohorts = ws.cohorts()\nfor c in cohorts:\n    print(f\"{c.id}: {c.name} ({c.count} users)\")\n</code></pre> <pre><code>mp inspect cohorts\n</code></pre>"},{"location":"guide/discovery/#savedcohort","title":"SavedCohort","text":"<pre><code>c.id           # 12345\nc.name         # \"Power Users\"\nc.count        # 5000\nc.description  # \"Users with 10+ logins\"\nc.created      # datetime\nc.is_visible   # True\n</code></pre>"},{"location":"guide/discovery/#top-events","title":"Top Events","text":"<p>Get today's most active events:</p> PythonCLI <pre><code># General top events\ntop = ws.top_events(type=\"general\")\nfor event in top:\n    print(f\"{event.event}: {event.count} ({event.percent_change:+.1f}%)\")\n\n# Average top events\ntop = ws.top_events(type=\"average\", limit=5)\n</code></pre> <pre><code>mp inspect top-events --type general --limit 10\n</code></pre>"},{"location":"guide/discovery/#topevent","title":"TopEvent","text":"<pre><code>event.event           # \"Login\"\nevent.count           # 15000\nevent.percent_change  # 12.5 (compared to yesterday)\n</code></pre> <p>Not Cached</p> <p>Unlike other discovery methods, <code>top_events()</code> always makes an API call since it returns real-time data.</p>"},{"location":"guide/discovery/#caching","title":"Caching","text":"<p>Discovery results are cached for the lifetime of the Workspace:</p> <pre><code>ws = mp.Workspace()\n\n# First call hits the API\nevents1 = ws.events()\n\n# Second call returns cached result (instant)\nevents2 = ws.events()\n\n# Clear cache to force refresh\nws.clear_discovery_cache()\n\n# Now hits API again\nevents3 = ws.events()\n</code></pre>"},{"location":"guide/discovery/#local-table-discovery","title":"Local Table Discovery","text":"<p>Inspect tables in your local database:</p>"},{"location":"guide/discovery/#list-tables","title":"List Tables","text":"PythonCLI <pre><code>tables = ws.tables()\nfor t in tables:\n    print(f\"{t.name}: {t.row_count} rows ({t.type})\")\n</code></pre> <pre><code>mp inspect tables\n</code></pre>"},{"location":"guide/discovery/#table-schema","title":"Table Schema","text":"PythonCLI <pre><code>schema = ws.schema(\"jan_events\")\nfor col in schema.columns:\n    print(f\"{col.name}: {col.type} (nullable: {col.nullable})\")\n</code></pre> <pre><code>mp inspect schema --table jan_events\n</code></pre>"},{"location":"guide/discovery/#workspace-info","title":"Workspace Info","text":"PythonCLI <pre><code>info = ws.info()\nprint(f\"Database: {info.path}\")\nprint(f\"Project: {info.project_id} ({info.region})\")\nprint(f\"Account: {info.account}\")\nprint(f\"Tables: {len(info.tables)}\")\nprint(f\"Size: {info.size_mb:.1f} MB\")\n</code></pre> <pre><code>mp inspect info\n</code></pre>"},{"location":"guide/discovery/#discovery-workflow","title":"Discovery Workflow","text":"<p>A typical discovery workflow before analysis:</p> <pre><code>import mixpanel_data as mp\n\nws = mp.Workspace()\n\n# 1. What events exist?\nprint(\"Events:\")\nfor event in ws.events()[:10]:\n    print(f\"  - {event}\")\n\n# 2. What properties does Purchase have?\nprint(\"\\nPurchase properties:\")\nfor prop in ws.properties(\"Purchase\"):\n    print(f\"  - {prop}\")\n\n# 3. What values does 'country' have?\nprint(\"\\nCountry values:\")\nfor value in ws.property_values(\"country\", event=\"Purchase\", limit=10):\n    print(f\"  - {value}\")\n\n# 4. What funnels are defined?\nprint(\"\\nFunnels:\")\nfor f in ws.funnels():\n    print(f\"  - {f.name} (ID: {f.funnel_id})\")\n\n# 5. Now fetch and analyze\nws.fetch_events(\"purchases\", from_date=\"2024-01-01\", to_date=\"2024-01-31\",\n                events=[\"Purchase\"])\n\ndf = ws.sql(\"\"\"\n    SELECT properties-&gt;&gt;'$.country' as country, COUNT(*) as count\n    FROM purchases\n    GROUP BY 1\n    ORDER BY 2 DESC\n\"\"\")\nprint(df)\n</code></pre>"},{"location":"guide/discovery/#next-steps","title":"Next Steps","text":"<ul> <li>Fetching Data \u2014 Fetch events for local analysis</li> <li>SQL Queries \u2014 Query with SQL</li> <li>API Reference \u2014 Complete API documentation</li> </ul>"},{"location":"guide/fetching/","title":"Fetching Data","text":"<p>Fetch events and user profiles from Mixpanel into a local DuckDB database for fast, repeated SQL queries.</p>"},{"location":"guide/fetching/#fetching-events","title":"Fetching Events","text":""},{"location":"guide/fetching/#basic-usage","title":"Basic Usage","text":"<p>Fetch all events for a date range:</p> PythonCLI <pre><code>import mixpanel_data as mp\n\nws = mp.Workspace()\nresult = ws.fetch_events(\n    name=\"jan_events\",\n    from_date=\"2024-01-01\",\n    to_date=\"2024-01-31\"\n)\n\nprint(f\"Fetched {result.row_count} events\")\nprint(f\"Duration: {result.duration_seconds:.1f}s\")\n</code></pre> <pre><code>mp fetch events --name jan_events --from 2024-01-01 --to 2024-01-31\n</code></pre>"},{"location":"guide/fetching/#filtering-events","title":"Filtering Events","text":"<p>Fetch specific event types:</p> PythonCLI <pre><code>result = ws.fetch_events(\n    name=\"purchases\",\n    from_date=\"2024-01-01\",\n    to_date=\"2024-01-31\",\n    events=[\"Purchase\", \"Checkout Started\"]\n)\n</code></pre> <pre><code>mp fetch events --name purchases --from 2024-01-01 --to 2024-01-31 \\\n    --event Purchase --event \"Checkout Started\"\n</code></pre>"},{"location":"guide/fetching/#using-where-clauses","title":"Using Where Clauses","text":"<p>Filter with Mixpanel expression syntax:</p> PythonCLI <pre><code>result = ws.fetch_events(\n    name=\"premium_purchases\",\n    from_date=\"2024-01-01\",\n    to_date=\"2024-01-31\",\n    where='properties[\"plan\"] == \"premium\"'\n)\n</code></pre> <pre><code>mp fetch events --name premium_purchases --from 2024-01-01 --to 2024-01-31 \\\n    --where 'properties[\"plan\"] == \"premium\"'\n</code></pre>"},{"location":"guide/fetching/#progress-tracking","title":"Progress Tracking","text":"<p>Monitor fetch progress with a callback:</p> <pre><code>def on_progress(count: int) -&gt; None:\n    print(f\"Fetched {count} events...\")\n\nresult = ws.fetch_events(\n    name=\"events\",\n    from_date=\"2024-01-01\",\n    to_date=\"2024-01-31\",\n    progress_callback=on_progress\n)\n</code></pre> <p>The CLI automatically displays a progress bar.</p>"},{"location":"guide/fetching/#fetching-profiles","title":"Fetching Profiles","text":"<p>Fetch user profiles into local storage:</p> PythonCLI <pre><code>result = ws.fetch_profiles(name=\"users\")\nprint(f\"Fetched {result.row_count} profiles\")\n</code></pre> <pre><code>mp fetch profiles --name users\n</code></pre>"},{"location":"guide/fetching/#filtering-profiles","title":"Filtering Profiles","text":"<p>Use Mixpanel expression syntax:</p> PythonCLI <pre><code>result = ws.fetch_profiles(\n    name=\"premium_users\",\n    where='properties[\"plan\"] == \"premium\"'\n)\n</code></pre> <pre><code>mp fetch profiles --name premium_users \\\n    --where 'properties[\"plan\"] == \"premium\"'\n</code></pre>"},{"location":"guide/fetching/#table-naming","title":"Table Naming","text":"<p>Tables are stored with the name you provide:</p> <pre><code>ws.fetch_events(name=\"jan_events\", ...)   # Creates table: jan_events\nws.fetch_events(name=\"feb_events\", ...)   # Creates table: feb_events\nws.fetch_profiles(name=\"users\")            # Creates table: users\n</code></pre> <p>Table Names Must Be Unique</p> <p>Fetching to an existing table name raises <code>TableExistsError</code>. Drop the table first or use a different name.</p>"},{"location":"guide/fetching/#table-management","title":"Table Management","text":""},{"location":"guide/fetching/#listing-tables","title":"Listing Tables","text":"<pre><code>tables = ws.tables()\nfor table in tables:\n    print(f\"{table.name}: {table.row_count} rows ({table.type})\")\n</code></pre>"},{"location":"guide/fetching/#viewing-table-schema","title":"Viewing Table Schema","text":"<pre><code>schema = ws.schema(\"jan_events\")\nfor col in schema.columns:\n    print(f\"{col.name}: {col.type}\")\n</code></pre>"},{"location":"guide/fetching/#dropping-tables","title":"Dropping Tables","text":"<pre><code>ws.drop(\"jan_events\")  # Drop single table\nws.drop_all()          # Drop all tables\n</code></pre>"},{"location":"guide/fetching/#fetchresult","title":"FetchResult","text":"<p>Both <code>fetch_events()</code> and <code>fetch_profiles()</code> return a <code>FetchResult</code>:</p> <pre><code>result = ws.fetch_events(...)\n\n# Attributes\nresult.table_name       # \"jan_events\"\nresult.row_count        # 125000\nresult.duration_seconds # 45.2\n\n# Metadata\nresult.metadata.from_date    # \"2024-01-01\"\nresult.metadata.to_date      # \"2024-01-31\"\nresult.metadata.events       # [\"Purchase\", \"Signup\"] or None\nresult.metadata.where        # 'properties[\"plan\"]...' or None\nresult.metadata.fetched_at   # datetime\n\n# Serialization\nresult.to_dict()  # JSON-serializable dict\n</code></pre>"},{"location":"guide/fetching/#event-table-schema","title":"Event Table Schema","text":"<p>Fetched events have this schema:</p> Column Type Description <code>event_id</code> VARCHAR Unique event identifier <code>event_name</code> VARCHAR Event name <code>event_time</code> TIMESTAMP When the event occurred <code>distinct_id</code> VARCHAR User identifier <code>insert_id</code> VARCHAR Deduplication ID <code>properties</code> JSON All event properties"},{"location":"guide/fetching/#profile-table-schema","title":"Profile Table Schema","text":"<p>Fetched profiles have this schema:</p> Column Type Description <code>distinct_id</code> VARCHAR User identifier (primary key) <code>properties</code> JSON All profile properties"},{"location":"guide/fetching/#best-practices","title":"Best Practices","text":""},{"location":"guide/fetching/#chunk-large-date-ranges","title":"Chunk Large Date Ranges","text":"<p>For very large datasets, fetch in chunks:</p> <pre><code>import datetime\n\nstart = datetime.date(2024, 1, 1)\nend = datetime.date(2024, 12, 31)\n\ncurrent = start\nwhile current &lt; end:\n    chunk_end = min(current + datetime.timedelta(days=30), end)\n    table_name = f\"events_{current.strftime('%Y%m')}\"\n\n    ws.fetch_events(\n        name=table_name,\n        from_date=str(current),\n        to_date=str(chunk_end)\n    )\n\n    current = chunk_end + datetime.timedelta(days=1)\n</code></pre>"},{"location":"guide/fetching/#use-ephemeral-workspaces-for-one-off-analysis","title":"Use Ephemeral Workspaces for One-Off Analysis","text":"<pre><code>with mp.Workspace.ephemeral() as ws:\n    ws.fetch_events(\"events\", from_date=\"2024-01-01\", to_date=\"2024-01-07\")\n    result = ws.sql(\"SELECT event_name, COUNT(*) FROM events GROUP BY 1\")\n# Database automatically deleted\n</code></pre>"},{"location":"guide/fetching/#next-steps","title":"Next Steps","text":"<ul> <li>SQL Queries \u2014 Query your fetched data with SQL</li> <li>Live Analytics \u2014 Query Mixpanel directly for real-time data</li> </ul>"},{"location":"guide/live-analytics/","title":"Live Analytics","text":"<p>Query Mixpanel's analytics APIs directly for real-time data without fetching to local storage.</p>"},{"location":"guide/live-analytics/#when-to-use-live-queries","title":"When to Use Live Queries","text":"<p>Use live queries when:</p> <ul> <li>You need the most current data</li> <li>You're running one-off analysis</li> <li>The query is already optimized by Mixpanel (segmentation, funnels, retention)</li> <li>You want to leverage Mixpanel's pre-computed aggregations</li> </ul> <p>Use local queries when:</p> <ul> <li>You need to run many queries over the same data</li> <li>You need custom SQL logic</li> <li>You want to minimize API calls</li> <li>Context window preservation matters (for AI agents)</li> </ul>"},{"location":"guide/live-analytics/#segmentation","title":"Segmentation","text":"<p>Time-series event counts with optional property segmentation:</p> PythonCLI <pre><code>import mixpanel_data as mp\n\nws = mp.Workspace()\n\n# Simple count over time\nresult = ws.segmentation(\n    event=\"Purchase\",\n    from_date=\"2024-01-01\",\n    to_date=\"2024-01-31\"\n)\n\n# Segment by property\nresult = ws.segmentation(\n    event=\"Purchase\",\n    from_date=\"2024-01-01\",\n    to_date=\"2024-01-31\",\n    on=\"properties.country\"\n)\n\n# With filtering\nresult = ws.segmentation(\n    event=\"Purchase\",\n    from_date=\"2024-01-01\",\n    to_date=\"2024-01-31\",\n    on=\"properties.country\",\n    where='properties[\"plan\"] == \"premium\"',\n    unit=\"week\"  # day, week, month\n)\n\n# Access as DataFrame\nprint(result.df)\n</code></pre> <pre><code># Simple segmentation\nmp query segmentation --event Purchase --from 2024-01-01 --to 2024-01-31\n\n# With property breakdown\nmp query segmentation --event Purchase --from 2024-01-01 --to 2024-01-31 \\\n    --on country --format table\n</code></pre>"},{"location":"guide/live-analytics/#segmentationresult","title":"SegmentationResult","text":"<pre><code>result.event          # \"Purchase\"\nresult.dates          # [\"2024-01-01\", \"2024-01-02\", ...]\nresult.values         # {\"$overall\": [100, 150, ...]}\nresult.segments       # [\"US\", \"UK\", \"DE\", ...]\nresult.df             # pandas DataFrame\nresult.to_dict()      # JSON-serializable dict\n</code></pre>"},{"location":"guide/live-analytics/#funnels","title":"Funnels","text":"<p>Analyze conversion through a sequence of steps:</p> PythonCLI <pre><code># First, find your funnel ID\nfunnels = ws.funnels()\nfor f in funnels:\n    print(f\"{f.funnel_id}: {f.name}\")\n\n# Query the funnel\nresult = ws.funnel(\n    funnel_id=12345,\n    from_date=\"2024-01-01\",\n    to_date=\"2024-01-31\"\n)\n\n# With segmentation\nresult = ws.funnel(\n    funnel_id=12345,\n    from_date=\"2024-01-01\",\n    to_date=\"2024-01-31\",\n    on=\"properties.country\"\n)\n\n# Access results\nfor step in result.steps:\n    print(f\"{step.event}: {step.count} ({step.conversion_rate:.1%})\")\n</code></pre> <pre><code># List available funnels\nmp inspect funnels\n\n# Query a funnel\nmp query funnel --funnel-id 12345 --from 2024-01-01 --to 2024-01-31 --format table\n</code></pre>"},{"location":"guide/live-analytics/#funnelresult","title":"FunnelResult","text":"<pre><code>result.funnel_id       # 12345\nresult.steps           # [FunnelStep, ...]\nresult.overall_rate    # 0.15 (15% overall conversion)\nresult.df              # DataFrame with step metrics\n\n# Each step\nstep.event             # \"Checkout Started\"\nstep.count             # 5000\nstep.conversion_rate   # 0.85\nstep.avg_time          # timedelta or None\n</code></pre>"},{"location":"guide/live-analytics/#retention","title":"Retention","text":"<p>Cohort-based retention analysis:</p> PythonCLI <pre><code>result = ws.retention(\n    born_event=\"Signup\",\n    return_event=\"Login\",\n    from_date=\"2024-01-01\",\n    to_date=\"2024-01-31\",\n    born_where='properties[\"source\"] == \"organic\"',\n    unit=\"week\"\n)\n\n# Access cohorts\nfor cohort in result.cohorts:\n    print(f\"{cohort.date}: {cohort.size} users\")\n    print(f\"  Retention: {cohort.retention_rates}\")\n</code></pre> <pre><code>mp query retention \\\n    --born-event Signup \\\n    --return-event Login \\\n    --from 2024-01-01 \\\n    --to 2024-01-31 \\\n    --unit week \\\n    --format table\n</code></pre>"},{"location":"guide/live-analytics/#retentionresult","title":"RetentionResult","text":"<pre><code>result.born_event      # \"Signup\"\nresult.return_event    # \"Login\"\nresult.cohorts         # [CohortInfo, ...]\nresult.df              # DataFrame with retention matrix\n\n# Each cohort\ncohort.date            # \"2024-01-01\"\ncohort.size            # 1000\ncohort.retention_rates # [1.0, 0.45, 0.32, 0.28, ...]\n</code></pre>"},{"location":"guide/live-analytics/#jql-javascript-query-language","title":"JQL (JavaScript Query Language)","text":"<p>Run custom JQL scripts for advanced analysis:</p> PythonCLI <pre><code>script = \"\"\"\nfunction main() {\n    return Events({\n        from_date: params.from_date,\n        to_date: params.to_date,\n        event_selectors: [{event: \"Purchase\"}]\n    })\n    .groupBy([\"properties.country\"], mixpanel.reducer.count())\n    .sortDesc(\"value\")\n    .take(10);\n}\n\"\"\"\n\nresult = ws.jql(\n    script=script,\n    params={\"from_date\": \"2024-01-01\", \"to_date\": \"2024-01-31\"}\n)\n\nprint(result.data)  # Raw JQL result\nprint(result.df)    # As DataFrame\n</code></pre> <pre><code># From file\nmp query jql --script ./query.js --param from_date=2024-01-01 --param to_date=2024-01-31\n\n# Inline\nmp query jql --script 'function main() { return Events({...}).count(); }'\n</code></pre>"},{"location":"guide/live-analytics/#event-counts","title":"Event Counts","text":"<p>Multi-event time series comparison:</p> PythonCLI <pre><code>result = ws.event_counts(\n    events=[\"Signup\", \"Purchase\", \"Churn\"],\n    from_date=\"2024-01-01\",\n    to_date=\"2024-01-31\",\n    unit=\"day\"\n)\n\n# DataFrame with columns: date, Signup, Purchase, Churn\nprint(result.df)\n</code></pre> <pre><code>mp query event-counts \\\n    --event Signup --event Purchase --event Churn \\\n    --from 2024-01-01 --to 2024-01-31 \\\n    --format table\n</code></pre>"},{"location":"guide/live-analytics/#property-counts","title":"Property Counts","text":"<p>Break down an event by property values:</p> PythonCLI <pre><code>result = ws.property_counts(\n    event=\"Purchase\",\n    property_name=\"country\",\n    from_date=\"2024-01-01\",\n    to_date=\"2024-01-31\",\n    limit=10\n)\n\nprint(result.df)  # Columns: date, US, UK, DE, ...\n</code></pre> <pre><code>mp query property-counts \\\n    --event Purchase \\\n    --property country \\\n    --from 2024-01-01 --to 2024-01-31 \\\n    --limit 10 \\\n    --format table\n</code></pre>"},{"location":"guide/live-analytics/#activity-feed","title":"Activity Feed","text":"<p>Get a user's event history:</p> PythonCLI <pre><code>result = ws.activity_feed(\n    distinct_ids=[\"user_123\", \"user_456\"],\n    from_date=\"2024-01-01\",\n    to_date=\"2024-01-31\"\n)\n\nfor event in result.events:\n    print(f\"{event.time}: {event.event}\")\n    print(f\"  Properties: {event.properties}\")\n</code></pre> <pre><code>mp query activity-feed \\\n    --distinct-id user_123 \\\n    --from 2024-01-01 --to 2024-01-31 \\\n    --format json\n</code></pre>"},{"location":"guide/live-analytics/#insights","title":"Insights","text":"<p>Query saved Insights reports:</p> PythonCLI <pre><code>result = ws.insights(bookmark_id=12345)\nprint(result.df)\n</code></pre> <pre><code>mp query insights --bookmark-id 12345 --format table\n</code></pre>"},{"location":"guide/live-analytics/#frequency-analysis","title":"Frequency Analysis","text":"<p>Analyze how often users perform an event:</p> PythonCLI <pre><code>result = ws.frequency(\n    event=\"Login\",\n    from_date=\"2024-01-01\",\n    to_date=\"2024-01-31\",\n    unit=\"month\",\n    addiction_unit=\"day\"\n)\n\n# Distribution of logins per day\nprint(result.buckets)  # {\"0\": 1000, \"1\": 500, \"2-3\": 300, ...}\n</code></pre> <pre><code>mp query frequency \\\n    --event Login \\\n    --from 2024-01-01 --to 2024-01-31 \\\n    --format table\n</code></pre>"},{"location":"guide/live-analytics/#numeric-aggregations","title":"Numeric Aggregations","text":"<p>Aggregate numeric properties:</p>"},{"location":"guide/live-analytics/#bucketing","title":"Bucketing","text":"<pre><code>result = ws.segmentation_numeric(\n    event=\"Purchase\",\n    from_date=\"2024-01-01\",\n    to_date=\"2024-01-31\",\n    on=\"properties.amount\",\n    type=\"general\"  # or \"linear\", \"logarithmic\"\n)\n</code></pre>"},{"location":"guide/live-analytics/#sum","title":"Sum","text":"<pre><code>result = ws.segmentation_sum(\n    event=\"Purchase\",\n    from_date=\"2024-01-01\",\n    to_date=\"2024-01-31\",\n    on=\"properties.amount\"\n)\n# Total revenue per time period\n</code></pre>"},{"location":"guide/live-analytics/#average","title":"Average","text":"<pre><code>result = ws.segmentation_average(\n    event=\"Purchase\",\n    from_date=\"2024-01-01\",\n    to_date=\"2024-01-31\",\n    on=\"properties.amount\"\n)\n# Average purchase amount per time period\n</code></pre>"},{"location":"guide/live-analytics/#next-steps","title":"Next Steps","text":"<ul> <li>Data Discovery \u2014 Explore your event schema</li> <li>API Reference \u2014 Complete API documentation</li> </ul>"},{"location":"guide/sql-queries/","title":"Local SQL Queries","text":"<p>Query your fetched data with SQL using DuckDB's powerful analytical engine.</p>"},{"location":"guide/sql-queries/#basic-queries","title":"Basic Queries","text":""},{"location":"guide/sql-queries/#execute-and-get-dataframe","title":"Execute and Get DataFrame","text":"<pre><code>import mixpanel_data as mp\n\nws = mp.Workspace()\n\ndf = ws.sql(\"\"\"\n    SELECT\n        event_name,\n        COUNT(*) as count\n    FROM jan_events\n    GROUP BY 1\n    ORDER BY 2 DESC\n\"\"\")\n\nprint(df)\n</code></pre>"},{"location":"guide/sql-queries/#get-single-value","title":"Get Single Value","text":"<pre><code>total = ws.sql_scalar(\"SELECT COUNT(*) FROM jan_events\")\nprint(f\"Total events: {total}\")\n</code></pre>"},{"location":"guide/sql-queries/#get-rows-as-tuples","title":"Get Rows as Tuples","text":"<pre><code>rows = ws.sql_rows(\"\"\"\n    SELECT event_name, COUNT(*)\n    FROM jan_events\n    GROUP BY 1\n    LIMIT 5\n\"\"\")\n\nfor event_name, count in rows:\n    print(f\"{event_name}: {count}\")\n</code></pre>"},{"location":"guide/sql-queries/#duckdb-json-syntax","title":"DuckDB JSON Syntax","text":"<p>Mixpanel properties are stored as JSON columns. Use DuckDB's JSON operators to access them.</p>"},{"location":"guide/sql-queries/#extract-string-property","title":"Extract String Property","text":"<pre><code>SELECT properties-&gt;&gt;'$.country' as country\nFROM jan_events\n</code></pre>"},{"location":"guide/sql-queries/#extract-and-cast-numeric","title":"Extract and Cast Numeric","text":"<pre><code>SELECT CAST(properties-&gt;&gt;'$.amount' AS DECIMAL) as amount\nFROM jan_events\n</code></pre>"},{"location":"guide/sql-queries/#filter-on-property","title":"Filter on Property","text":"<pre><code>SELECT *\nFROM jan_events\nWHERE properties-&gt;&gt;'$.plan' = 'premium'\n</code></pre>"},{"location":"guide/sql-queries/#nested-property-access","title":"Nested Property Access","text":"<pre><code>SELECT properties-&gt;&gt;'$.user.email' as email\nFROM jan_events\n</code></pre>"},{"location":"guide/sql-queries/#check-property-exists","title":"Check Property Exists","text":"<pre><code>SELECT *\nFROM jan_events\nWHERE properties-&gt;&gt;'$.coupon_code' IS NOT NULL\n</code></pre>"},{"location":"guide/sql-queries/#array-properties","title":"Array Properties","text":"<pre><code>-- Array length\nSELECT json_array_length(properties-&gt;'$.items') as item_count\nFROM jan_events\n\n-- Array element\nSELECT properties-&gt;'$.items'-&gt;&gt;0 as first_item\nFROM jan_events\n</code></pre>"},{"location":"guide/sql-queries/#common-query-patterns","title":"Common Query Patterns","text":""},{"location":"guide/sql-queries/#daily-event-counts","title":"Daily Event Counts","text":"<pre><code>SELECT\n    DATE_TRUNC('day', event_time) as day,\n    COUNT(*) as count\nFROM jan_events\nGROUP BY 1\nORDER BY 1\n</code></pre>"},{"location":"guide/sql-queries/#events-by-user","title":"Events by User","text":"<pre><code>SELECT\n    distinct_id,\n    COUNT(*) as event_count,\n    MIN(event_time) as first_seen,\n    MAX(event_time) as last_seen\nFROM jan_events\nGROUP BY 1\nORDER BY 2 DESC\nLIMIT 10\n</code></pre>"},{"location":"guide/sql-queries/#property-distribution","title":"Property Distribution","text":"<pre><code>SELECT\n    properties-&gt;&gt;'$.country' as country,\n    COUNT(*) as count,\n    ROUND(100.0 * COUNT(*) / SUM(COUNT(*)) OVER (), 2) as pct\nFROM jan_events\nWHERE event_name = 'Purchase'\nGROUP BY 1\nORDER BY 2 DESC\n</code></pre>"},{"location":"guide/sql-queries/#revenue-by-day","title":"Revenue by Day","text":"<pre><code>SELECT\n    DATE_TRUNC('day', event_time) as day,\n    COUNT(*) as purchases,\n    SUM(CAST(properties-&gt;&gt;'$.amount' AS DECIMAL)) as revenue\nFROM jan_events\nWHERE event_name = 'Purchase'\nGROUP BY 1\nORDER BY 1\n</code></pre>"},{"location":"guide/sql-queries/#user-cohort-analysis","title":"User Cohort Analysis","text":"<pre><code>WITH first_events AS (\n    SELECT\n        distinct_id,\n        DATE_TRUNC('week', MIN(event_time)) as cohort_week\n    FROM jan_events\n    WHERE event_name = 'Signup'\n    GROUP BY 1\n)\nSELECT\n    cohort_week,\n    COUNT(DISTINCT distinct_id) as users\nFROM first_events\nGROUP BY 1\nORDER BY 1\n</code></pre>"},{"location":"guide/sql-queries/#funnel-query","title":"Funnel Query","text":"<pre><code>WITH step1 AS (\n    SELECT DISTINCT distinct_id\n    FROM jan_events\n    WHERE event_name = 'View Product'\n),\nstep2 AS (\n    SELECT DISTINCT distinct_id\n    FROM jan_events\n    WHERE event_name = 'Add to Cart'\n    AND distinct_id IN (SELECT distinct_id FROM step1)\n),\nstep3 AS (\n    SELECT DISTINCT distinct_id\n    FROM jan_events\n    WHERE event_name = 'Purchase'\n    AND distinct_id IN (SELECT distinct_id FROM step2)\n)\nSELECT\n    (SELECT COUNT(*) FROM step1) as viewed,\n    (SELECT COUNT(*) FROM step2) as added,\n    (SELECT COUNT(*) FROM step3) as purchased\n</code></pre>"},{"location":"guide/sql-queries/#joining-events-and-profiles","title":"Joining Events and Profiles","text":"<p>Query events with user profile data:</p> <pre><code># First, fetch both\nws.fetch_events(\"events\", from_date=\"2024-01-01\", to_date=\"2024-01-31\")\nws.fetch_profiles(\"users\")\n\n# Join them\ndf = ws.sql(\"\"\"\n    SELECT\n        e.event_name,\n        u.properties-&gt;&gt;'$.plan' as plan,\n        COUNT(*) as count\n    FROM events e\n    JOIN users u ON e.distinct_id = u.distinct_id\n    GROUP BY 1, 2\n    ORDER BY 3 DESC\n\"\"\")\n</code></pre>"},{"location":"guide/sql-queries/#cli-usage","title":"CLI Usage","text":"<p>Run SQL queries from the command line:</p> <pre><code># Table output\nmp query sql \"SELECT event_name, COUNT(*) FROM events GROUP BY 1\" --format table\n\n# JSON output\nmp query sql \"SELECT * FROM events LIMIT 10\" --format json\n\n# CSV export\nmp query sql \"SELECT * FROM events\" --format csv &gt; events.csv\n\n# JSONL for streaming\nmp query sql \"SELECT * FROM events\" --format jsonl &gt; events.jsonl\n</code></pre>"},{"location":"guide/sql-queries/#direct-duckdb-access","title":"Direct DuckDB Access","text":"<p>For advanced use cases, access the DuckDB connection directly:</p> <pre><code># Get the connection\nconn = ws.connection\n\n# Run DuckDB-specific operations\nconn.execute(\"SET threads TO 4\")\nresult = conn.execute(\"EXPLAIN ANALYZE SELECT * FROM events\").fetchall()\n</code></pre>"},{"location":"guide/sql-queries/#performance-tips","title":"Performance Tips","text":""},{"location":"guide/sql-queries/#use-appropriate-data-types","title":"Use Appropriate Data Types","text":"<p>Cast properties to appropriate types for better performance:</p> <pre><code>-- Instead of string comparison\nWHERE CAST(properties-&gt;&gt;'$.amount' AS DECIMAL) &gt; 100\n\n-- Consider creating a view with typed columns\nCREATE VIEW typed_events AS\nSELECT\n    event_id,\n    event_name,\n    event_time,\n    distinct_id,\n    CAST(properties-&gt;&gt;'$.amount' AS DECIMAL) as amount,\n    properties-&gt;&gt;'$.country' as country\nFROM jan_events\n</code></pre>"},{"location":"guide/sql-queries/#limit-result-sets","title":"Limit Result Sets","text":"<p>Always use LIMIT during exploration:</p> <pre><code>SELECT * FROM jan_events LIMIT 100\n</code></pre>"},{"location":"guide/sql-queries/#use-aggregations","title":"Use Aggregations","text":"<p>DuckDB is optimized for analytical queries. Prefer aggregations over fetching raw rows.</p>"},{"location":"guide/sql-queries/#next-steps","title":"Next Steps","text":"<ul> <li>Live Analytics \u2014 Query Mixpanel directly</li> <li>API Reference \u2014 Complete Workspace API</li> </ul>"}]}